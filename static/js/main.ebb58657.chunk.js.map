{"version":3,"sources":["discord/EventEmitter.ts","discord/voice/DiscordVoiceWs.ts","discord/ws/DiscordWs.ts","discord/DiscordClient.ts","utils.ts","discord/classes/util.ts","discord/ws/handlers/handlers.ts","chat/Header.tsx","library/Library.tsx","chat/ChatContainer.tsx","discord/classes/DiscordMessage.ts","reportWebVitals.ts","index.tsx","discord/voice/DiscordVoice.ts","chat/MemberList.tsx","discord/classes/DiscordMember.ts","guildsbar/Guilds.tsx","discord/Embed.tsx","discord/discord-message-formatting.tsx","chat/ChatMessage.tsx","components/Button.tsx","chat/StorePage.tsx","chat/ChatArea.tsx","sidebar/Channels.tsx","sidebar/MainPage.tsx","sidebar/UserInfo.tsx","sidebar/VoiceInfo.tsx","sidebar/Sidebar.tsx","App.tsx","Callback.ts","discord/ws/handlers lazy /^/.//.*/.ts$/ groupOptions: {} namespace object"],"names":["EventEmitter","subscribers","Map","event","listener","array","this","get","undefined","set","push","args","forEach","call","DiscordVoiceWs","sessionId","userId","server","latency","socket","hbInterval","hbTimerId","lastHb","hbNonce","wrongHbNonces","resume","console","log","WebSocket","endpoint","addEventListener","identify","warn","reason","code","window","clearInterval","connect","setVoiceState","object","JSON","parse","data","debug","op","d","handleHeartbeatInterval","handleReady","Date","now","error","close","secret_key","electron","udpKey","state","vws","disconnectUDP","payload","stringify","send","server_id","guild_id","user_id","session_id","token","video","ip","port","ssrc","isElectron","udp","setUdpReplyHandler","publicIp","publicPort","protocol","address","mode","heartbeat_interval","setInterval","heartbeat","currentDiscordVWSHbTimerId","dateToHHMMSS","nonce","Math","floor","random","DiscordWs","client","_hbInterval","_hbTimerId","_lastHb","_sequenceId","voiceWs","login","t","s","_handleHello","_handleEvent","_logUnknownEvent","isDiscordEventType","handler","handlers","then","v","sequenceId","currentDiscordHbTimerId","_heartbeat","seq","capabilities","presence","activities","afk","status","properties","os","browser","DiscordClient","ws","guilds","CachedManager","user","voiceSessionId","voiceServer","clear","g","cache","id","resolve","method","route","json","query","api","API_ROOT","localStorage","getItem","fetch","join","length","body","headers","snowflake","Number","parseInt","getSnowflakeCreatedAt","dateToTimestampString","date","isNow","getMonth","getFullYear","dayDiff","getDate","num2Chars","getHours","getMinutes","getSeconds","n","toString","substring","dateToDateString","monthNames","colorIntToCss","color","DISCORD_IMAGE_BASE_URL","parseStaticImageURLOptions","options","size","format","loaded","idOrInstance","predicate","result","EVENTS","READY","MESSAGE_CREATE","GUILD_MEMBERS_CHUNK","GUILD_MEMBER_LIST_UPDATE","VOICE_STATE_UPDATE","VOICE_SERVER_UPDATE","name","default","Header","props","channelName","width","height","viewBox","fill","onClick","x","y","toggleMemberListVisible","Component","SearchBar","placeholder","Library","apps","request","value","Array","isArray","style","paddingLeft","paddingRight","paddingTop","paddingBottom","overflow","type","icon","Game","ref","imageUrl","gameUrl","createRef","hover","current","setAttribute","_setStyle","className","onMouseEnter","setState","onMouseLeave","openGameUrl","launcherLogoVieyBoxes","version","preserveAspectRatio","marginLeft","marginRight","marginTop","launcherLogos","steam","origin","windows","epicgames","minecraft","memberListHandler","callback","noCallback","memberListVisible","isMemberListVisible","ChatContainer","loadMessages","visible","selectedChannel","guild","ChatArea","guildId","channel","MemberList","DiscordMessage","crosspostable","deletable","deleted","editable","_guild","_member","partial","pinnable","pinned","reaction","reference","stickers","thread","attachments","author","channel_id","components","content","getCreatedAt","edited_timestamp","embeds","flags","getGuild","member","DiscordMember","members","mentions","tts","a","emoji","message","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","navigator","serviceWorker","register","scope","reg","catch","ReactDOM","render","StrictMode","App","document","getElementById","url","open","discordConnectVoice","self_mute","self_deaf","self_video","discordDisconnectVoice","membersCH","updateMembers","m","hoistCache","atOffline","membersComponents","i","Member","notOffline","hoistedRoleId","title","roles","toUpperCase","fontSize","fontWeight","role","overflowX","overflowY","position","image","displayAvatarURL","displayName","cs","client_status","platform","web","desktop","mobile","displayColor","float","mask","src","alt","borderRadius","display","DiscordMemberManager","bannable","kickable","_roles","voice","guildAvatar","avatar","nickname","username","hoisted_role","joined_at","ownerId","nick","pending","permissions","premium_since","DiscordMemberRoleManager","displayAvatar","discriminator","botRole","_color","highest","hoist","premiumSubscriberRole","r","colorRoles","filter","reduce","prev","comparePositionTo","roleOrRoles","guildsCallback","setGuilds","Guilds","_setGuilds","GuildIcon","selected","selectedGuild","marginBottom","backgroundColor","index","_guildsComponents","startsWith","borderTopRightRadius","borderBottomRightRadius","cursor","onMouseDown","selectGuild","_image","Embed","embed","thumbnail","icon_url","discordFormattedText","messageRef","href","target","description","fields","map","field","gridColumnStart","gridColumnEnd","lineHeight","minWidth","gridGap","footer","text","sideThumbnail","maxWidth","maxHeight","gridRow","gridColumn","autoPlay","loop","muted","poster","provider","allowFullScreen","scrolling","borderColor","messageSpecialRegex","markdownRegex","formattedText","previousMatchEnd","matches","matchAll","next","done","match","formatTextSpecial","groups","b","l","u","c","cb","lang","split","language","shStyles","q","flexDirection","endsWith","rem","br","a_md","slice","codePointAt","emoji_name","subst","emojiSubst","custom_emoji","animated","everyone","mention","mention_everyone","before","find","channels","Emoji","Mention","useState","setHover","ChatMessageContent","trim","textResult","embedResult","att","content_type","filename","scroll","ChatMessageItem","ChatMessageGroupStart","authorImage","authorName","isAuthorBot","bot","authorFlags","public_flags","padding","createdAt","ChatMessage","groupStart","Button","_currentHoverStyle","_currentActiveStyle","over","active","hoverStyle","onHover","toggle","activeStyle","onMouseUp","e","children","StorePage","prevCID","page","sku","fetchPage","carousel","carousel_items","left","right","top","bottom","margin","backgroundImage","header_background","WebkitMask","opacity","header_logo_dark_theme","paddingBlock","asset_id","controls","borderBottom","summary","border","borderTopLeftRadius","borderBottomLeftRadius","borderTop","messageHandler","pushMessage","input","Chat","currentChannel","channelId","messages","fetchPaused","prevScroll","scrollArea","onScroll","onTop","scrollTop","clientHeight","scrollHeight","fetchMessagesBefore","currentClient","loadLatestMessages","setCallback","tryReloadMessages","newMessages","unshift","prevUserId","prevTime","arr","time","day","getTime","timestamp","ChatMessageDivider","Input","textAreaRef","activitiesShown","onKeyPress","key","shiftKey","preventDefault","textContent","submit","onInput","onChange","autoFocus","spellCheck","max_age","target_type","target_application_id","invite","hidden","zIndex","EmojiButton","emojiIndex","Channels","rulesChannelId","struct","iter","fetchAll","entries","parent_id","parent","sc","cid","cat","existingSc","selectedChannelId","sort","rules","flexGrow","_channels","Channel","channelType","selectChannel","channelIcon","channelIcons","forbidden","MainPage","transform","MenuItem","bgc","UserInfo","alignItems","cx","cy","rx","flexShrink","UserInfoButton","VoiceInfo","currentVoice","Sidebar","verified","features","includes","partnered","selectedGuildCH","selectedChannelCH","prevVoiceState","voiceStateCH","newState","keyListener","ctrlKey","reloadPage","devTools","discordClient","currentGuild","selectedChannels","selectedChannelsPayload","setItem","scs","p","threads","typing","scId","values","ping","pcmPlayer","PCMPlayer","inputCodec","flushTime","sampleRate","setPcmHandler","feed","Buffer","alloc","from","removeEventListener","AppBar","AppBarIcon","action","stroke","points","windowButton","webpackAsyncContext","req","__webpack_require__","o","Promise","Error","ids","all","keys","Object","module","exports"],"mappings":"iMAAaA,EAAb,iDAGcC,YAAwD,IAAIC,IAH1E,sCAKI,SAAsBC,EAAUC,GAC5B,IAAIC,EAAQC,KAAKL,YAAYM,IAAIJ,GAMjC,YALcK,IAAVH,IACAA,EAAQ,GACRC,KAAKL,YAAYQ,IAAIN,EAAOE,IAEhCA,EAAMK,KAAKN,GACJE,OAZf,kBAeI,SAAwBH,GAA+B,IAAC,IAAD,4BAAlBQ,EAAkB,iCAAlBA,EAAkB,kBAEnD,OADA,UAAAL,KAAKL,YAAYM,IAAIJ,UAArB,SAA6BS,SAAQ,SAAAR,GAAQ,OAAIA,EAASS,KAAT,MAAAT,EAAQ,CAAM,GAAN,OAAeO,OACjEL,SAjBf,K,wCCIaQ,EAAb,WA6KI,WAAYC,EAAmBC,EAAgBC,GAAgE,yBA5KtGF,eA4KqG,OA3KrGC,YA2KqG,OA1KrGC,YA0KqG,OAxK9GC,aAwK8G,OAvK9GC,YAuK8G,OArKtGC,gBAqKsG,OApKtGC,eAoKsG,OAnKtGC,YAmKsG,OAlKtGC,aAkKsG,OAjKtGC,cAAgB,EAkKpBlB,KAAKS,UAAYA,EACjBT,KAAKU,OAASA,EACdV,KAAKW,OAASA,EAhLtB,2CAcI,WAAkC,IAAD,OAAzBQ,EAAyB,wDAC7BC,QAAQC,IAAIF,EAAS,kBAAoB,yBAEzC,IAAMN,EAAS,IAAIS,UAAJ,gBAAuBtB,KAAKW,OAAOY,SAAnC,UAEfV,EAAOW,iBAAiB,QAAQ,WAC5BJ,QAAQC,IAAI,oBACZ,EAAKR,OAASA,EAEVM,EAAQ,EAAKA,SACZ,EAAKM,cAGdZ,EAAOW,iBAAiB,SAAS,SAAA3B,GAC7BuB,QAAQM,KAAR,uBAA6B7B,EAAM8B,OAAnC,oBAAqD9B,EAAM+B,OAC3DC,OAAOC,cAAc,EAAKf,WAEtBlB,EAAM+B,KAAO,IAAM,EAAKG,SAAQ,GAC/BC,YAAc,SAGvBnB,EAAOW,iBAAiB,WAAW,SAAA3B,GAC1B,EAAKgB,QACNO,QAAQM,KAAK,qBAGjB,IAAMO,EAAcC,KAAKC,MAAMtC,EAAMuC,MACrChB,QAAQiB,MAAMJ,GACd,IAAMK,EAAaL,EAAOK,GACpBC,EAASN,EAAOM,EAEtB,OAAOD,GACP,KAAK,EACD,EAAKE,wBAAwBD,GAC7B,MACJ,KAAK,EACD,EAAKE,YAAYF,GACjB,MACJ,KAAK,EACD,EAAK3B,QAAU8B,KAAKC,MAAQ,EAAK3B,OAC7BuB,IAAM,EAAKtB,SACXG,QAAQM,KAAK,gCACX,EAAKR,cACH,EAAKA,cAAgB,IACrBE,QAAQwB,MAAM,iDACd,EAAKC,UAGT,EAAK3B,cAAgB,EAEzBE,QAAQiB,MAAR,gCAAuC,EAAKzB,QAA5C,MACA,MACJ,KAAK,EACDQ,QAAQC,IAAI,eAAgBkB,EAAEO,YAC9BjB,OAAOkB,SAASC,OAAOT,EAAEO,YACzB,MACJ,QACI1B,QAAQC,IAAI,sBACZD,QAAQC,IAAIxB,OAIpBmC,YAAc,CAAEiB,MAAO,MAAOC,IAAKlD,SA5E3C,mBA+EI,WACSA,KAAKa,QAIVO,QAAQC,IAAI,eACZrB,KAAKa,OAAOgC,MAAM,KAElBhB,OAAOkB,SAASI,iBANZ/B,QAAQM,KAAK,+BAjFzB,kBA0FI,SAAKY,EAAYF,GAAW,IAAD,EACjBgB,EAAUlB,KAAKmB,UAAU,CAC3Bf,GAAIA,EACJC,EAAGH,IAEPhB,QAAQC,IAAR,sBAA2B+B,IAC3B,UAAApD,KAAKa,cAAL,SAAayC,KAAKF,KAhG1B,sBAmGI,WACIhC,QAAQC,IAAI,qBACZrB,KAAKsD,KAAK,EAAG,CACTC,UAAWvD,KAAKW,OAAO6C,SACvBC,QAASzD,KAAKU,OACdgD,WAAY1D,KAAKS,UACjBkD,MAAO3D,KAAKW,OAAOgD,MACnBC,OAAO,MA1GnB,oBA8GI,WACIxC,QAAQwB,MAAM,0BACd5C,KAAK6C,UAhHb,yBAyHI,SAAoBN,GAKhB,IAAD,OACCnB,QAAQC,IAAR,sBAA2BkB,EAAEsB,GAA7B,YAAmCtB,EAAEuB,KAArC,kBAAmDvB,EAAEwB,KAArD,MACA/B,YAAc,CAAEiB,MAAO,cAEnBe,QACAnC,OAAOkB,SAASkB,IAAI1B,EAAEsB,GAAItB,EAAEuB,KAAMvB,EAAEwB,MACpClC,OAAOkB,SAASmB,oBAAmB,SAACC,EAAUC,GAC1ChD,QAAQC,IAAR,mCAAwC8C,EAAxC,YAAoDC,IACpD,EAAKd,KAAK,EAAG,CACTe,SAAU,MACVjC,KAAM,CACFkC,QAASH,EACTL,KAAMM,EACNG,KAAM,4BAGdvC,YAAc,CAAEiB,MAAO,oBA9IvC,qCAoJI,SAAgCV,GAAoC,IAAD,OAC/DvC,KAAKc,WAAayB,EAAEiC,mBACpBpD,QAAQC,IAAR,8BAAmCrB,KAAKc,aACxCd,KAAKe,UAAYc,OAAO4C,aAAY,WAChC,EAAKzD,OAAS,EAAK0D,cACpB1E,KAAKc,YACRe,OAAO8C,2BAA6B3E,KAAKe,UACzCK,QAAQC,IAAIQ,OAAO8C,8BA3J3B,uBA8JI,WACI,GAAI3E,KAAKe,YAAcc,OAAO8C,2BAC1B9C,OAAOC,cAAc9B,KAAKe,eACvB,CAAC,IAAD,EACHK,QAAQiB,MAAR,WAAkBuC,YAAa,IAAIlC,MAAnC,gCAAkE1C,KAAKS,UAAvE,MACA,IAAMoE,EAAQC,KAAKC,MAAsB,IAAhBD,KAAKE,UAA0B,UACxD,UAAAhF,KAAKa,cAAL,SAAayC,KAAKpB,KAAKmB,UAAU,CAC7Bf,GAAI,EACJC,EAAGsC,KAEP7E,KAAKiB,QAAU4D,EAEnB,OAAOnC,KAAKC,UA1KpB,K,QCCasC,EAAb,WAGI,WAAYC,GAAwB,yBAF3BA,YAE0B,OAInCtE,QAAyB,KAJU,KAKnCC,OAA2B,KALQ,KAMnCJ,UAA2B,KANQ,KAQnC0E,iBARmC,OASnCC,gBATmC,OAUnCC,aAVmC,OAWnCC,YAA6B,KAVzBtF,KAAKkF,OAASA,EAJtB,yCAgBI,SAAMvB,GAAyC,IAAD,OAAzBxC,EAAyB,wDAC1CC,QAAQC,IAAIF,EAAS,cAAe,uBAEpC,IAAMN,EAAS,IAAIS,UAAU,+CAE7BT,EAAOW,iBAAiB,QAAQ,WAC5BJ,QAAQC,IAAI,0BACZ,EAAKR,OAASA,KAGlBA,EAAOW,iBAAiB,SAAS,SAAA3B,GAAU,IAAD,EACtCuB,QAAQM,KAAR,8BAAoC7B,EAAM8B,OAA1C,oBAA4D9B,EAAM+B,OAClEC,OAAOC,cAAc,EAAKsD,YAE1B,YAAKF,OAAOK,eAAZ,SAAqB1C,QAEjBhD,EAAM+B,KAAO,KAAM,EAAK4D,MAAM7B,GAAO,MAG7C9C,EAAOW,iBAAiB,WAAW,SAAA3B,GAC1B,EAAKgB,QACNO,QAAQM,KAAK,qBAGjB,IAAMO,EAAcC,KAAKC,MAAMtC,EAAMuC,MACrChB,QAAQiB,MAAMJ,GACd,IAAMK,EAAaL,EAAOK,GACpBmD,EAAkBxD,EAAOwD,EACzBC,EAAYzD,EAAOyD,EACnBnD,EAASN,EAAOM,EAEtB,OAAQD,GACR,KAAK,GACD,EAAKqD,aAAahC,EAAOxC,EAAQoB,GACjC,MACJ,KAAK,GACD,EAAK3B,QAAU8B,KAAKC,MAAQ,EAAK0C,QACjCjE,QAAQiB,MAAR,gCAAuC,EAAKzB,QAA5C,MACA,MACJ,KAAK,EACD,EAAK0E,YAAcI,EACd,EAAKE,aAAaH,EAAGlD,IAAI,EAAKsD,iBAAiB5D,GACpD,MACJ,KAAK,EACL,KAAK,EAED,EAAKuD,MAAM7B,GAAO,GAClB,MACJ,QACI,EAAKkC,iBAAiB5D,SAjEtC,mBAsEI,WACSjC,KAAKa,SACVO,QAAQC,IAAI,yBACZrB,KAAKa,OAAOgC,MAAM,QAzE1B,kBA4EI,SAAuBP,EAAQF,GAAwB,IAAD,EAC5CgB,EAAUlB,KAAKmB,UAAU,CAC3Bf,GAAIA,EACJC,EAAGH,IAEPhB,QAAQC,IAAR,cAAmB+B,IACnB,UAAApD,KAAKa,cAAL,SAAayC,KAAKF,KAlF1B,0BAqFI,SAAaqC,EAAWlD,GAAS,IAAD,OAC5B,IAAKuD,6BAAmBL,GAAI,OAAO,EACnC,IAAMM,EAAUC,WAAS/F,IAAIwF,GAC7B,QAAKM,IACLA,EAAQE,MAAK,SAAAC,GAAC,OAAIA,EAAE,EAAKhB,OAAQ3C,OAC1B,KA1Ff,8BA6FI,SAAiB1C,GACbuB,QAAQC,IAAI,kBACZD,QAAQC,IAAIxB,KA/FpB,wBAkGI,SAAWsG,GAKC,IAAD,EAJHnG,KAAKoF,aAAevD,OAAOuE,wBAE3BvE,OAAOC,cAAc9B,KAAKoF,aAG1BhE,QAAQiB,MAAR,WAAkBuC,YAAa,IAAIlC,MAAnC,4BAA8D1C,KAAKS,UAAnE,MACA,UAAAT,KAAKa,cAAL,SAAayC,KAAKpB,KAAKmB,UAAU,CAC7Bf,GAAI,EACJC,EAAG4D,MAGX,OAAOzD,KAAKC,QA9GpB,0BAiHI,SAAagB,EAAexC,EAAiBoB,GAAoC,IAAD,OAE5EvC,KAAKmF,YAAc5C,EAAEiC,mBACrBpD,QAAQC,IAAR,8BAAmCrB,KAAKmF,cACxCnF,KAAKoF,WAAavD,OAAO4C,aAAY,WACjC,EAAKY,QAAU,EAAKgB,WAAW,EAAKf,eACrCtF,KAAKmF,aACRtD,OAAOuE,wBAA0BpG,KAAKoF,WACtChE,QAAQC,IAAIQ,OAAOuE,yBAGdjF,EAqBDnB,KAAKsD,KAAK,EAAG,CACTK,MAAOA,EACPD,WAAY1D,KAAKS,UACjB6F,IAAKtG,KAAKsF,eAvBdlE,QAAQC,IAAI,eACZrB,KAAKsD,KAAK,EAAG,CACTK,MAAOA,EACP4C,aAAc,IACdC,SAAU,CACNC,WAAY,GAMZC,KAAK,EACLC,OAAQ,UAEZC,WAAY,CACRC,GAAI,UACJC,QAAS,iBA7I7B,KCGaC,EAAb,kDAEI,WAAYpD,GAAgB,IAAD,8BACvB,gBAFJA,WAC2B,IAKlBqD,GAAK,IAAI/B,EAAJ,gBALa,EAQ3BgC,OAAsC,IAAIC,IAAJ,gBARX,EA8B3BC,UA9B2B,IA+B3BC,oBA/B2B,IAgC3BC,iBAhC2B,IAiC3B9B,aAjC2B,EAEvB,EAAK5B,MAAQA,EAFU,EAF/B,6CAYI,SAAUsD,GAAyB,IAAD,OAC9BjH,KAAKiH,OAAOK,QACZL,EAAO3G,SAAQ,SAAAiH,GACX,EAAKN,OAAOO,MAAMrH,IAAIoH,EAAEE,GAAIF,QAfxC,sBAmBI,SAASE,GACL,OAAOzH,KAAKiH,OAAOS,QAAQD,KApBnC,mBAuBI,WACIzH,KAAKgH,GAAGxB,MAAMxF,KAAK2D,SAxB3B,mBA2BI,WAAS,IAAD,EACJ,UAAA3D,KAAKuF,eAAL,SAAc1C,QACd7C,KAAKgH,GAAGnE,UA7BhB,0BAqCI,WAKI7C,KAAKuF,QAAU,IAAI/E,EAAeR,KAAKoH,eAAiBpH,KAAKmH,KAAMM,GAAIzH,KAAKqH,aAC5ErH,KAAKuF,QAAQxD,aA3CrB,sBA8CI,SACI4F,EACAC,EACAxF,GAID,IAHCyF,IAGF,yDAFEC,EAEF,uDAFoB,GAClBC,EACF,uDADgBC,EAERrE,EAAQ9B,OAAOoG,aAAaC,QAAQ,SAC1C,OAAOC,MAAM,WAAD,OAAYJ,EAAZ,YAAmBH,EAAMQ,KAAK,MAA9B,OAAsD,IAAjBN,EAAMO,OAAN,WAAyBP,EAAMM,KAAK,MAAS,IAAM,CAChGT,OAAQA,EACRW,KAAMlG,EAAOF,KAAKmB,UAAUjB,QAAQlC,EACpCqI,QAAQ,aACJ,cAAiB5E,GACbkE,EAAO,CAAE,eAAe,yBAAuB3H,OA5DnE,mCAiEI,SAA6BsI,GAEzB,OAAqB,YADTC,OAAOC,SAASF,IACb,MAnEvB,0BAsEI,YAA6C,IAAvBf,EAAsB,EAAtBA,GAClB,OAAOzH,KAAK2I,sBAAsBlB,OAvE1C,GAAmC/H,GAuF7BsI,EAAW,sB,gCC/FV,SAASY,EAAsBC,GAAqC,IAAzBC,EAAwB,wDAChEnG,EAAMmG,EAAQD,EAAO,IAAInG,KAG/B,GAAImG,EAAKE,aAAepG,EAAIoG,YAAcF,EAAKG,gBAAkBrG,EAAIqG,cAAe,CAChF,IAAMC,EAAUJ,EAAKK,UAAYvG,EAAIuG,UACrC,GAAID,GAAW,GAAKA,IAAY,EAAG,MAAM,GAAN,OAAsB,IAAZA,EAAgB,QAAU,YAApC,eAAsDE,EAAUN,EAAKO,YAArE,YAAoFD,EAAUN,EAAKQ,eAE1I,MAAM,GAAN,OAAUF,EAAUN,EAAKK,WAAzB,YAAuCC,EAAUN,EAAKE,YAAtD,YAAqEI,EAAUN,EAAKG,gBAGjF,SAASpE,EAAaiE,GACzB,MAAM,GAAN,OAAUM,EAAUN,EAAKO,YAAzB,YAAwCD,EAAUN,EAAKQ,cAAvD,YAAwEF,EAAUN,EAAKS,eAG3F,SAASH,EAAUI,GACf,GAAkB,kBAAPA,EAAX,CACA,IAAM7D,EAAI6D,EAAEC,WACZ,OAAiB,IAAb9D,EAAE2C,OAAqB3C,EACV,IAAbA,EAAE2C,OAAoB,IAAN,OAAW3C,GACxBA,EAAE+D,UAAU/D,EAAE2C,OAAS,IAG3B,SAASqB,EAAiBb,GAC7B,MAAM,GAAN,OAAUA,EAAKK,UAAf,YAA4BS,EAAWd,EAAKE,YAA5C,YAA2DF,EAAKG,eAxBpE,wIA2BA,IAAMW,EAAa,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAE3H,SAASC,EAAcC,GAC1B,MAAM,OAAN,OAAcA,EAAK,SAAL,MAAd,aAA0DA,EAAK,MAAiB,IAAhF,aAAwFA,EAAQ,IAAhG,O,wJC5BSC,EAAyB,6BAO/B,SAASC,EAA2BC,GAA2C,IAAD,EACjF,IAAKA,EAAS,MAAO,GACrB,IAAMC,EAAOD,EAAQC,KACrB,MAAM,IAAN,iBAAWD,EAAQE,cAAnB,QAA6B,QAA7B,OAAsCD,EAAI,gBAAYA,GAAS,IAG5D,IAAM/C,EAAb,WA0BI,WAAYhC,GAAwB,yBAzB3BA,YAyB0B,OAxB1BsC,MAAwB,IAAI5H,IAwBF,KAtBzBuK,QAAS,EAuBfnK,KAAKkF,OAASA,EA3BtB,2CAMI,SAAQkF,GACJ,MAA+B,kBAAjBA,EAA4BpK,KAAKwH,MAAMvH,IAAImK,GAAgBA,IAPjF,uBAUI,SAAUA,GACN,MAA+B,kBAAjBA,EAA4BA,EAAeA,EAAa3C,KAX9E,mBAcI,WACIzH,KAAKwH,MAAMF,UAfnB,oBAkBI,SAAO+C,GACH,IAAMC,EAAc,GAIpB,OAHAtK,KAAKwH,MAAMlH,SAAQ,SAAA4F,GACXmE,EAAUnE,IAAIoE,EAAOlK,KAAK8F,MAE3BoE,MAvBf,M,gCCbA,uGAAMC,EAAS,CACXC,MAAO,QACPC,eAAgB,gBAChBC,oBAAqB,oBACrBC,yBAA0B,wBAC1BC,mBAAoB,mBACpBC,oBAAqB,qBAKnB7E,EAAW,IAAIpG,IAErB,IAAK,IAAMkL,KAAQP,EACfvE,EAAS7F,IAAI2K,EAAsB,MAAO,YAAKA,EAAZ,QAAuB7E,MAAK,SAACC,GAAD,OAAOA,EAAE6E,YAOrE,SAASjF,EAAmBL,GAC/B,OAAOA,KAAK8E,I,mMChBKS,E,4JAGjB,WACI,OACI,yBAASvD,GAAG,SAAZ,SACKzH,KAAKiL,MAAMC,YAAe,qCAAE,qBAAKzD,GAAG,sBAAR,SACzB,gCACA,qBAAKA,GAAG,sBAAR,SACI,qBAAK0D,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,SAAgD,sBAAMC,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,29BAExH,6BAAKvC,KAAKiL,MAAMC,mBAEpB,qBAAKzD,GAAG,oBAAR,SACI,gCACA,wBAAQ8D,QAAS,kBAAMnK,QAAQC,IAAI,SAAnC,SACI,qBAAKmK,EAAE,IAAIC,EAAE,IAAIN,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAhD,SAA4D,sBAAMC,KAAK,eAAe/I,EAAE,8aAE5F,iCACI,qBAAKiJ,EAAE,IAAIC,EAAE,IAAIN,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAjE,SAAwE,sBAAM/I,EAAE,sLAAsL+I,KAAK,qBAE/Q,cAAC,EAAD,IACA,wBAAiCC,QAASG,EAA1C,SACI,sBAAKF,EAAE,IAAIC,EAAE,IAAIN,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAhD,UAA4D,sBAAMC,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,sPAA2P,sBAAM+I,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,sPAA2P,sBAAM+I,KAAK,eAAe/I,EAAE,0IAA+I,sBAAM+I,KAAK,eAAe/I,EAAE,yQAEr4B,iCACI,qBAAKiJ,EAAE,IAAIC,EAAE,IAAIN,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAhD,SAA4D,sBAAMC,KAAK,eAAe/I,EAAE,+PAE5F,iCACI,qBAAKiJ,EAAE,IAAIC,EAAE,IAAIN,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAjE,SAAwE,sBAAMA,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,qNAEhJ,iCACI,sBAAKiJ,EAAE,IAAIC,EAAE,IAAIN,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAjE,UAAwE,sBAAMA,KAAK,eAAe/I,EAAE,swBAA2wB,sBAAM+I,KAAK,eAAe/I,EAAE,uaAGt4B,W,GAnCOoJ,aAyC9BC,E,4JACF,WACI,OACI,qBAAKnE,GAAG,oBAAR,SACI,uBAAOoE,YAAY,iB,GAJXF,a,gCC7CHG,E,4MACjBC,KAAc,G,uDACd,WAAqB,IAAD,OAChBhF,IAAciF,QAAQ,MAAO,CAAC,QAAS,MAAO,YAE9CjF,IAAciF,QAAQ,MAAO,CAAC,eAAgB,eAAe/F,MAAK,SAAAgG,GAAK,OACnEA,EAAMpE,UACR5B,MAAK,SAAA8F,GACEG,MAAMC,QAAQJ,KACnB,EAAKA,KAAOA,EACZ3K,QAAQC,IAAI0K,S,oBAIpB,WACI,OACI,sBAAKK,MAAO,CACRC,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACfC,SAAU,QALd,UAOI,cAAC,EAAD,CAAM3B,KAAK,iBAAiB4B,KAAK,QAAQjF,GAAG,YAC5C,cAAC,EAAD,CAAMqD,KAAK,WAAW4B,KAAK,QAAQjF,GAAG,WACtC,cAAC,EAAD,CAAMqD,KAAK,+BAA0B4B,KAAK,SAASjF,GAAG,SAASkF,KAAK,8FACpE,cAAC,EAAD,CAAM7B,KAAK,QAAQ4B,KAAK,UAAUjF,GAAG,0EAAkEkF,KAAK,iKAC5G,cAAC,EAAD,CAAM7B,KAAK,gBAAgB4B,KAAK,YAAYjF,GAAG,GAAGkF,KAAK,6J,GA3BlChB,aA0C/BiB,E,kDAMF,WAAY3B,GAAmB,IAAD,MAO1B,OAP0B,qBAC1B,cAAMA,IANV4B,SAK8B,IAH9BC,cAG8B,IAF9BC,aAE8B,EAE1B,EAAKF,IAAMG,sBACX,EAAK/J,MAAQ,CACTgK,OAAO,GAGH,EAAKhC,MAAMyB,MACnB,IAAK,QACD,EAAKI,SAAL,qDAA8D,EAAK7B,MAAMxD,GAAzE,2BACA,EAAKsF,QAAL,sBAA8B,EAAK9B,MAAMxD,IACzC,MACJ,IAAK,SACD,EAAKqF,SAAL,gFAAyF,EAAK7B,MAAMxD,GAApG,wBAAsH,EAAKwD,MAAM0B,KAAjI,QACA,EAAKI,QAAL,0CAAkD,EAAK9B,MAAMxD,IAC7D,MACJ,IAAK,UACD,EAAKqF,SAAL,UAAgB,EAAK7B,MAAM0B,YAA3B,QAAmC,GACnC,EAAKI,QAAU,EAAK9B,MAAMxD,GAC1B,MACJ,IAAK,YACD,EAAKqF,SAAL,UAAgB,EAAK7B,MAAM0B,YAA3B,QAAmC,GACnC,EAAKI,QAAU,EAAK9B,MAAMxD,GAC1B,MACJ,IAAK,YACD,EAAKqF,SAAW,iKAChB,EAAKC,QAAL,YA1BsB,S,6CA+B9B,WAAa,IAAD,EACFE,EAAQjN,KAAKiD,MAAMgK,MACzB,UAAAjN,KAAK6M,WAAL,SAAUK,QAAQC,aAAa,QAA/B,4JAGUnN,KAAK8M,SAHf,qLASEG,EAAQ,+BAAiC,GAT3C,kB,+BAoBJ,WAAsBjN,KAAKoN,c,gCAC3B,WAAuBpN,KAAKoN,c,oBAE5B,WAAU,IAAD,OACL,OACI,qBACAC,UAAU,OACVR,IAAK7M,KAAK6M,IACVS,aAAc,kBAAM,EAAKC,SAAS,CAAEN,OAAO,KAC3CO,aAAc,kBAAM,EAAKD,SAAS,CAAEN,OAAO,KAC3C1B,QAAS,WAAQkC,sBAAY,EAAKV,UALlC,SAOI,qBAAK5B,MAAM,KAAKC,OAAO,KAAKC,QAASqC,EAAsB1N,KAAKiL,MAAMyB,MAAOiB,QAAQ,MAAMC,oBAAoB,WAAWxB,MAAO,CAC7HyB,WAAY,IACZC,YAAa,EACbC,UAAW,KAHf,SAIG,4BACEC,EAAchO,KAAKiL,MAAMyB,gB,GA5E3Bf,aAoFbqC,EAAgB,CAClBC,MAAO,sBAAM1L,EAAE,ygEAAygE+I,KAAK,iBAC7hE4C,OAAQ,sBAAM3L,EAAE,g4DAAg4D+I,KAAK,iBACr5D6C,QAAS,sBAAM5L,EAAE,2IAA2I+I,KAAK,iBACjK8C,UAAW,qCAAE,sBAAM9C,KAAK,eAAe/I,EAAE,ySAAwS,sBAAM+I,KAAK,OAAO/I,EAAE,2nLACrW8L,UAAW,sBAAM9L,EAAE,6HAGjBmL,EAAwB,CAC1BO,MAAO,cACPC,OAAQ,cACRC,QAAS,YACTC,UAAW,cACXC,UAAW,aCpITC,EAA8C,CAChDC,SAAUC,KAGVC,GAAoB,EAEjB,SAAS/C,IACZ4C,EAAkBC,UAAUE,GAC5BA,GAAqBA,EAGlB,SAASC,IACZ,OAAOD,E,IAQUE,E,kDAIjB,WAAY1D,GAA4B,IAAD,8BACnC,cAAMA,IACDhI,MAAQ,CACTwL,mBAAmB,EACnBG,cAAc,GAJiB,E,qDAQvC,WAAqB,IAAD,OAChBN,EAAkBC,SAAW,SAAAM,GAAO,OAAI,EAAKtB,SAAS,CAClDkB,kBAAmBI,O,kCAI3B,WACIP,EAAkBC,SAAWC,M,oBAGjC,WAAU,IAAD,MAEL,OADApN,QAAQC,IAAI,+BAER,sBAAKoG,GAAG,gBAAgB4F,UAAU,SAAlC,UACI,cAAC,EAAD,CAAQnC,YAAW,UAAElL,KAAKiL,MAAM6D,uBAAb,aAAE,EAA4BhE,QAChD,UAAA9K,KAAKiL,MAAM8D,aAAX,eAAkBtH,KAAMzH,KAAKiL,MAAM6D,gBAAkB,sBAAKzB,UAAU,MAAf,UAClD,cAAC2B,EAAA,EAAD,CAAUC,QAAO,UAAEjP,KAAKiL,MAAM8D,aAAb,aAAE,EAAkBtH,GAAIyH,QAASlP,KAAKiL,MAAM6D,kBAC5D9O,KAAKiD,MAAMwL,mBAAyD,IAApCzO,KAAKiL,MAAM6D,gBAAgBpC,KAAa,cAACyC,EAAA,EAAD,CAAYD,QAASlP,KAAKiL,MAAM6D,gBAAiBC,MAAO/O,KAAKiL,MAAM8D,QAAW,QAClJ,cAAC,EAAD,W,GA9BkBpD,c,yOC1B9ByD,EAAb,WAyJI,WAAYlK,EAAuB9C,GAA2B,yBAxJrD8C,YAwJoD,OAvJpD9C,UAuJoD,OA7I7D8M,aA6I6D,OAnI7DG,mBAmI6D,OAjI7DC,eAiI6D,OA/H7DC,SAAU,EA+HmD,KA7H7DC,cA6H6D,OAnHrDC,YAmHqD,OAzGpDhI,QAyGoD,OArGrDiI,aAqGqD,OAxF7DC,aAwF6D,OAtF7DC,cAsF6D,OApF7DC,YAoF6D,OAlF7DC,cAkF6D,OAhF7DC,eAgF6D,OA9E7DC,cA8E6D,OA1E7DC,YA0E6D,EACzDjQ,KAAKkF,OAASA,EACdlF,KAAKoC,KAAOA,EAEZpC,KAAKyH,GAAKrF,EAAKqF,GA7JvB,0CAII,WAAiB,OAAO,OAJ5B,yBAMI,WAAsB,OAAO,OANjC,uBAQI,WAAoB,OAAOzH,KAAKoC,KAAK8N,cARzC,kBAUI,WAAe,OAAOlQ,KAAKoC,KAAK+N,SAVpC,qBAcI,WAAkB,OAAOnQ,KAAKoC,KAAKgO,aAdvC,sBAgBI,WAAmB,OAAOpQ,KAAKoC,KAAKiO,aAhBxC,mBAkBI,WAAgB,OAAOrQ,KAAKoC,KAAKkO,UAlBrC,qBAoBI,WAAkB,OAAOvJ,IAAcwJ,aAAavQ,QApBxD,2BA8BI,WAAwB,OAAOA,KAAKoC,KAAKoO,mBA9B7C,kBAgCI,WAAe,OAAOxQ,KAAKoC,KAAKqO,SAhCpC,iBAkCI,WAAc,OAAOzQ,KAAKoC,KAAKsO,QAlCnC,oCAoCI,WAAiC,OAAO,OApC5C,iBAuCI,WAAa,IAAD,EACR,YAAoBxQ,IAAhBF,KAAKyP,OAA6BzP,KAAKyP,OACpCzP,KAAKyP,OAASzP,KAAKiP,SAAL,UAAejP,KAAKkF,OAAOyL,SAAS3Q,KAAKiP,gBAAzC,QAA4D,OAzCzF,mBA4CI,WAAgB,OAAOjP,KAAKoC,KAAKoB,WA5CrC,qBA8CI,WAAkB,OAAO,OA9C7B,uBAkDI,WAAoB,OAAO,OAlD/B,kBAqDI,WAAc,IAAD,IACT,QAAqBtD,IAAjBF,KAAK0P,QAAuB,OAAO1P,KAAK0P,QACxC1P,KAAKoC,KAAKwO,SAAQ5Q,KAAKoC,KAAKwO,OAAOzJ,KAAOnH,KAAKoC,KAAK+N,QACxD,IAAIS,EAAS5Q,KAAKiP,SAAWjP,KAAKoC,KAAKwO,OAAS,IAAIC,IAAc7Q,KAAK+O,MAAQ/O,KAAKoC,KAAKwO,QAAU,KAEnG,OADKA,IAAQA,EAAM,oBAAG5Q,KAAK+O,aAAR,aAAG,EAAY+B,QAAQpJ,QAAQ1H,KAAKmQ,OAAO1I,WAA3C,QAAkD,MAC9DzH,KAAK0P,QAAUkB,IA1D9B,oBA6DI,WAAiB,OAAO5Q,KAAKoC,KAAK2O,WA7DtC,iBA+DI,WAAc,OAAO/Q,KAAKoC,KAAKyC,QA/DnC,kBA6EI,WAAe,OAAO,OA7E1B,eAiFI,WAAY,OAAO7E,KAAKoC,KAAK4O,MAjFjC,gBAmFI,WAAa,OAAOhR,KAAKoC,KAAKsK,OAnFlC,eAqFI,WAAY,MAAM,KArFtB,qBAuFI,WAAkB,OAAO,OAvF7B,0EA0FI,sBAAAuE,EAAA,+EACW,MADX,2CA1FJ,yHA8FI,sBAAAA,EAAA,+EACW,MADX,2CA9FJ,0IAkGI,sBAAAA,EAAA,+EACW,MADX,2CAlGJ,kIAsGI,sBAAAA,EAAA,+EACW,MADX,2CAtGJ,oHA0GI,sBAAAA,EAAA,+EACWjR,MADX,gDA1GJ,iHA8GI,sBAAAiR,EAAA,+EACWjR,MADX,gDA9GJ,+GAkHI,WAAWgK,GAAX,SAAAiH,EAAA,+EACWjR,MADX,gDAlHJ,+GAwHI,sBAAAiR,EAAA,+EACWjR,MADX,gDAxHJ,gHA4HI,WAAYkR,GAAZ,SAAAD,EAAA,+EACWjR,MADX,gDA5HJ,6HAgII,sBAAAiR,EAAA,+EACWjR,MADX,gDAhIJ,gHAoII,WAAYmR,GAAZ,SAAAF,EAAA,+EACWjR,MADX,gDApIJ,uHAwII,sBAAAiR,EAAA,+EACW,MADX,2CAxIJ,yHA4II,sCAAAA,EAAA,iHACWjR,MADX,gDA5IJ,4EAgJI,WAAY,IAAD,EACP,iBAAOA,KAAKsQ,eAAZ,QAAuB,KAjJ/B,0DAoJI,sBAAAW,EAAA,+EACWjR,MADX,gDApJJ,8D,gOCSeoR,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBrL,MAAK,YAAkD,IAA/CsL,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,+CCCV,kBAAmBO,WACrBA,UAAUC,cAAcC,SAAS,UAAW,CAACC,MAAO,OACnD9L,MAAK,SAAC+L,GAEL5Q,QAAQC,IAAI,oCAAsC2Q,EAAID,UACrDE,OAAM,SAACrP,GAERxB,QAAQC,IAAI,4BAA8BuB,MAI9CsP,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACC,EAAA,EAAD,MAEFC,SAASC,eAAe,SAM1BnB,IAsBO,MAA8CvP,OAAtCkB,EAAR,EAAQA,SAAUqD,EAAlB,EAAkBA,wBAElB,SAASqH,EAAY+E,GACtBxO,MAAcnC,OAAOkB,SAAS0K,YAAY+E,GACzC3Q,OAAO4Q,KAAKD,K,gCCzDnB,+EAOO,SAASE,EAAoB1L,EAAe+H,EAAqBG,GACpElI,EAAG1D,KAAK,EAAG,CACPE,SAAUuL,EAAMtH,GAChB2I,WAAYlB,EAAQzH,GACpBkL,WAAW,EACXC,WAAW,EACXC,YAAY,IAEhB7Q,YAAc,CACVkN,QAASA,EACTjM,MAAO,OACPC,IAAK,OAIN,SAAS4P,EAAuB5N,GAAwB,IAAD,EAC1DA,EAAOkC,oBAAiBlH,EACxBgF,EAAOmC,iBAAcnH,EACrB,UAAAgF,EAAOK,eAAP,SAAgB1C,QAChBqC,EAAO8B,GAAG1D,KAAK,EAAG,CACdE,SAAU,KACV4M,WAAY,KACZuC,WAAW,EACXC,WAAW,EACXC,YAAY,M,yJCzBdE,EAAmD,CACrDxE,SAAUC,KAGP,SAASwE,EAAclC,GAC1BiC,EAAUxE,SAASuC,G,IAYF3B,E,kDACjB,WAAYlE,GAAyB,IAAD,8BAChC,cAAMA,IACDhI,MAAQ,CACT6N,QAAS,MAHmB,E,qDAOpC,WAAqB,IAAD,OAChBiC,EAAUxE,SAAW,SAAA0E,GACjB,EAAK1F,SAAS,CAAEuD,QAASmC,O,kCAIjC,WACIF,EAAUxE,SAAWC,M,oBAGzB,WAAU,IAAD,IACD0E,OAAwChT,EACxCiT,GAAY,EAEVC,EAA2B,GA4BjC,OA3BA,UAAApT,KAAKiD,MAAM6N,eAAX,mBAAoBtJ,aAApB,SAA2BlH,SAAQ,SAAC2S,EAAGI,GACnC,IAAMzC,EAAS,cAAC0C,EAAD,CAAgB1C,OAAQqC,GAAXI,GACtBE,EAAmC,YAAtBN,EAAEzM,SAASG,OAC9B,GAAKuM,IAAeD,EAAEO,eAAkBD,GAAgBJ,EAoBpDC,EAAkBhT,KAAKwQ,OApBwC,CAAC,IAAD,IAC/DsC,EAAaD,EAAEO,cACf,IAAMC,EAAQF,EAA6B,OAAfL,EAAsB,SAAtB,UAAiCD,EAAES,MAAMhM,QAAQwL,UAAjD,iBAAiC,EAA6BpI,YAA9D,aAAiC,EAAmC6I,cAAiB,UAC5GJ,IACDJ,GAAY,GAEhBC,EAAkBhT,KACd,qCACA,qBAAKgM,MAAO,CACRC,YAAa,GACbE,WAAY,GACZD,aAAc,EACdzC,MAAO,UACP+J,SAAU,OACVC,WAAY,KANhB,SAOIJ,IACH7C,UAST,uBAAOnJ,GAAG,aAAa2E,MAAO,CAC1BjB,MAAO,KADX,SAGI,qBAAK2I,KAAK,OAAO1H,MAAO,CACpB2H,UAAW,SACXC,UAAW,OACX5I,OAAQ,oBACR6I,SAAU,WACV9I,MAAO,WALX,SAOKiI,U,GA7DmBzH,aAwElC2H,E,4JACF,WAAU,IAAD,EAEC1C,EAAS5Q,KAAKiL,MAAM2F,OAEpBsD,EAAQtD,EAAOuD,iBAAiB,CAAEjK,OAAQ,OAAQD,KAAM,MACxDa,EAAO8F,EAAOwD,YACdzN,EAASiK,EAAOpK,SAASG,OACzB0N,EAAKzD,EAAOpK,SAAS8N,cACrBC,GAAa,OAAFF,QAAE,IAAFA,OAAA,EAAAA,EAAIG,OAAQ7N,EAAS,OAAU,OAAF0N,QAAE,IAAFA,OAAA,EAAAA,EAAII,WAAY9N,EAAS,WAAc,OAAF0N,QAAE,IAAFA,OAAA,EAAAA,EAAIK,UAAW/N,EAAS,SAAW,UAElHkD,EAAU,UAAG+G,EAAO+D,oBAAV,QAA0B,QAIxC,OAHA9K,EAAQA,EAAK,UAAMA,GAAS,GAAf,YAAsBA,GAAS,EAAK,IAApC,YAAoD,IAARA,GAAiB,cAC1EA,EAAQ,cAA8BA,EAAnB,YAAXlD,EAAA,eAGJ,qBAAKyF,MAAO,CACRjB,MAAO,IACPC,OAAQ,GACRyC,WAAY,EACZtB,WAAY,EACZC,cAAe,EACf3C,MAAO,UACP+J,SAAU,GACVC,WAAY,KARhB,SAUI,sBAAKzH,MAAO,CACRC,YAAa,EACbC,aAAc,GAFlB,UAII,qBAAKwH,KAAK,MAAM,aAAW,sBAAsB1H,MAAO,CACpDjB,MAAO,GACPC,OAAQ,GACR0C,YAAa,GACbC,UAAW,EACX6G,MAAO,QALX,SAOI,sBAAKzJ,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,UACI,+BAAeG,EAAE,IAAIC,EAAE,IAAIN,MAAM,KAAKC,OAAO,KAAKyJ,KAAI,sCAAiCN,EAAjC,KAAtD,SACI,8BAAK,qBAAKpJ,MAAM,KAAKC,OAAO,KAAK0J,IAAKZ,EAAOa,IAAI,IAAI3I,MAAO,CAAE4I,aAAc,cAEhF,sBAAM7J,MAAM,KAAKC,OAAO,KAAKI,EAAE,KAAKC,EAAE,KAAKH,KAAiB,WAAX3E,EAAsB,mBAAgC,SAAXA,EAAoB,oBAAiC,QAAXA,EAAmB,mBAAgC,cAAXA,EAAyB,mBAAqB,UAAWkO,KAAI,+BAA0BN,EAA1B,YAGnP,qBAAKnI,MAAQ,CACT6I,QAAS,eACTlH,UAAW,IAFf,SAII,sBAAM3B,MAAO,CACThB,OAAQ,GACR6J,QAAS,QACTpL,MAAOA,GAHX,SAIIiB,e,GApDPa,c,mKC1FRuJ,EAAb,kDAEI,WAAYnG,GAAsB,uCACxBA,EAAM7J,QAHpB,UAA0CgC,KAS7B2J,EAAb,WAuGI,WAAY9B,EAAqB3M,GAA0B,yBAtGlD2M,WAsGiD,OArGjD3M,UAqGiD,OAnGjDqF,QAmGiD,OAjG1D0N,cAiG0D,OA7F1D5F,aA6F0D,OA/E1D6F,cA+E0D,OAnE1DzF,aAmE0D,OAzDlD0F,YAyDkD,OAnDjDlO,UAmDiD,OAjD1DmO,WAiD0D,EACtDtV,KAAK+O,MAAQA,EACb/O,KAAKoC,KAAOA,EAEZpC,KAAKmH,KAAO/E,EAAK+E,KACjBnH,KAAKyH,GAAKzH,KAAKmH,KAAMM,GA5G7B,wCAQI,WAAe,OAAOzH,KAAK+O,MAAM7J,SARrC,yBAYI,WAAqB,IAAD,MAAE,2BAAOlF,KAAKuV,mBAAZ,kBAA2BvV,KAAKmH,YAAhC,aAA2B,EAAWqO,cAAtC,QAAgD,OAZ1E,wBAcI,WAAoB,IAAD,IAAE,2BAAOxV,KAAK0T,MAAM7J,aAAlB,aAAO,EAAkBA,aAAzB,QAAkC,IAd3D,uBAgBI,WAAmB,IAAD,IAAE,iBAAO7J,KAAKyV,gBAAZ,kBAAwBzV,KAAKmH,YAA7B,aAAwB,EAAWuO,WAhB3D,uBAkBI,WAAoB,OAAO1V,KAAKoC,KAAKoT,SAlBzC,yBAoBI,WAAsB,OAAOxV,KAAKoC,KAAKuT,eApB3C,oBAsBI,WAAiB,OAAO3V,KAAKoC,KAAKwT,YAtBtC,sBA0BI,WACI,GAAI5V,KAAKyH,KAAOzH,KAAK+O,MAAM8G,QAAS,OAAO,IA3BnD,oBAkCI,WAAgB,IAAD,EAAE,iBAAO7V,KAAKoC,KAAK0T,YAAjB,QAAyB,OAlC9C,mBAsCI,WAAgB,OAAO9V,KAAKoC,KAAK2T,UAtCrC,uBAwCI,WAAoB,OAAO/V,KAAKoC,KAAK4T,cAxCzC,wBA0CI,WAAqB,OAAOhW,KAAKoC,KAAK6T,gBA1C1C,oBA4CI,WAAiB,OAAOjW,KAAKoC,KAAKoE,WA5CtC,iBA+CI,WACI,OAAIxG,KAAKqV,OAAerV,KAAKqV,OACtBrV,KAAKqV,OAAS,IAAIa,EAAyBlW,QAjD1D,wDAyDI,WAAUgK,GAAV,SAAAiH,EAAA,+EACWjR,MADX,gDAzDJ,oHA6DI,sBAAAiR,EAAA,+EACW,MADX,2CA7DJ,mHAiEI,sBAAAA,EAAA,+EACW,MADX,2CAjEJ,oFAqEI,SAAiBjH,GACb,IAAMwL,EAASxV,KAAKmW,cACpB,OAAOX,EAAM,UAAM1L,IAAN,oBAAwC9J,KAAKyH,GAA7C,YAAmD+N,GAAnD,OAA4DzL,YAA2BC,IAAahK,KAAKmH,KAAL,UAAe2C,IAAf,0BAAuDrB,OAAOC,SAAS1I,KAAKmH,KAAKiP,eAAiB,EAAlG,QAA4G,OAvErO,yDA0EI,WAAWhU,GAAX,SAAA6O,EAAA,+EACWjR,MADX,gDA1EJ,iHA8EI,sBAAAiR,EAAA,+EACWjR,MADX,gDA9EJ,+GAkFI,WAAW2B,GAAX,SAAAsP,EAAA,+EACWjR,MADX,gDAlFJ,yHAsFI,WAAoBkP,GAApB,SAAA+B,EAAA,+EACW,MADX,2CAtFJ,gHA0FI,WAAWjH,GAAX,SAAAiH,EAAA,+EACW,MADX,2CA1FJ,uHA8FI,WAAkB6E,GAAlB,SAAA7E,EAAA,+EACWjR,MADX,gDA9FJ,6EAkGI,WACI,MAAM,MAAN,OAAaA,KAAKyH,GAAlB,SAnGR,KAmIayO,EAAb,kDAmCI,WAAYtF,GAAwB,IAAD,8BAC/B,cAAMA,EAAO1L,SAnCjBmR,aAkCmC,IAhC3BC,YAgC2B,IAtBnCC,aAsBmC,IApBnCC,WAoBmC,IAlB1B5F,YAkB0B,IAhBnC6F,2BAgBmC,EAG/B,EAAK7F,OAASA,EAEdA,EAAOxO,KAAKsR,MAAMpT,SAAQ,SAAAoW,GACtB,IAAM5C,EAAO,EAAK/E,MAAM2E,MAAMhM,QAAQgP,GAClC5C,GAAM,EAAKtM,MAAMrH,IAAIuW,EAAG5C,MAEhC,EAAK3J,QAAS,EATiB,EAnCvC,uCAII,WACI,GAAInK,KAAKsW,OAAQ,OAAOtW,KAAKsW,OAC7B,IAAMK,EAAa3W,KAAK4W,QAAO,SAAAF,GAAC,OAAIA,EAAE7M,SACtC,OAAK8M,EAAWtO,OACTrI,KAAKsW,OAASK,EAAWE,QAAO,SAACC,EAAMhD,GAAP,OAAkBgD,GAAQhD,EAAKiD,kBAAkBD,GAAQ,EAAIhD,EAAOgD,KAD5E,OAPvC,iBAWI,WAAc,OAAO9W,KAAK4Q,OAAO7B,QAXrC,wDAsBI,WAAUiI,GAAV,SAAA/F,EAAA,+EACWjR,KAAK4Q,QADhB,gDAtBJ,kHA0BI,WAAaoG,GAAb,SAAA/F,EAAA,+EACWjR,KAAK4Q,QADhB,gDA1BJ,+GA8BI,WAAU8C,GAAV,SAAAzC,EAAA,+EACWjR,KAAK4Q,QADhB,gDA9BJ,4DAA8C1J,M,wKC3IxC+P,EAAkD,CACpD1I,SAAUC,KAGP,SAAS0I,EAAUjQ,GACtBgQ,EAAe1I,SAAStH,G,IAWPkQ,E,kDACjB,WAAYlM,GAAqB,IAAD,8BAC5B,cAAMA,IAMVmM,WAAa,SAACnQ,GAAD,OAA4B,EAAKsG,SAAU,CACpDtG,OAAQA,KANR,EAAKhE,MAAQ,CACTgE,OAAQ,IAHgB,E,qDAWhC,WACIgQ,EAAe1I,SAAWvO,KAAKoX,a,kCAGnC,WACIH,EAAe1I,SAAWC,M,+BAG9B,WAAqB,IAAD,OACVvH,EAAgB,CAClB,cAACoQ,EAAD,CAAoBC,SAAuC,OAA7BtX,KAAKiL,MAAMsM,eAA1B,MACf,qBAAKnL,MAAO,CACRjB,MAAO,GACPC,OAAQ,EACRyC,WAAY,GACZ2J,aAAc,EACdC,gBAAiB,gBAQzB,OALAzX,KAAKiD,MAAMgE,OAAO3G,SAAQ,SAACyO,EAAO2I,GAC9BzQ,EAAO7G,KACH,cAACiX,EAAD,CAAuBtI,MAAOA,EAAOuI,SAAU,EAAKrM,MAAMsM,gBAAkBxI,GAA5D2I,OAGjBzQ,I,oBAGX,WACI,OACI,sBAAKQ,GAAG,SAAS2E,MAAO,CACpBhB,OAAQ,OACRD,MAAO,GACP4I,UAAW,SACXC,UAAW,QAJf,UAMI,qBAAK5H,MAAO,CAAEhB,OAAQ,MACrBpL,KAAK2X,2B,GAhDchM,aAsD9B0L,E,kDAMF,WAAYpM,GAAqD,IAAD,8BAC5D,cAAMA,IACDhI,MAAQ,CACTgK,OAAO,GAHiD,E,0CAOhE,WAAU,IAAD,EACL,OAAOjN,KAAKiL,MAAM8D,MACd,qBACA+F,KAAM9U,KAAKiL,MAAMqM,UAAYtX,KAAKiD,MAAMgK,SAAnC,UAA6CjN,KAAKiL,MAAM8D,MAAMpC,YAA9D,aAA6C,EAAuBiL,WAAW,OAA/E,2CAA2H5X,KAAKiL,MAAM8D,MAAMtH,GAA5I,YAAkJzH,KAAKiL,MAAM8D,MAAMpC,KAAnK,2DAA4N3M,KAAKiL,MAAM8D,MAAMtH,GAA7O,YAAmPzH,KAAKiL,MAAM8D,MAAMpC,KAApQ,iBACLoI,IAAK/U,KAAKiL,MAAM8D,MAAMjE,KACtBsB,MAAO,CACHjB,MAAO,OACPC,OAAQ,OACR4J,aAAchV,KAAKiD,MAAMgK,MAAQ,GAAK,GACtCpD,MAAO,eAIX,qBAAKuC,MAAO,CACRjB,MAAO,OACPC,OAAQ,OACR4J,aAAchV,KAAKiL,MAAMqM,UAAYtX,KAAKiD,MAAMgK,MAAQ,GAAK,GAC7DwK,gBAAiBzX,KAAKiL,MAAMqM,UAAYtX,KAAKiD,MAAMgK,MAAQ,UAAY,YACvEpD,MAAO,WALX,SAQI,qBAAKuC,MAAO,CACRG,WAAY,GACZF,YAAa,IAFjB,SAII,qBAAK,cAAY,QAAQlB,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAxD,SAAoE,sBAAMC,KAAK,eAAe/I,EAAE,srC,oBAMhH,WAAU,IAAD,OACL,OACI,sBAAK6J,MAAO,CACJjB,MAAO,GACPC,OAAQ,GACRoM,aAAc,EACd/K,SAAU,UAJlB,UAMQ,qBAAKL,MAAO,CACRjB,MAAO,EACP2C,YAAa,EACb1C,OAAQpL,KAAKiL,MAAMqM,SAAW,GAAKtX,KAAKiD,MAAMgK,MAAQ,GAAK,EAC3Dc,UAAW/N,KAAKiL,MAAMqM,SAAW,EAAItX,KAAKiD,MAAMgK,MAAQ,GAAK,EAC7D4K,qBAAsB,EACtBC,wBAAyB,EACzBL,gBAAiB,UACjB7C,MAAO,UAGX,qBACAxI,MAAO,CACHjB,MAAO,GACPC,OAAQ,GACRyC,WAAY,GACZpB,SAAU,SACVsL,OAAQ,WAEZzK,aAAc,kBAAM,EAAKC,SAAS,CAAEN,OAAO,KAC3CO,aAAc,kBAAM,EAAKD,SAAS,CAAEN,OAAO,KAC3C+K,YAAa,WAAO,IAAD,EACfC,YAAW,UAAC,EAAKhN,MAAM8D,aAAZ,QAAqB,OAXpC,SAcK/O,KAAKkY,kB,GA7ENvM,c,qOCjEHwM,E,4JACjB,WAAU,IAAD,qBACCC,EAAQpY,KAAKiL,MAAMmN,MACpBA,EAAMlE,OAAUkE,EAAM3E,QACvB2E,EAAMlE,MAAQkE,EAAMC,UACpBD,EAAMC,eAAYnY,GAGtB,IAAMiQ,EAASiI,EAAMjI,OACjB,sBAAK/D,MAAO,CACR2B,UAAW,EACX5C,MAAO,IACPC,OAAQ,IAHZ,UAKI,qBAAK2J,IAAKqD,EAAMjI,OAAOrF,KAAMgK,IAAKsD,EAAMjI,OAAOmI,SAAUlM,MAAO,CAC5DjB,MAAO,GACPC,OAAQ,GACR0C,YAAa,EACbkH,aAAc,OACdJ,MAAO,UAEX,sBAAMxI,MAAO,CACTwH,SAAU,GACVC,WAAY,IACZ9F,UAAW,EACXlE,MAAO,WAJX,SAKI0O,EAAqBH,EAAMjI,OAAOrF,KAAM9K,KAAKiL,MAAMuN,iBAE3D,KAEE/E,EAAQ2E,EAAM3E,MAChB,qBAAKrH,MAAO,CACR2B,UAAW,EACX6F,SAAU,GACVC,WAAY,IACZhK,MAAO,WAJX,SAMKuO,EAAM5F,IAAM,mBAAGiG,KAAML,EAAM5F,IAAKkG,OAAO,SAA3B,SAAqCH,EAAqBH,EAAM3E,MAAOzT,KAAKiL,MAAMuN,cAC5FD,EAAqBH,EAAM3E,MAAOzT,KAAKiL,MAAMuN,cAEpD,KAEEG,EAAcP,EAAMO,YACtB,qBAAKvM,MAAO,CACR2B,UAAW,EACX6F,SAAU,GACVC,WAAY,KAHhB,SAKK0E,EAAqBH,EAAMO,YAAa3Y,KAAKiL,MAAMuN,cAExD,KAEAI,EAAe,UAAGR,EAAMQ,cAAT,aAAG,EAAcC,KAAI,SAACC,EAAOpB,GAC5C,OACI,sBAAKtL,MAAO,CACR2M,gBAAiB,EACjBC,cAAe,GACfpF,SAAU,WACVqF,WAAY,WACZC,SAAU,GALd,UAOI,sBAAM9M,MAAO,CACT6I,QAAS,QACTuC,aAAc,EACdpM,OAAQ,GACRyI,WAAY,IACZhK,MAAO,WALX,SAMI0O,EAAqBO,EAAMhO,KAAM,EAAKG,MAAMuN,cAC/CD,EAAqBO,EAAM7M,MAAO,EAAKhB,MAAMuN,kBAI1DI,EAAUA,GAAiBA,EAAqBvQ,OAAS,EACrD,qBAAK+D,MAAO,CACR6I,QAAS,OACT8D,gBAAiB,EACjBC,cAAe,EACfG,QAAS,EACTpL,UAAW,GALf,SAOK6K,IARU,KAYnB,IAAMQ,EAAShB,EAAMgB,OACjB,sBAAKhN,MAAO,CACR2B,UAAW,GADf,UAGI,qBAAK+G,IAAKsD,EAAMgB,OAAOd,SAAUvD,IAAI,IAAI3I,MAAO,CAC5CjB,MAAO,GACPC,OAAQ,GACR0C,YAAa,EACbkH,aAAc,OACdJ,MAAO,OACP7G,UAAW,KAEf,sBAAM3B,MAAO,CACTwH,SAAU,GACVC,WAAY,KAFhB,SAGI0E,EAAqBH,EAAMgB,OAAOC,KAAMrZ,KAAKiL,MAAMuN,iBAE3D,KAEEc,EAAiBlB,EAAMxU,WAA0B1D,EAAlBkY,EAAMC,UACrCA,EAAYiB,EACd,qBAAKxE,IAAKwE,EAAc9G,IAAKuC,IAAI,IAAI3I,MAAO,CACxCyB,WAAY,GACZE,UAAW,EACX5C,MAAK,UAAEmO,EAAcnO,aAAhB,QAAyB,GAC9BC,OAAM,UAAEkO,EAAclO,cAAhB,QAA0B,GAChCmO,SAAU,GACVC,UAAW,GACXxE,aAAc,EACdyE,QAAS,MACTC,WAAY,SAEhB,KAEExF,EAAQkE,EAAMlE,MAChB,qBAAKY,IAAKsD,EAAMlE,MAAM1B,IAAKuC,IAAI,IAAI3I,MAAO,CACtCmN,SAAU,IACVC,UAAW,IACXxE,aAAc,EACdjH,UAAW,GACXyJ,aAAc,KAElB,KAEE5T,EAAQwU,EAAMxU,MACD,SAAfwU,EAAM1L,KACJ,uBAAOiN,UAAQ,EAACC,MAAI,EAACC,OAAK,EAAC/E,IAAKsD,EAAMxU,MAAM4O,IAAKpG,MAAO,CACtDjB,MAAO,IACPC,OAAQ,IACR4J,aAAc,GACf7J,MAAOiN,EAAMxU,MAAMuH,MAAOC,OAAQgN,EAAMxU,MAAMwH,OAAQ0O,OAAM,UAAE1B,EAAMC,iBAAR,aAAE,EAAiB7F,OAChF,UAAA4F,EAAM2B,gBAAN,eAAgBjP,MACZ,wBAAQgK,IAAKsD,EAAMxU,MAAM4O,IAAKpG,MAAO,CACnCjB,MAAO,IACPC,OAAQ,IACR4J,aAAc,EACdjH,UAAW,EACXyJ,aAAc,GACfrM,MAAOiN,EAAMxU,MAAMuH,MAAOC,OAAQgN,EAAMxU,MAAMwH,OAAQ4O,iBAAe,EAACC,UAAU,KANjF,SAOE,qBAAKnF,IAAG,UAAEsD,EAAMC,iBAAR,aAAE,EAAiB7F,IAAKuC,IAAI,QAEtC,KACN,KAGJ,MAAmB,SAAfqD,EAAM1L,KAEF,qBAAKN,MAAO,CACR2B,UAAW,EACXyJ,aAAc,GAFlB,SAGI5T,IAIO,UAAfwU,EAAM1L,MAAqByD,GAAWsD,GAAUkF,GAAgBC,GAAWQ,GAAWxV,IAASsQ,EAU/F,sBAAK7G,UAAU,QAAQjB,MAAO,CAC1B8N,YAAa9B,EAAMvO,MAAQD,YAAcwO,EAAMvO,YAAS3J,EAExD+U,QAASmD,EAAMC,UAAY,YAASnY,EACpC6N,UAAW,EACXyJ,aAAc,EACd+B,SAAUnB,EAAMlE,MAAQ,SAAMhU,GANlC,oBAQKkY,EAAMxU,aARX,aAQK,EAAa4O,IACbrC,EACAsD,EACAkF,EACAC,EACAQ,EACAf,EACAnE,EACAtQ,KAxBD,qBAAKwI,MAAO,CACR2B,UAAW,EACXyJ,aAAc,GAFlB,SAGItD,Q,GAnKevI,a,kBCH7BwO,EAAmB,YAAG,seAAH,uFACnBC,EAAa,YAAG,4RAAH,4BA4CnB,SAASC,EAAchB,EAAclI,GAKjC,IAJA,IAAM7G,EAAS,GACXgQ,EAAmB,EACjBC,EAAUlB,EAAKmB,SAASJ,KAEjB,CACT,IAAMK,EAAOF,EAAQE,OACrB,GAAIA,EAAKC,KAAM,MACf,IAAMC,EAAQF,EAAKxO,MAEboH,EAAIsH,EAAMjD,MAChB,QAAUxX,IAANmT,EAAJ,CAEIiH,EAAmBjH,GACnB/I,EAAOlK,KAAP,MAAAkK,EAAM,YAASsQ,EAAkBvB,EAAK5P,UAAU6Q,EAAkBjH,GAAIlC,KAG1E,IAAI9I,EAAS,EAEPwS,EAASF,EAAME,OACrB,GAAIA,EACA,GAAIA,EAAOC,EAAG,CACV,IAAMC,EAAIF,EAAOC,EAAEzS,OACnBiC,EAAOlK,KAAK,4BAAIia,EAAchB,EAAK5P,UAAU4J,EAAI,EAAGA,EAAI0H,EAAI,GAAI5J,MAChE9I,EAAS0S,OACN,GAAIF,EAAOxH,EAAG,CACjB,IAAM0H,EAAIF,EAAOxH,EAAEhL,OACnBiC,EAAOlK,KAAK,4BAAIia,EAAchB,EAAK5P,UAAU4J,EAAI,EAAGA,EAAI0H,EAAI,GAAI5J,MAChE9I,EAAS0S,OACN,GAAIF,EAAOG,EAAG,CACjB,IAAMD,EAAIF,EAAOG,EAAE3S,OACnBiC,EAAOlK,KAAK,4BAAIia,EAAchB,EAAK5P,UAAU4J,EAAI,EAAGA,EAAI0H,EAAI,GAAI5J,MAChE9I,EAAS0S,OACN,GAAIF,EAAOnV,EAAG,CACjB,IAAMqV,EAAIF,EAAOnV,EAAE2C,OACnBiC,EAAOlK,KAAK,4BAAIia,EAAchB,EAAK5P,UAAU4J,EAAI,EAAGA,EAAI0H,EAAI,GAAI5J,MAChE9I,EAAS0S,OACN,GAAIF,EAAOI,EAAG,CACjB,IAAMF,EAAIF,EAAOI,EAAE5S,OACnBiC,EAAOlK,KAAK,+BAAOia,EAAchB,EAAK5P,UAAU4J,EAAI,EAAGA,EAAI0H,EAAI,GAAI5J,MACnE9I,EAAS0S,OACN,GAAIF,EAAOK,GAAI,CAAC,IAAD,EACZH,EAAIF,EAAOK,GAAG7S,OAChBzG,EAAOyX,EAAK5P,UAAU4J,EAAI,EAAGA,EAAI0H,EAAI,GAErCI,EADcvZ,EAAKwZ,MAAM,MACR,GACjBD,GAAoC,IAA5BA,EAAKC,MAAM,MAAM/S,OACzBzG,EAAOA,EAAK6H,UAAU0R,EAAK9S,OAAS,GAEpC8S,EAAO,OAEX7Q,EAAOlK,KACH,sBAAMiN,UAAU,aAAhB,SACA,cAAC,IAAD,CAAmBgO,SAAQ,UAAEF,SAAF,QAAU,OAAQ/O,MAAOkP,IAApD,SACK1Z,OAITyG,EAAS0S,OACN,GAAIF,EAAOU,EAAG,CACjB,IAAMR,EAAIF,EAAOU,EAAElT,OACnBiC,EAAOlK,KACH,sBAAKgM,MAAO,CACR6I,QAAS,OACTuG,cAAe,OAFnB,UAII,qBAAKpP,MAAO,CAACjB,MAAO,EAAGC,OAAQ,GAAIqM,gBAAiB,UAAWzC,aAAc,KAC7E,qCAAaqF,EAAchB,EAAK5P,UAAU4J,EAAI,EAAGA,EAAI0H,GAAI5J,SAGjE9I,EAASwS,EAAOU,EAAEE,SAAS,MAAQV,EAAI,EAAIA,EAInDT,EAAmBjH,EAAIhL,GAG3B,GAAIiS,EAAmBjB,EAAKhR,OAAQ,CAChC,IAAMqT,EAAMrC,EAAK5P,UAAU6Q,GACvBoB,EAAIrT,OAAS,GACbiC,EAAOlK,KAAP,MAAAkK,EAAM,YAASsQ,EAAkBc,EAAKvK,KAI9C,OAAO7G,EAGX,SAASsQ,EAAkBvB,EAAclI,GAKrC,IAJA,IAAM7G,EAAS,GACXgQ,EAAmB,EACjBC,EAAUlB,EAAKmB,SAASL,KAEjB,CACT,IAAMM,EAAOF,EAAQE,OACrB,GAAIA,EAAKC,KAAM,MACf,IAAMC,EAAQF,EAAKxO,MAGboH,EAAIsH,EAAMjD,MAChB,QAAUxX,IAANmT,EAAJ,CAEIiH,EAAmBjH,GACnB/I,EAAOlK,KAAKiZ,EAAK5P,UAAU6Q,EAAkBjH,IAEjD,IAAIhL,EAAS,EAEPwS,EAASF,EAAME,OACrB,GAAIA,EACA,GAAIA,EAAOc,GACPrR,EAAOlK,KAAK,wBACZiI,EAAS,OACN,GAAIwS,EAAO5J,EAAG,CACjB,IAAM8J,EAAIF,EAAO5J,EAAE5I,OACboQ,EAAOY,EAAK5P,UAAU4J,EAAGA,EAAI0H,GACnCzQ,EAAOlK,KAAK,mBAAGqY,KAAMA,EAAMC,OAAO,SAAtB,SAAgCD,KAC5CpQ,EAAS0S,OACN,GAAIF,EAAOe,KAAM,CACpB,IAAMb,EAAIF,EAAOe,KAAKvT,OAChBgI,EAAagJ,EAAK5P,UAAU4J,EAAI,EAAGA,EAAI0H,EAAI,GAAGK,MAAM,MACtD3C,EAAOpI,EAAW,GACN,MAAZoI,EAAK,KAAYA,EAAOA,EAAKoD,MAAM,GAAI,IAC3CvR,EAAOlK,KAAK,mBAAGqY,KAAMA,EAAMC,OAAO,SAAtB,SAAgCrI,EAAW,MACvDhI,EAAS0S,OACN,GAAIF,EAAO3J,MAAO,CACrB,IAAMzJ,EAAK4R,EAAKyC,YAAYzI,GAC5B,QAAWnT,IAAPuH,EAAkB,SACtB6C,EAAOlK,KAAK,cAAC,EAAD,CAAOqH,GAAIA,EAAG+B,SAAS,OACnCnB,EAASwS,EAAO3J,MAAM7I,YACnB,GAAIwS,EAAOkB,WAAY,CAC1B,IAAMC,EAAQC,EAAWpB,EAAOkB,WAAWF,MAAM,GAAI,IACjDG,IACA1R,EAAOlK,KAAK,cAAC,EAAD,CAAOqH,GAAIuU,KACvB3T,EAASwS,EAAOkB,WAAW1T,aAE5B,GAAIwS,EAAOqB,aAAc,CAC5B,IAAMhL,EAAQ2J,EAAOqB,aACfC,EAAwB,MAAbjL,EAAM,GACvB5G,EAAOlK,KAAK,cAAC,EAAD,CAAOoS,IAAG,4CAAuC2J,EAAW,KAAO,IAAzD,OAA8DjL,EAAMkK,MAAM,KAAK,GAAGS,MAAM,GAAI,GAA5F,YAAkGM,EAAW,MAAQ,UAC3I9T,EAASwS,EAAOqB,aAAa7T,YAC1B,GAAIwS,EAAOuB,SAAU,CACxB,IAAMC,EAAUxB,EAAOuB,SACnBjL,EAAQ/O,KAAKka,mBACbhS,EAAOlK,KAAK,cAAC,EAAD,CAASmc,OAAO,IAAIlD,KAAK,cACrChR,EAASgU,EAAQhU,aAElB,GAAIwS,EAAOwB,SAAU,WACxB,IAAMA,EAAUxB,EAAOwB,QACjB3P,EAAsB,MAAf2P,EAAQ,GAAa,OAAwB,MAAfA,EAAQ,GAAa,OAAS,OACnE5U,EAAK4U,EAAQR,MAAe,SAATnP,EAAkB,EAAI,GAAI,GACnDtL,QAAQC,IAAI8P,GACZ,IAEY,IAFNuH,EAAuB,SAAThM,EAAkByE,EAAQpC,MAAO2E,MAAMhM,QAAQD,GAAM0J,EAAQJ,SAASyL,MAAK,SAAAvJ,GAAC,OAAIA,EAAExL,KAAOA,KAEzGiR,IACApO,EAAOlK,KAAK,cAAC,EAAD,CAASmc,OAAO,IAAIlD,KACnB,SAAT3M,EAAA,OACEgM,QADF,IACEA,OADF,EACEA,EAAQ5N,KADV,UAEY,SAAT4B,EAAA,UAAkBgM,EAAO9H,cAAzB,aAAkB,EAAekF,UAAO5V,SAF3C,QAEyDwY,EAAOhD,SAClE7L,MAAgB,SAAT6C,GAAmBgM,GAAUA,EAAO7O,MAAQD,YAAc8O,EAAO7O,YAAS3J,KACnFmI,EAASgU,EAAQhU,QAbG,QAerB,GAAIwS,EAAO3L,QAAS,CAAC,IAAD,MACjBzH,EAAKoT,EAAO3L,QAAQ2M,MAAM,GAAI,GAC9BxC,EAAI,oBAAGlI,EAAQpC,aAAX,iBAAG,EAAe0N,SAAS/U,QAAQD,UAAnC,aAAG,EAAqCqD,YAAxC,QAAgD,OAC1DR,EAAOlK,KAAK,cAAC,EAAD,CAASmc,OAAQ,qBAAKpR,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,SAAgD,sBAAMC,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,y9BACjJ8W,KAAMA,KACNhR,EAASwS,EAAO3L,QAAQ7G,OAIhCiS,EAAmBjH,EAAIhL,GAG3B,GAAIiS,EAAmBjB,EAAKhR,OAAQ,CAChC,IAAMqT,EAAMrC,EAAK5P,UAAU6Q,GACvBoB,EAAIrT,OAAS,GACbiC,EAAOlK,KAAKsb,GAIpB,OAAOpR,EAKX,IAAMoS,EAAQ,SAAC,GAAD,IAAElK,EAAF,EAAEA,IAAK/K,EAAP,EAAOA,GAAP,OACV,qBAAKqN,IAAG,OAAEtC,QAAF,IAAEA,IAAF,+CAAiD/K,EAAjD,QAA2DsN,IAAI,IAAI3I,MAAO,CAC9EjB,MAAO,QACPC,OAAQ,QACRoM,cAAe,EACf3J,WAAY,EACZC,YAAa,EACbiK,OAAQ,WACTtE,MAAK,OAAEjB,QAAF,IAAEA,IAAO/K,KAIfkV,EAAU,SAAC,GAAwE,IAAvEJ,EAAsE,EAAtEA,OAAQlD,EAA8D,EAA9DA,KAAMxP,EAAwD,EAAxDA,MAC5B,EAA0B+S,oBAAS,GAAnC,mBAAO3P,EAAP,KAAc4P,EAAd,KACA,OACI,uBACAzQ,MAAO,CACHC,YAAa,EACbC,aAAc,EACdmL,gBAAiBxK,EAAQ,UAAY,0BACrC+H,aAAc,EACdnL,MAAOA,EACPkO,OAAQ,WAEZzK,aAAc,kBAAMuP,GAAS,IAC7BrP,aAAc,kBAAMqP,GAAS,IAV7B,UAYKN,EACAtP,EAAQ,4BAAG,4BAAIoM,MAAgB,4BAAIA,QAKjCyD,EAlQY,SAAC,GAA0C,IAAD,EAAxC3L,EAAwC,EAAxCA,QACnBkI,EAAI,UAAGlI,EAAQb,eAAX,aAAG,EAAiByM,OAExBC,EAAa3D,EAAOgB,EAAchB,EAAMlI,GAAW,KACnD8L,EAAc9L,EAAQV,OAAOoI,KAAI,SAACT,EAAOV,GAAR,OAAkB,cAAC,EAAD,CAAmBU,MAAOA,EAAOI,WAAYrH,GAAjCuG,MAC/DxH,EAAqB,GAwB3B,OAvBAiB,EAAQjB,YAAY5P,SAAQ,SAAC4c,EAAKxF,GAAW,IAAD,GAExC,UAAIwF,EAAIC,oBAAR,aAAI,EAAkBvF,WAAW,YACjC1H,EAAY9P,KACR,mBAAegM,MAAO,CAClB2B,UAAW,EACXyJ,aAAc,EACdvC,QAAS,SACVwD,KAAMyE,EAAI1K,IAAKkG,OAAO,SAJzB,SAKI,qBAAK5D,IAAKoI,EAAI1K,IAAKuC,IAAKmI,EAAIE,SAAUhR,MAAO,CACzCmN,SAAU,IACVC,UAAW,IACXxE,aAAc,MARd0C,OAeK,IAAjBvG,EAAQzE,MACRtL,QAAQC,IAAI8P,GAIZ,sBAAK9D,UAAU,oBAAoBjB,MAAO,CACtCoL,aAAc,GADlB,UAIKwF,EACAC,EACA/M,EAAY7H,OAAS,EAAI6H,EAAc,SAgO9C+L,EAAkB,CACpB,KAAM,QACNoB,OAAQ,SCnPNC,EAAkB,SAAC,GAA0C,IAAzCnM,EAAwC,EAAxCA,QACtB,EAA0ByL,oBAAS,GAAnC,mBAAO3P,EAAP,KAAc4P,EAAd,KACA,OACI,qBACAzQ,MAAO,CACHC,YAAa,GACbC,aAAc,GACdC,WAAY,EACZC,cAAe,EACfiL,gBAAiBxK,EAAQ,iBAAc/M,GAE3CoN,aAAc,kBAAMuP,GAAS,IAC7BrP,aAAc,kBAAMqP,GAAS,IAT7B,SAWI,cAAC,EAAD,CAAoB1L,QAASA,OAKnCoM,EAAwB,SAAC,GAA0C,IAAD,cAAxCpM,EAAwC,EAAxCA,QAEtBqE,EAAM,oBAAGrE,EAAQP,cAAX,aAAG,EAAgBuF,qBAAnB,QAAoChF,EAAQhB,OAAOqF,OACzDgI,EAAchI,EAAM,6CAAyCrE,EAAQhB,OAAO1I,GAAxD,YAA8D+N,EAA9D,qEAAmI/M,OAAOC,SAASyI,EAAQhB,OAAOiG,eAAiB,EAAnL,QAEpBqH,EAAU,oBAAGtM,EAAQP,cAAX,aAAG,EAAgB6E,gBAAnB,QAA+BtE,EAAQhB,OAAOuF,SACxDgI,GAAqC,IAAvBvM,EAAQhB,OAAOwN,IAC7BC,EAAW,UAAGzM,EAAQhB,OAAO0N,oBAAlB,QAAkC,EAEnD,EAA0BjB,oBAAS,GAAnC,mBAAO3P,EAAP,KAAc4P,EAAd,KACA,OACI,sBAAKzQ,MAAO,CACRC,YAAa,GACbC,aAAc,GACdC,WAAY,EACZC,cAAe,EACfuB,UAAW,GACX0J,gBAAiBxK,EAAQ,iBAAc/M,GACxCoN,aAAc,kBAAMuP,GAAS,IAAOrP,aAAc,kBAAMqP,GAAS,IAPpE,UAQI,qBAAKxP,UAAU,SAASjB,MAAO,CAC3BjB,MAAO,GACPC,OAAQ,GACR2C,UAAW,EACXF,YAAa,IACdiH,IAAK0I,EAAazI,IAAI,WACzB,qBAAI3I,MAAO,CACPjB,MAAO,OACPC,OAAQ,GACRwI,SAAU,GACV7F,UAAW,EACXyJ,aAAc,GALlB,UAOI,sBAAMpL,MAAO,CACTjB,MAAO,OACPC,OAAQ,OACR0C,YAAa,EACbjE,MAAK,WAAG,UAAAsH,EAAQP,cAAR,eAAgB+D,cAAhB,WAAmCxD,EAAQP,OAAO+D,aAAanL,SAAS,UAAQtJ,SAAnF,QAAiG,WAJ1G,SAKIud,IACHC,EAAc,uBAAMtR,MAAO,CACxB4I,aAAc,EACdyC,gBAAiB,UACjB7D,SAAU,GACVC,WAAY,IACZiK,QAAS,WALE,UAOI,MAAdF,EACC,qBAAKxR,MAAO,CAAEoL,cAAe,EAAG3J,YAAa,GAAK,aAAW,eAAe1C,MAAM,KAAKC,OAAO,KAAKC,QAAQ,cAA3G,SAAyH,sBAAM9I,EAAE,kDAAkD+I,KAAK,mBACxL,KATS,SAWL,KACV,sBAAMc,MAAO,CACTjB,MAAO,OACPC,OAAQ,OACRyC,WAAY,EACZhE,MAAO,UACP+J,SAAU,QALd,SAMIhL,YAAsB,IAAIlG,KAAKyO,EAAQ4M,iBAE/C,cAAC,EAAD,CAAoB5M,QAASA,QAgB1B6M,EAvHK,SAAC,GAA2E,IAAD,QAAzE7M,EAAyE,EAAzEA,QAAS8M,EAAgE,EAAhEA,WAC3B,OAAQ9M,EAAQzE,MAChB,KAAK,EAAG,OACJ,sBAAKW,UAAU,OAAOjB,MAAO,CACzBjB,MAAO,IACPkB,YAAa,GACbC,aAAc,GACdC,WAAY,EACZC,cAAe,EACfuB,UAAW,IANf,yCAOYoD,EAAQP,cAPpB,aAOY,EAAgB6E,gBAP5B,QAOwCtE,EAAQhB,OAAOuF,YAE3D,KAAK,EAAG,OACJ,sBAAKrI,UAAU,OAAOjB,MAAO,CACzBjB,MAAO,IACPkB,YAAa,GACbC,aAAc,GACdC,WAAY,EACZC,cAAe,EACfuB,UAAW,IANf,8BAOIoD,EAAQP,cAPZ,aAOI,EAAgB6E,gBAPpB,QAOgCtE,EAAQhB,OAAOuF,SAP/C,8BAUJ,OAAOuI,EAAa,cAAC,EAAD,CAAwB9M,QAASA,IAAa,cAAC,EAAD,CAAkBA,QAASA,K,gBCJ5E+M,E,kDACjB,WAAYjT,GAAqB,IAAD,gCAC5B,cAAMA,IAOVkT,wBARgC,IAShCC,yBATgC,EAE5B,EAAKnb,MAAQ,CACTob,MAAM,EACNC,OAAM,UAAErT,EAAMqT,cAAR,UAJkB,E,0CAWhC,WAAU,IAAD,OACL,OACI,cAAC,IAAD,CACAlS,MAAK,qCACD2L,OAAQ,WACL/X,KAAKiL,MAAMmB,OACXpM,KAAKme,oBACLne,KAAKoe,qBAEZ9Q,aAAc,WAAO,IAAD,IAChB,EAAK6Q,mBAAqB,EAAKlT,MAAMsT,WACrC,EAAKhR,SAAS,CAAE8Q,MAAM,IACtB,eAAKpT,OAAMuT,eAAX,iBAAqB,EAAM,IAE/BhR,aAAc,WAAO,IAAD,IAChB,EAAK2Q,wBAAqBje,EAC1B,EAAKqN,SAAS,CAAE8Q,MAAM,IACtB,eAAKpT,OAAMuT,eAAX,iBAAqB,EAAO,IAEhCxG,YAAa,WACT,IAAMsG,GAAS,EAAKrT,MAAMwT,SAAU,EAAKxb,MAAMqb,OAC/C,EAAKF,oBAAsBE,EAAS,EAAKrT,MAAMyT,iBAAcxe,EAC7D,EAAKqN,SAAS,CAAE+Q,OAAQA,KAE5BK,UAAW,WACF,EAAK1T,MAAMwT,SACZ,EAAKL,yBAAsBle,EAC3B,EAAKqN,SAAS,CAAE+Q,QAAQ,MAGhC/S,QAAS,SAACqT,GAAO,IAAD,IACZ,eAAK3T,OAAMM,eAAX,gBAAqBqT,EAAG,IA7B5B,SAgCK5e,KAAKiL,MAAM4T,e,GA9CQlT,aCVfmT,G,yDAIjB,WAAY7T,GAAwB,IAAD,8BAC/B,cAAMA,IAHF8T,aAE2B,EAG/B,EAAKA,QAAU9T,EAAMiE,QAAQzH,GAE7B,EAAKxE,MAAQ,CACT+b,UAAM9e,GANqB,E,6CAUnC,WAAa,IAAD,OACR6G,IAAciF,QAAQ,MAAO,CAAC,WAAYhM,KAAKiL,MAAMiE,QAAQzH,GAAI,sBAAkBvH,OAAWA,EAAW,CAAC,oBAAoB+F,MAAK,SAAAgG,GAAK,OACpIA,EAAMpE,UACR5B,MAAK,SAAA+Y,GACCA,EAAKC,KACL,EAAK1R,SAAS,CAAEyR,KAAMA,S,+BAIlC,WACIhf,KAAKkf,c,gCAGT,WACQlf,KAAKiL,MAAMiE,QAAQzH,KAAOzH,KAAK+e,UAC/B/e,KAAK+e,QAAU/e,KAAKiL,MAAMiE,QAAQzH,GAClCzH,KAAKkf,e,oBAIb,WACI,IAAKlf,KAAKiD,MAAM+b,KAAM,OAClB,6BAEJ,IAAMA,EAAOhf,KAAKiD,MAAM+b,KAClBvX,EAAKuX,EAAKC,IAAIxX,GAEd0X,EAAWH,EAAKI,eAEtB,OACI,sBAAKhT,MAAO,CAERE,aAAc,GACdyH,UAAW,SACXC,UAAW,OACXC,SAAU,QACVoL,KAAM,IACNC,MAAO,EACPC,IAAK,GACLC,OAAQ,GATZ,UAWI,sBAAKpT,MAAO,CACRmN,SAAU,IACVkG,OAAQ,OACRrU,OAAQ,KAHZ,UAKI,qBAAKgB,MAAO,CACRhB,OAAQ,OACRD,MAAO,OACPuU,gBAAgB,8CAAD,OAAgDjY,EAAhD,kBAA4DuX,EAAKW,kBAAkBlY,GAAnF,oBACfmY,WAAY,8DACZC,QAAS,GACTrI,cAAe,OAEnB,qBAAK1C,IAAG,gDAA2CrN,EAA3C,kBAAuDuX,EAAKc,uBAAuBrY,GAAnF,kBAAuGsN,IAAI,IAAI3I,MAAO,CAC1H6I,QAAS,QACTwK,OAAQ,OACRlT,WAAY,GACZwT,aAAc,GACdH,WAAY,SACZC,QAAS,eAGjB,sBAAKzT,MAAO,CACTmN,SAAU,IACVkG,OAAQ,QAFX,UAII,qBAAKrT,MAAO,CACRjB,MAAO,QADX,SAGI,uBAAO2J,IAAG,gDAA2CrN,EAA3C,kBAAuD0X,EAAS,GAAGa,SAAnE,QAAmF5T,MAAO,CAChGjB,MAAO,OACP6J,aAAc,GACf2E,UAAQ,EAACC,MAAI,EAACC,OAAK,EAACoG,UAAQ,MAEnC,qBAAK7T,MAAO,CACRhB,OAAQ,GACRD,MAAO,OACPsU,OAAQ,0BACRpT,YAAa,GACbC,aAAc,SAItB,qBAAKF,MAAO,CACRmN,SAAU,IACVkG,OAAQ,OACRrU,OAAQ,QAHZ,SAKI,sBAAKgB,MAAO,CACR6I,QAAS,OACTuG,cAAe,OAFnB,UAII,sBAAKpP,MAAO,CACRjB,MAAO,OADX,UAGI,qBAAIiB,MAAO,CACP2B,UAAW,EACXyJ,aAAc,EACd5D,SAAU,GACVC,WAAY,IACZhK,MAAO,UACPoL,QAAS,SANb,mBAOU+J,EAAKC,IAAInU,QACnB,qBAAKsB,MAAO,CACRoL,aAAc,GACd0I,aAAc,yBAElB,gCACI,qBAAK9T,MAAO,CACRvC,MAAO,WADX,SAGKmV,EAAKmB,UAEV,qBAAK/T,MAAO,CACRvC,MAAO,UACP+J,SAAU,GACV7F,UAAW,IACZV,UAAU,YAJb,SAKK2R,EAAKrG,iBAGd,cAAC,EAAD,CAAQvM,MAAO,CACX6I,QAAS,QACT6I,QAAS,WACT/P,UAAW,GACX3C,OAAQ,GACRgV,OAAQ,OACRpL,aAAc,EACdyC,gBAAiB,YACjB5N,MAAO,YACP+J,SAAU,GACVC,WAAY,KAVhB,0BAaJ,qBAAKzH,MAAO,CACRjB,MAAO,MACP0C,WAAY,IAFhB,SAII,sBAAKzB,MAAO,CACRoL,aAAc,IADlB,UAGI,qBAAKpL,MAAO,CACR0R,QAAS,GACTrG,gBAAiB,UACjB4I,oBAAqB,EACrBxI,qBAAsB,KAI1B,qBAAKzL,MAAO,CACR0R,QAAS,GACTrG,gBAAiB,WAFrB,SAII,qBAAKrL,MAAO,CACRhB,OAAQ,GACRoM,aAAc,GAFlB,SAII,+CAGR,qBAAKpL,MAAO,CACR0R,QAAS,GACTrG,gBAAiB,UACjB6I,uBAAwB,EACxBxI,wBAAyB,EACzByI,UAAW,0C,GApLR5U,c,iBCCjC6U,EAAkD,CACpDjS,SAAUC,KAGP,SAASiS,EAAYtP,GACxBqP,EAAejS,SAAS4C,G,IAQPnC,E,kDAGjB,WAAY/D,GAAuB,IAAD,8BAC9B,cAAMA,IACDhI,MAAQ,CACTyd,MAAO,IAHmB,E,0CAOlC,WAAU,IAAD,SAEL,OACI,sBAAMjZ,GAAG,YAAT,SACkC,KAA7B,UAAAzH,KAAKiL,MAAMiE,eAAX,eAAoBxC,MAAa,cAAC,EAAD,CAAWwC,QAASlP,KAAKiL,MAAMiE,UAAkC,qCACnG,cAAC,EAAD,CAAOwR,MAAO,CAAC1gB,KAAKiD,MAAMyd,MAAO,SAACvgB,GAAD,OAAS,EAAKoN,SAAS,CAACmT,MAAOvgB,MAAQ+O,QAASlP,KAAKiL,MAAMiE,UAC5F,cAAC,EAAD,CAAMD,QAASjP,KAAKiL,MAAMgE,QAASC,QAASlP,KAAKiL,MAAMiE,mB,GAhBjCvD,aA2BhCgV,E,kDAgBF,WAAY1V,GAAmB,IAAD,gCAC1B,cAAMA,IAdF2V,eAAiB,EAAK3V,MAAMiE,QAaN,EAXtB2R,UAWsB,UAXV,EAAK5V,MAAMiE,eAWD,aAXV,EAAoBzH,GAWV,EAVtBqZ,SAA6B,GAUP,EARtBC,aAAc,EAQQ,EAPtBC,WAAa,CACjB5V,OAAQ,EACRmU,IAAK,GAKqB,EAF9B0B,gBAE8B,IA2FtBC,SAA2C,SAAArhB,GAC/C,IAAM6Y,EAAS7Y,EAAM6Y,OACjByI,EAAQzI,EAAO0I,WAAa,GAAK1I,EAAO2I,aAAe3I,EAAO4I,aAAe,EAC7E,EAAKN,WAAW5V,OAASsN,EAAO4I,eAChC5I,EAAO0I,UAAY,EAAKJ,WAAWzB,IACnC,EAAKwB,aAAc,EACnBI,GAAQ,GAERA,IACK,EAAKJ,cACN,EAAKA,aAAc,EACnB3f,QAAQC,IAAI,wBACZ,EAAKkgB,oBAAoB,EAAKT,SAAS,GAAGrZ,MAGlD,EAAKuZ,WAAa,CACd5V,OAAQsN,EAAO4I,aACf/B,IAAK7G,EAAO0I,YA1GhB,EAAKH,WAAajU,sBAClB,EAAK/J,MAAQ,CACT6d,SAAU,IAJY,E,sDAQ9B,WAAsB,IAAD,SACjB1f,QAAQC,IAAR,4BAAiCrB,KAAK6gB,YACtC9Z,IAAciF,QAAQ,MAAO,CAAC,WAAD,UAAahM,KAAK6gB,iBAAlB,QAA+B,OAAQ,iBAAa3gB,OAAWA,EAAW,CAAC,aAAa+F,MAAK,SAAAgG,GAAK,OAC3HA,EAAMpE,UACR5B,MAAK,SAAA6a,GACH,GAAK5U,MAAMC,QAAQ2U,GAAnB,CACA,EAAKA,SAAW,GAChB,IAAK,IAAIzN,EAAIyN,EAASzY,OAAS,EAAGgL,GAAK,IAAKA,EAAG,CAC3C,IAAMJ,EAAI6N,EAASzN,GACnBJ,EAAC,SAAe,EAAKhI,MAAMgE,QAC3B,EAAK6R,SAAS1gB,KAAK,IAAIgP,IAAeoS,cAAkBvO,IAE5D,EAAK1F,SAAS,CACVuT,SAAU,EAAKA,iB,yBAK3B,SAAY3P,GAER,OADAnR,KAAK8gB,SAAS1gB,KAAK+Q,GACZnR,KAAK8gB,W,yBAGhB,WAAuB,IAAD,OAClBN,EAAejS,SAAW,SAAC4C,GAInBA,EAAQ0P,YAAc,EAAKA,WAE/B,EAAKtT,SAAS,CACVuT,SAAU,EAAKL,YAAYtP,Q,+BAKvC,WAAqB,IAAD,EAChBnR,KAAK4gB,eAAiB5gB,KAAKiL,MAAMiE,QACjClP,KAAK6gB,UAAL,UAAiB7gB,KAAK4gB,sBAAtB,aAAiB,EAAqBnZ,GACtCzH,KAAKyhB,qBACLzhB,KAAK+gB,aAAc,EACnB,IAAME,EAAajhB,KAAKihB,WAAW/T,QAC9B+T,IACLA,EAAWG,UAAY,K,+BAG3B,WACIhgB,QAAQC,IAAI,SACZrB,KAAK0hB,cACL1hB,KAAK2hB,sB,gCAGT,WAAsB,IAAD,IACjB3hB,KAAK0hB,eACc,UAAA1hB,KAAKiL,MAAMiE,eAAX,eAAoBzH,OAApB,UAA2BzH,KAAK4gB,sBAAhC,aAA2B,EAAqBnZ,KAE/DzH,KAAK2hB,sB,kCAIb,WACInB,EAAejS,SAAWC,M,iCAG9B,SAAoB/G,GAAa,IAAD,SAE5BV,IAAciF,QAAQ,MAAO,CAAC,WAAD,UAAahM,KAAK6gB,iBAAlB,QAA+B,OAAQ,iBAAa3gB,OAAWA,EAAW,CAAC,UAAD,OAAWuH,GAAM,aAAaxB,MAAK,SAAAgG,GAAK,OAC3IA,EAAMpE,UACR5B,MAAK,SAAA6a,GAAa,IAAD,EACf,GAAK5U,MAAMC,QAAQ2U,GAAnB,CAEA,IADA,IAAMc,EAAgC,GAC7BvO,EAAIyN,EAASzY,OAAS,EAAGgL,GAAK,IAAKA,EAAG,CAC3C,IAAMJ,EAAI6N,EAASzN,GACnBJ,EAAC,SAAe,EAAKhI,MAAMgE,QAC3B2S,EAAYxhB,KAAK,IAAIgP,IAAeoS,cAAkBvO,KAE1D,IAAK6N,UAASe,QAAd,QAAyBD,GACzB,EAAKrU,SAAS,CACVuT,SAAU,EAAKA,iB,oBA0B3B,WAOI,IANA,IAGIgB,EAEAC,EALE9X,EAAOjK,KAAKiD,MAAM6d,SAASzY,OAC3B2Z,EAAM9V,MAAMjC,GAKToJ,EAAI,EAAGA,EAAIpJ,IAAQoJ,EAAG,CAAC,IAAD,EACrBlC,EAAUnR,KAAKiD,MAAM6d,SAASzN,GAM9B3S,EAASyQ,EAAQhB,OAAO1I,GAC1BwW,EAAavd,IAAWohB,EACtBG,EAAO,IAAIvf,KAAKyO,EAAQ4M,WAExBmE,EAAG,UAAMD,EAAK/Y,UAAX,YAAwB+Y,EAAKlZ,WAA7B,YAA2CkZ,EAAKjZ,eACvCkZ,KAAG,UAAKH,SAAL,aAAK,EAAUG,OAEhCjE,GAAa,EACb+D,EAAIH,QAAQ,cAAC,EAAD,CAAoBhZ,KAAMoZ,MAErChE,GACG8D,GAAaE,EAAKE,UAAYJ,EAASK,UAAa,MAAQnE,GAAa,GAEjF+D,EAAIH,QAAQ,cAAC,EAAD,CAEZ1Q,QAASA,EACT8M,WAAYA,GAFP5K,IAILyO,EAAaphB,EACbqhB,EAAW,CACPG,IAAKA,EACLE,UAAWH,EAAKE,WAIxB,OACI,qBAAK1a,GAAG,OAAR,SACI,qBAAK4F,UAAWqB,cAAwB,gCAA6BxO,EACrE2M,IAAK7M,KAAKihB,WACVC,SAAUlhB,KAAKkhB,SAFf,SAIKc,U,GA7KFrW,aAoLb0W,EAAqB,SAAC,GAAD,IAAExZ,EAAF,EAAEA,KAAF,OACvB,qBAAKwE,UAAU,uBAAf,SACI,+BACK3D,YAAiBb,QAUxByZ,E,kDAQF,WAAYrX,GAAoB,IAAD,8BAC3B,cAAMA,IALVsX,iBAI+B,IAF/B9b,WAAoB,GAIhB,EAAKxD,MAAQ,CACTyd,MAAOzV,EAAMyV,MAAM,GACnB8B,iBAAiB,GAErB,EAAKD,YAAcvV,sBANQ,E,0CAS/B,SAAOqM,GAAe,IAAD,IACjBtS,IAAciF,QAAQ,OAAQ,CAAC,WAAD,oBAAahM,KAAKiL,MAAMiE,eAAxB,aAAa,EAAoBzH,UAAjC,QAAuC,OAAQ,YAAa,CACtF6I,QAAS+I,M,oBAIjB,WAAU,IAAD,OACL,OACI,sBAAM5R,GAAG,aAAT,SACI,sBAAK4F,UAAU,MAAf,UACI,iCACI,qBAAKlC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,SAAgD,sBAAMC,KAAK,eAAe/I,EAAE,oOAGhF,qBAAKkF,GAAG,qBAAR,SACI,0BACAoF,IAAK7M,KAAKuiB,YACVE,WAAY,SAAA7D,GACR,GAAc,UAAVA,EAAE8D,MAAoB9D,EAAE+D,SAAU,CAClC/D,EAAEgE,iBAEF,IAAM/V,EAAM,EAAK0V,YAAYrV,QAC7B,IAAKL,EAAIgW,YAAa,OAEtB,EAAKtV,SAAS,CAACmT,MAAO,KACtBtf,QAAQC,IAAIwL,EAAIgW,aAEhB,EAAKC,OAAOjW,EAAIgW,eAGxBE,QAAS,SAAAnE,GACLxd,QAAQC,IAAIud,IAEhBoE,SAAU,SAAApE,GACN,EAAKrR,SAAS,CAACmT,MAAO9B,EAAElG,OAAOzM,SAGnCA,MAAOjM,KAAKiD,MAAMyd,MAClB7U,YAAY,gBACZoX,WAAS,EACTC,YAAU,MAKd,yBAAQ3X,QAAS,SAAAqT,GACbA,EAAEgE,iBAEG,EAAK3f,MAAMuf,gBAiDZ,EAAKjV,SAAS,CAAEiV,iBAAiB,IAhDrCzb,IAAciF,QAAQ,MAAO,CAAC,eAAgB,eAAW9L,OAAWA,EAAW,CAAC,qCAAsC,qCAAsC,qCAAsC,qCAAsC,qCAAsC,uCAC7Q+F,MAAK,SAAAgG,GAAK,OAAIA,EAAMpE,UACpB5B,MAAK,SAAA8F,GACGG,MAAMC,QAAQJ,KACnB,EAAKtF,WAAa,GAClBsF,EAAKzL,SAAQ,SAAA2Q,GACT,EAAKxK,WAAWrG,KACZ,yBAAQgM,MAAO,CACXhB,OAAQ,GACR2C,UAAW,GACX5C,MAAO,IACP0C,WAAY,GACZxB,YAAa,EACb4I,QAAS,SACV1J,QAAS,WAAO,IAAD,IACdxE,IAAciF,QAAQ,OAAQ,CAAC,WAAD,oBAAa,EAAKuW,YAAYrV,eAA9B,aAAa,EAA0BjB,aAAvC,QAAgD,OAAQ,WAAY,CAC9FkX,QAAS,EACTC,YAAa,EACbC,sBAAuBpS,EAAExJ,KAE5BxB,MAAK,SAAAqd,GAAM,OAAIA,EAAOzb,UACtB5B,MAAK,SAAAqd,GACF,EAAKR,OAAL,6BAAkCQ,EAAO1hB,OACzC,EAAK2L,SAAS,CAAEiV,iBAAiB,QAhBzC,UAmBI,qBACA1N,IAAG,+CAA0C7D,EAAExJ,GAA5C,YAAkDwJ,EAAEtE,KAApD,yCACHoI,IAAK9D,EAAEnG,KACPsB,MAAO,CACHwI,MAAO,OACPI,aAAc,KAGlB,qBAAK5I,MAAO,CACRwH,SAAU,GACVC,WAAY,IACZtH,WAAY,EACZqI,MAAO,OACP/G,WAAY,IALhB,SAOCoD,EAAEnG,cAKf,EAAKyC,SAAS,CAAEiV,iBAAiB,SAlDzC,UAuDI,qBAAKe,QAASvjB,KAAKiD,MAAMuf,gBAAiBpW,MAAO,CAC7C6H,SAAU,WACVlG,WAAY,IACZF,YAAa,IACb2V,OAAQ,IACR/L,gBAAiB,UACjBjL,cAAe,GACfwI,aAAc,GAPlB,SASKhV,KAAKyG,aAEV,sBAAK0E,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,UAAgD,oBAAG,YAAU,6CAAb,UAA0D,sBAAM,YAAU,UAAU,YAAU,UAAU9I,EAAE,2WAA2W+I,KAAK,iBAAsB,sBAAM/I,EAAE,0NAA0N+I,KAAK,iBAAsB,sBAAM/I,EAAE,4EAA4E+I,KAAK,iBAAsB,sBAAM/I,EAAE,4EAA4E+I,KAAK,oBAA0B,+BAAM,0BAAU7D,GAAG,uCAAb,SAAoD,sBAAM0D,MAAM,KAAKC,OAAO,iBAGrlC,iCACI,qBAAKD,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,SAAgD,sBAAMC,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,2MAGxH,cAAC,EAAD,a,GAvIAoJ,aA8Id8X,E,kDAGF,WAAYxY,GAAY,IAAD,8BACnB,cAAMA,IACDhI,MAAQ,CACTygB,WAAY,QAHG,E,0CAOvB,WAAU,IAAD,OACCA,EAAa1jB,KAAKiD,MAAMygB,WAC9B,OACI,wBACArW,UAAU,eACVC,aAAc,WACV,EAAKC,SAAS,CACVmW,WAAY5e,KAAKC,MAAsB,GAAhBD,KAAKE,UAAmB,UAJvD,SAQI,qBACA8P,IAAG,+CAA0C4O,EAAWla,SAAS,IAA9D,QACHuL,IAAI,gB,GAvBMpJ,c,+HC5XLgY,E,kDACjB,WAAY1Y,GAAuB,uCACzBA,G,6CAGV,WAeI,IAfS,IAAD,IACFwR,EAAWzc,KAAKiL,MAAM8D,MAAM0N,SAG5BmH,EAAiB5jB,KAAKiL,MAAM8D,MAAM6U,eAQlCC,EAAe,GAEfC,EAAOrH,EAASsH,WAAWC,UAdzB,aAgBJ,IAAMvJ,EAAOqJ,EAAKrJ,OAClB,GAAIA,EAAKC,KAAM,cACf,IAAMxL,EAAUuL,EAAKxO,MAAM,GAE3B,GAAIiD,EAAQ+U,YAAc/U,EAAQxC,KAAO,IAAMwC,EAAQxC,KAAO,IAAK,CAC/D,IAAIwX,EAASL,EAAOrH,MAAK,SAAA2H,GAAE,OAAIA,EAAGC,MAAQlV,EAAQ+U,aAalD,OAZKC,IACDA,EAAS,CAAEE,IAAKlV,EAAQ+U,UAAWI,KAAK,EAAMxF,SAAU,IACxDgF,EAAOzjB,KAAK8jB,IAGhBA,EAAOrF,SAASze,KAAK,CACjBgkB,IAAKlV,EAAQzH,GACbwT,EAAG/L,EACHmV,IAAsB,IAAjBnV,EAAQxC,KACbmS,SAAU,KAGd,WAGJ,IAAMyF,EAA8B,IAAjBpV,EAAQxC,KACrBmX,EAAOrH,MAAK,SAAA2H,GAAE,OAAIA,EAAGC,MAAQlV,EAAQzH,WACrCvH,EACFokB,IAAYA,EAAWrJ,EAAI/L,GAE/B,IAAMiV,EAAM,OAAGG,QAAH,IAAGA,IAAc,CACzBF,IAAKlV,EAAQzH,GACbwT,EAAG/L,EACHmV,IAAsB,IAAjBnV,EAAQxC,KACbmS,SAAU,IAGTyF,GAAYT,EAAOzjB,KAAK+jB,MAlCpB,CAAC,IAAD,qBAEM,MAmCnB,IAAMnC,EAAa,GAanB,OAXA,SAAS5hB,EAAKmkB,EAA2BV,GACrCA,EAAOW,MAAK,SAACvT,EAAG6J,GAAJ,OAAW7J,EAAEgK,EAAGhH,UAAYhD,EAAEoT,IAAM,OAAS,IAAOvJ,EAAEG,EAAGhH,UAAY6G,EAAEuJ,IAAM,OAAS,OAD/C,oBAElCR,GAFkC,IAEnD,2BAAyB,CAAC,IAAfM,EAAc,QACrBnC,EAAI5hB,KAAK,cAAC,EAAD,CAAS8O,QAASiV,EAAGlJ,EAAIwJ,MAAON,EAAGC,MAAQR,EAAgBtM,SAAUiN,IAAsBJ,EAAGC,OACnGD,EAAGtF,SAASxW,OAAS,GACrBjI,EAAKmkB,EAAmBJ,EAAGtF,WALgB,+BASvDze,CAAI,oBAACJ,KAAKiL,MAAM6D,uBAAZ,aAAC,EAA4BrH,UAA7B,QAAmC,OAAQoc,GAExC7B,I,oBAGX,WACI,OACI,sBAAK5V,MAAO,CACRhB,OAAQ,OACRD,MAAO,OACPuZ,SAAU,EACV7a,MAAO,UACPkK,UAAW,SACXC,UAAW,QANf,UAQI,qBAAK5H,MAAO,CACRjB,MAAO,OACPC,OAAQ,MAEXpL,KAAK2kB,mB,GAvFgBhZ,aAmGhCiZ,E,kDACF,WAAY3Z,GAAsB,IAAD,8BAC7B,cAAMA,IACDhI,MAAQ,CAAEgK,OAAO,GAFO,E,0CAKjC,WAAU,IAAD,OACC4X,EAAc7kB,KAAKiL,MAAMiE,QAAQxC,KACvC,OACI,qBAAKN,MAAO,CACRjB,MAAO,IACPoB,WAAY,EACZC,cAAe,EACfpB,OAAQ,GACRkB,aAAc,EACdsH,SAA0B,IAAhBiR,EAAoB,OAAS,OACvChR,WAA4B,IAAhBgR,EAAoB,SAAM3kB,EACtC2J,MAAuB,IAAhBgb,EAAoB,UAAY,WAR3C,SAUI,sBACAzY,MAAO,CACHjB,MAAO,IACPC,OAAQ,GACRyC,WAAY,EACZxB,YAAa,EACbC,aAAc,EACdyH,UAAW,OACX0D,gBAAiC,IAAhBoN,OAAoB3kB,EAAYF,KAAKiL,MAAMqM,SAAW,YAActX,KAAKiD,MAAMgK,MAAQ,iBAAc/M,EACtH8U,aAAc,EACdzI,WAA4B,IAAhBsY,EAAoB,GAAK,EACrC9M,OAAQ,WAEZzK,aAAc,WAAQ,EAAKC,SAAS,CAAEN,OAAO,KAC7CO,aAAc,WAAQ,EAAKD,SAAS,CAAEN,OAAO,KAC7C+K,YAAa,WAAwC,IAA5B,EAAK/M,MAAMiE,QAAQxC,MAAYoY,YAAc,EAAK7Z,MAAMiE,UAfjF,UAiBI,qBAAK9C,MAAO,CACRjB,MAAO,GACPC,OAAQ,GACR0C,YAAa,EACb8G,MAAO,OACP7G,WAAY,GALhB,SAOKgX,EAAY/kB,KAAKiL,MAAMwZ,MAAOI,KAElB,IAAhBA,EAAoB7kB,KAAKiL,MAAMiE,QAAQpE,KAAK6I,cAAgB3T,KAAKiL,MAAMiE,QAAQpE,c,GA7C9Ea,aAyFf,SAASoZ,EAAYN,EAAgB/X,GAExC,OAAI+X,EAAcO,EAAaP,MAClB,IAAT/X,EAAmBsY,EAAa,GACvB,IAATtY,EAAmBsY,EAAa,GACvB,IAATtY,EAAmBsY,EAAa,GACvB,IAATtY,EAAmBsY,EAAa,GACvB,IAATtY,EAAmBsY,EAAa,GACvB,KAATtY,EAAoBsY,EAAa,IACxB,KAATtY,GAAwB,KAATA,GAAwB,KAATA,EAAoBsY,EAAa/U,YAAnE,EAGJ,IAAM+U,EAAe,CACjB,EAAG,qBAAK7Z,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,SAAgD,sBAAMC,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,y9BACvHkiB,MAAO,qBAAKtZ,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAArD,SAA6D,sBAAMA,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,+SACxI,EAAG,sBAAK4I,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,UAAgD,sBAAM9I,EAAE,gCAAgC+I,KAAK,iBAAsB,sBAAM/I,EAAE,6RAA6R+I,KAAK,oBACha2Z,UAAW,qBAAK9Z,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,SAAgD,sBAAMC,KAAK,eAAe/I,EAAE,+VAA+V,cAAY,WAClc,GAAI,qBAAK4I,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAArD,SAA4D,sBAAM,YAAU,UAAU,YAAU,UAAU/I,EAAE,ipBAAipB+I,KAAK,mBACtwB,EAAG,qBAAKH,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,SAAgD,sBAAMC,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,wmBAAwmB,cAAY,WAC3uB0N,OAAQ,qBAAK9E,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAArD,SAA4D,sBAAM/I,EAAE,6KAA6K+I,KAAK,mBAC9P,EAAG,qBAAKH,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,SAAgD,sBAAMC,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,2EACvH,EAAG,qBAAK,cAAY,QAAQ4I,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAxD,SAAoE,sBAAMC,KAAK,eAAe/I,EAAE,0QCzNlF2iB,E,4JACjB,WACI,OACI,qCACA,qBAAK9Y,MAAO,CAAEjB,MAAO,OAAQC,OAAQ,KACrC,cAAC,EAAD,CAAUkM,UAAU,EAAO+B,KAAK,UAAUhO,QAAQ,YAAlD,SAA8D,oBAAGC,KAAK,OAAO,YAAU,UAAzB,UAAmC,sBAAMA,KAAK,eAAe,YAAU,UAAU/I,EAAE,8QAA8Q4iB,UAAU,mBAAwB,sBAAM5iB,EAAE,sGACzc,cAAC,EAAD,CAAU+U,UAAQ,EAAC+B,KAAK,UAAUhO,QAAQ,YAA1C,SAAsD,mBAAGC,KAAK,OAAO,YAAU,UAAzB,SAAmC,sBAAMA,KAAK,eAAe/I,EAAE,61B,GAN3FoJ,aAuBhCyZ,E,kDACF,WAAYna,GAAuB,IAAD,8BAC9B,cAAMA,IACDhI,MAAQ,CACTgK,OAAO,GAHmB,E,0CAOlC,WAAU,IAAD,OACCoY,EAAMrlB,KAAKiL,MAAMqM,SAAW,UAAYtX,KAAKiD,MAAMgK,MAAQ,UAAY,UAC7E,OACI,qBACAb,MAAO,CACHyB,WAAY,EACZtB,WAAY,EACZC,cAAe,EACfpB,OAAQ,GACRD,MAAO,IACP4M,OAAQ,WAEZzK,aAAc,kBAAM,EAAKC,SAAS,CAAEN,OAAO,KAC3CO,aAAc,kBAAM,EAAKD,SAAS,CAAEN,OAAO,KAV3C,SAYI,sBAAKb,MAAO,CACRC,YAAa,EACbC,aAAc,EACdlB,OAAQ,GACRD,MAAO,IACPsM,gBAAiB4N,EACjBrQ,aAAc,EACdnL,MAAO,WAPX,UASI,qBAAKuC,MAAO,CACRjB,MAAO,GACPC,OAAQ,GACR0C,YAAa,GACbC,UAAW,EACX6G,MAAO,QACRzJ,MAAM,KAAKC,OAAO,KAAKC,QAASrL,KAAKiL,MAAMI,QAN9C,SAOKrL,KAAKiL,MAAM4T,WAEhB,qBAAKzS,MAAO,CACRjB,MAAO,IACPC,OAAQ,GACR2C,UAAW,EACXkH,QAAS,eACTpB,WAAY,KALhB,SAOK7T,KAAKiL,MAAMoO,gB,GAhDb1N,aCnBF2Z,E,4JACjB,WAKI,OACI,yBAASlZ,MAAO,CACZqL,gBAAiB,YACjBtM,MAAO,OACPC,OAAQ,GACRoM,aAAc,IAJlB,SAMI,sBAAKpL,MAAO,CACR0R,QAAS,QACT7I,QAAS,OACTuG,cAAe,MACfpQ,OAAQ,OACRma,WAAY,WALhB,UAOI,qBAAKzR,KAAK,MAAM,aAAW,sBAAsB1H,MAAO,CACpDjB,MAAO,GACPC,OAAQ,GACR0C,YAAa,IAHjB,SAKI,sBAAK3C,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,UACI,uBAAM5D,GAAG,iCAAT,UAA0C,sBAAM0D,MAAM,KAAKC,OAAO,KAAKE,KAAK,UAAe,wBAAQka,GAAG,KAAKC,GAAG,KAAK/O,EAAE,MAAMpL,KAAK,aAChI,uBAAM7D,GAAG,6BAAT,UAAsC,sBAAM0D,MAAM,KAAKC,OAAO,KAAKE,KAAK,UAAe,wBAAQka,GAAG,KAAKC,GAAG,KAAK/O,EAAE,KAAKpL,KAAK,aAC3H,uBAAM7D,GAAG,iCAAT,UAA0C,sBAAM0D,MAAM,KAAKC,OAAO,KAAKE,KAAK,UAAe,sBAAME,EAAE,KAAKC,EAAE,OAAON,MAAM,KAAKC,OAAO,OAAOsa,GAAG,IAAIpa,KAAK,aACtJ,uBAAM7D,GAAG,gCAAT,UAAyC,sBAAM0D,MAAM,KAAKC,OAAO,KAAKE,KAAK,UAAe,sBAAME,EAAE,OAAOC,EAAE,KAAKN,MAAM,KAAKC,OAAO,KAAKsa,GAAG,IAAIpa,KAAK,aAEnJ,uBAAM7D,GAAG,0BAAT,UAAmC,wBAAQ6D,KAAK,QAAQoL,EAAE,IAAI8O,GAAG,KAAKC,GAAG,OAAc,wBAAQD,GAAG,KAAKC,GAAG,KAAK/O,EAAE,MAAMpL,KAAK,aAC5H,sBAAM7D,GAAG,sBAAT,SAA+B,qBAAK+D,EAAE,KAAKC,EAAE,KAAKN,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAlD,SAA8D,sBAAMC,KAAK,QAAQ/I,EAAE,8XAClH,sBAAMkF,GAAG,0BAAT,SAAmC,qBAAK+D,EAAE,OAAOC,EAAE,KAAKN,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApD,SAAgE,sBAAMC,KAAK,QAAQ/I,EAAE,+LACxH,sBAAMkF,GAAG,yBAAT,SAAkC,qBAAK+D,EAAE,OAAOC,EAAE,KAAKN,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApD,SAAgE,4BAAG,sBAAMC,KAAK,QAAQ/I,EAAE,sNAE1H,+BAAeiJ,EAAE,IAAIC,EAAE,IAAIN,MAAM,KAAKC,OAAO,KAAKyJ,KAAI,sCAjCzD,MAiCyD,KAAtD,SACI,8BAAK,qBAAK1J,MAAM,KAAKC,OAAO,KAAK0J,IAnC3C,sGAmCuDC,IAAI,IAAI3I,MAAO,CAAE4I,aAAc,cAEhF,sBAAM7J,MAAM,KAAKC,OAAO,KAAKI,EAAE,KAAKC,EAAE,KAAKH,KAA4B,mBAAgKuJ,KAAI,+BApC9O,MAoC8O,YAGnP,sBAAKzI,MAAO,CACRsY,SAAU,GADd,UAGI,4CACA,uBACA,6CAEJ,sBAAKtY,MAAO,CACR6I,QAAS,OACT0Q,WAAY,EACZnK,cAAe,OAHnB,UAKI,cAAC,EAAD,UACI,sBAAK,cAAY,QAAQrQ,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAxD,UAAoE,sBAAM,YAAU,UAAU,YAAU,UAAU9I,EAAE,mWAAmW+I,KAAK,iBAAsB,sBAAM,YAAU,UAAU,YAAU,UAAU/I,EAAE,wPAAwP+I,KAAK,sBAEnyB,cAAC,EAAD,UACA,qBAAK,cAAY,QAAQH,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAxD,SAAoE,qBAAKF,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAApC,SAAgD,sBAAM9I,EAAE,6aAA6a+I,KAAK,uBAE9iB,cAAC,EAAD,UACA,qBAAK,cAAY,QAAQH,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAxD,SAAoE,sBAAMC,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,ukB,GA7D1HoJ,aAuEhCia,EAAiB,SAAC,GAAD,IAAG/G,EAAH,EAAGA,SAAH,OACnB,wBAAQzS,MAAO,CACXjB,MAAO,GACPC,OAAQ,GACRqM,gBAAiB,eAHrB,SAKI,qBAAKrL,MAAO,CACRhB,OAAQ,IADZ,SAGKyT,OC9EQgH,E,4JACjB,WAAU,IAAD,EACL,OACI,sBAAKzZ,MAAO,CACRqL,gBAAmD,cAAlCzX,KAAKiL,MAAM6a,aAAa7iB,MAAwB,UAAY,UAC7E6a,QAAS,EACT7J,SAAU,QACVuL,OAAQ,GACRrU,MAAO,IACP8J,QAAS,OACTuG,cAAe,OAPnB,UASI,sBAAKpP,MAAO,CACRsY,SAAU,GADd,UAGK1kB,KAAKiL,MAAM6a,aAAa7iB,MACzB,uBAJJ,UAKKjD,KAAKiL,MAAM6a,aAAa5W,eAL7B,aAKK,EAAiCpE,QAEtC,wBAAQsB,MAAO,GAEZb,QAAS,kBAAMvJ,YAAc,OAFhC,SAGI,qBAAK,cAAY,QAAQmJ,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAxD,SAAoE,sBAAMC,KAAK,eAAe,YAAU,UAAU,YAAU,UAAU/I,EAAE,ub,GAtBrHoJ,aCOlBoa,E,4JACjB,WAAU,IAAD,EACChX,EAAQ/O,KAAKiL,MAAMsM,cACnByO,IAAWjX,GAAQA,EAAMkX,SAASC,SAAS,YAC3CC,IAAYpX,GAAQA,EAAMkX,SAASC,SAAS,aAClD,OACI,sBAAKze,GAAG,UAAU2E,MAAO,CACrBhB,OAAQ,OACRD,MAAO,IACP8J,QAAS,OACTuG,cAAe,UAJnB,UAMI,sBAAKpP,MAAO,CACRjB,MAAO,OACP8J,QAAS,OACTyP,SAAU,EACVlJ,cAAe,SACfpQ,OAAQ,qBALZ,UAOI,qBAAKgB,MAAO,CACRjB,MAAO,IACPkB,YAAa,GACbC,aAAc,GACdlB,OAAQ,GACRoM,cAAe,EACf3N,MAAO,UACP8b,WAAY,GAPhB,SASK5W,EACD,sBAAK3C,MAAO,CACRhB,OAAQ,GACR2C,UAAW,IAFf,UAIKiY,GAAYG,EAAY,qBAAK/Z,MAAO,CACjC0B,YAAa,EACb8G,MAAO,OACP7G,UAAW,EACX5C,MAAO,GACPC,OAAQ,IALa,SAOnB4a,EAAW,qCACb,qBAAK5Z,MAAO,CAAE6H,SAAU,WAAYpK,MAAO,oBAAsB,aAAW,WAAWsB,MAAM,KAAKC,OAAO,KAAKC,QAAQ,cAAtH,SAAoI,sBAAMC,KAAK,eAAe,YAAU,UAAU/I,EAAE,8VACpL,qBAAK6J,MAAO,CAAE6H,SAAU,WAAYpK,MAAO,WAAasB,MAAM,KAAKC,OAAO,KAAKC,QAAQ,cAAvF,SAAqG,sBAAM9I,EAAE,kDAAkD+I,KAAK,sBAC9J6a,EAAY,qCAClB,qBAAK/Z,MAAO,CAAE6H,SAAU,WAAYpK,MAAO,WAAa,aAAW,kBAAkBsB,MAAM,KAAKC,OAAO,KAAKC,QAAQ,cAApH,SAAkI,sBAAMC,KAAK,eAAe,YAAU,UAAU/I,EAAE,8VAClL,sBAAK6J,MAAO,CAAE6H,SAAU,WAAYpK,MAAO,WAAasB,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAvF,UAAmG,sBAAM9I,EAAE,mdAAmd+I,KAAK,iBAAsB,sBAAM/I,EAAE,okBAAokB+I,KAAK,uBACpqC,OACD,KACT,oBAAIc,MAAO,CACPjB,MAAO,IACP0I,WAAY,IACZD,SAAU,GACVG,UAAW,SACXC,UAAW,UALf,SAOKjF,EAAMjE,UAEN,OAEb,qBAAKsB,MAAO,CACRjB,MAAO,OACPC,OAAQ,EACRqM,gBAAiB,aAGrB1I,EACE,cAAC,EAAD,CAAUA,MAAOA,EAAOD,gBAAe,UAAE9O,KAAKiL,MAAM6D,uBAAb,aAAgC5O,IACvE,cAAC,EAAD,OAGN,cAAC,EAAD,IACCF,KAAKiL,MAAM6a,aAAe,cAAC,EAAD,CAAWA,aAAc9lB,KAAKiL,MAAM6a,eAAkB,Y,GAvE5Dna,c,qWCF/Bya,EAAwD,CAC5D7X,SAAUC,KAEL,SAASyJ,EAAYlJ,GAC1B3N,QAAQC,IAAR,+BAA6B0N,QAA7B,IAA6BA,OAA7B,EAA6BA,EAAOjE,OACpCsb,EAAgB7X,SAASQ,GAG3B,IAAMsX,EAAgE,CACpE9X,SAAUC,KAEL,SAASsW,EAAc5V,GAC5B9N,QAAQC,IAAR,iCAA+B6N,QAA/B,IAA+BA,OAA/B,EAA+BA,EAASpE,OACxCub,EAAkB9X,SAASW,GAG7B,IAGIoX,EAHEC,EAA0D,CAC9DhY,SAAUC,KAGL,SAASxM,EAAciB,GAC5B7B,QAAQC,IAAR,qCAAmC4B,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAOA,QAC1C,IAAMujB,EAAqB,OAAVvjB,EAAiB,KAAjB,2BACZqjB,GACArjB,GAKLqjB,EAAc,OAAGE,QAAH,IAAGA,SAAYtmB,EAC7BqmB,EAAahY,SAASiY,GAIxB,IAAIthB,OAAoChF,EAEjC,SAASshB,IACd,OAAOtc,EAIT,IAAMuhB,EAAc,SAAC7H,GACJ,SAAXA,EAAEhd,MAAmBgd,EAAE8H,QAAS7kB,OAAOkB,SAAS4jB,aAChC,SAAX/H,EAAEhd,MAAmBgd,EAAE8H,SAAW9H,EAAE+D,UAAU9gB,OAAOkB,SAAS6jB,YAGpDvU,E,kDAOnB,WAAYpH,GAAY,IAAD,8BACrB,cAAMA,IAHA4b,mBAEe,IASfC,aAAoC,KATrB,EAWfC,iBAA0C,IAAInnB,IAX/B,EAYfonB,wBAAsE,IAAIpnB,IAVhF,EAAKqD,MAAQ,CACXsU,cAAe,KACfzI,gBAAiB,KACjBgX,aAAc,MALK,E,qDAcvB,WAAqB,IAAD,OA4DlB,GA1DA1kB,QAAQC,IAAI,2BACZQ,OAAOL,iBAAiB,WAAYilB,GAEpCJ,EAAkB9X,SAAW,SAAAW,GAC3B,GAAI,EAAK4X,eAAL,OAAqB5X,QAArB,IAAqBA,OAArB,EAAqBA,EAASzH,IAChC,GAAqB,IAAjByH,EAAQxC,KACVgG,YAAoBxN,EAAQ8B,GAAI,EAAK8f,aAAc5X,OAChD,CAAC,IAAD,EAECD,EAAU,EAAK6X,aAAarf,GAElC5F,OAAOoG,aAAagf,QAApB,2BAAgDhY,GAAWC,EAAQzH,IAEnE,IAAIyf,EAAM,EAAKH,iBAAiB9mB,IAAIgP,GAMpC,QALY/O,IAARgnB,IACFA,EAAM,GACN,EAAKH,iBAAiB5mB,IAAI8O,EAAS,IACnC,EAAK+X,wBAAwB7mB,IAAI8O,EAAS,MAEvCiY,EAAIhB,SAAShX,EAAQzH,IAAK,CAC7Byf,EAAI9mB,KAAK8O,EAAQzH,IACjB,IAAM0f,EAAI,EAAKH,wBAAwB/mB,IAAIgP,GAC3CkY,EAAEjY,EAAQzH,IAAM,CAAC,CAAC,EAAG,KACrBrG,QAAQC,IAAI6lB,GACZ9lB,QAAQC,IAAI8lB,GAEd,YAAKN,qBAAL,SAAoB7f,GAAG1D,KAAK,GAAI,CAC9BE,SAAUyL,EACVwN,SAAU,EAAKuK,wBAAwB/mB,IAAIgP,GAC3CmY,SAAS,EACT3gB,YAAY,EACZ4gB,QAAQ,SAQHjmB,QAAQM,KAAR,4DAA2DwN,QAA3D,IAA2DA,OAA3D,EAA2DA,EAASpE,KAApE,qBAAqF,EAAKgc,aAA1F,MACa,KAAX,OAAP5X,QAAO,IAAPA,OAAA,EAAAA,EAASxC,OAAY,EAAKa,SAAS,CAAEuB,gBAAiBI,KAG5DkX,EAAgB7X,SAAW,SAAAQ,GAAU,IAAD,MAClC,EAAKxB,SAAS,CAAEgK,cAAexI,IAC/B,IAAMuY,EAAOzlB,OAAOoG,aAAaC,QAApB,kCAAgD6G,QAAhD,IAAgDA,OAAhD,EAAgDA,EAAOtH,KACpErG,QAAQC,IAAI0N,GACZ,IAAMoV,EAAE,UAAImD,EAAI,OAAGvY,QAAH,IAAGA,GAAH,UAAGA,EAAO0N,gBAAV,aAAG,EAAiBtU,MAAMmf,QAA8BpnB,SAAhE,eAA8E6O,QAA9E,IAA8EA,GAA9E,UAA8EA,EAAO0N,gBAArF,aAA8E,EAAiBsH,WAAWwD,SAAS9M,OAAOxO,MAClI,EAAK6a,aAAe/X,EAChBoV,GAAIW,EAAcX,IAGxBoC,EAAahY,SAAW,SAAAtL,GACR,OAAVA,GAAkBiC,GAAQ4N,YAAuB5N,GACrD,EAAKqI,SAAS,CAAEuY,aAAc7iB,KAI5Be,MAAc,CAChB5C,QAAQC,IAAI,YACZD,QAAQC,IAAIQ,OAAOkB,UACnBlB,OAAOkB,SAASykB,OAEhB,IAAMC,EAAY,IAAIC,IAAU,CAC9BC,WAAY,QACZlL,SAAU,EACVmL,UAAW,IACXC,WAAY,OAGdhmB,OAAOkB,SAAS+kB,eAAc,SAAC1lB,GAE7BqlB,EAAUM,KAAKC,EAAOC,MAAM,KAAOD,EAAOE,KAAK9lB,QAGnD,IAAIuB,EAAQ9B,OAAOoG,aAAaC,QAAQ,SACnCvE,IACHA,EAAQ,8DACR9B,OAAOoG,aAAagf,QAAQ,QAAStjB,IAEvC3D,KAAK6mB,cAAgB,IAAI9f,IAAcpD,GACvCuB,EAASlF,KAAK6mB,cACd7mB,KAAK6mB,cAAcrhB,U,kCAGrB,WAAwB,IAAD,EACrB3D,OAAOsmB,oBAAoB,WAAY1B,GAEvCL,EAAgB7X,SAAWC,IAC3B6X,EAAkB9X,SAAWC,IAC7B+X,EAAahY,SAAWC,IAExB,UAAAxO,KAAK6mB,qBAAL,SAAoBhkB,QACpBqC,OAAShF,I,oBAGX,WAAU,IAAD,EACP,OACE,sBAAKmN,UAAU,YAAf,UACGrJ,MAAe,cAACokB,EAAD,IAAY,KAC5B,sBAAK3gB,GAAG,WAAR,UACE,cAAC,IAAD,CAAQ8P,cAAevX,KAAKiD,MAAMsU,gBAClC,cAAC,IAAD,CAASA,cAAevX,KAAKiD,MAAMsU,cAAezI,gBAAiB9O,KAAKiD,MAAM6L,gBAAiBgX,aAAc9lB,KAAKiD,MAAM6iB,eACxH,cAAC,IAAD,CAAe/W,MAAK,UAAE/O,KAAKiD,MAAMsU,qBAAb,QAA8B,KAAMzI,gBAAiB9O,KAAKiD,MAAM6L,4B,GA9H7DnD,aAqI3Byc,EAAS,kBACb,sBAAK3gB,GAAG,UAAR,UACE,qBAAK4F,UAAU,iBAAf,uBAGA,cAACgb,EAAD,CAAYC,OAAO,WAAnB,SACE,qBAAK,cAAY,QAAQnd,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAxD,SAAoE,sBAAMC,KAAK,eAAeH,MAAM,KAAKC,OAAO,IAAII,EAAE,IAAIC,EAAE,UAE9H,cAAC4c,EAAD,CAAYC,OAAO,WAAnB,SACE,qBAAK,cAAY,QAAQnd,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAxD,SAAoE,sBAAMF,MAAM,IAAIC,OAAO,IAAII,EAAE,MAAMC,EAAE,MAAMH,KAAK,OAAOid,OAAO,qBAEpI,cAACF,EAAD,CAAYC,OAAO,QAAnB,SACA,qBAAK,cAAY,QAAQnd,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAxD,SAAoE,yBAASC,KAAK,eAAe,YAAU,UAAUkd,OAAO,oHAK1HH,EAAa,SAAC,GAAD,IAAGxJ,EAAH,EAAGA,SAAUyJ,EAAb,EAAaA,OAAb,OACjB,wBAAQjb,UAAsB,UAAXib,EAAqB,kCAAoC,eAC5E/c,QAAS,kBAAM1J,OAAOkB,SAAS0lB,aAAaH,IAD5C,SAGGzJ,O,kGC/ML,kCAAO,IAAMrQ,EAAa,c,mBCN1B,IAAIqK,EAAM,CACT,2BAA4B,CAC3B,IACA,GAED,gCAAiC,CAChC,IACA,GAED,sBAAuB,CACtB,IACA,GAED,aAAc,CACb,IACA,GAED,2BAA4B,CAC3B,IACA,GAED,0BAA2B,CAC1B,IACA,GAED,gBAAiB,CAChB,KAGF,SAAS6P,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEhQ,EAAK8P,GAC9B,OAAOG,QAAQphB,UAAUzB,MAAK,WAC7B,IAAI2Y,EAAI,IAAImK,MAAM,uBAAyBJ,EAAM,KAEjD,MADA/J,EAAEhd,KAAO,mBACHgd,KAIR,IAAIoK,EAAMnQ,EAAI8P,GAAMlhB,EAAKuhB,EAAI,GAC7B,OAAOF,QAAQG,IAAID,EAAInN,MAAM,GAAGhD,IAAI+P,EAAoBhK,IAAI3Y,MAAK,WAChE,OAAO2iB,EAAoBnhB,MAG7BihB,EAAoBQ,KAAO,WAC1B,OAAOC,OAAOD,KAAKrQ,IAEpB6P,EAAoBjhB,GAAK,GACzB2hB,EAAOC,QAAUX,I","file":"static/js/main.ebb58657.chunk.js","sourcesContent":["export class EventEmitter<T extends {\n    [key: string]: [...any] | any[]\n}> {\n    protected subscribers: Map<keyof T, ((...args: any) => void)[]> = new Map()\n\n    on<K extends keyof T>(event: K, listener: (...args: T[K]) => void): this {\n        let array = this.subscribers.get(event)\n        if (array === undefined) {\n            array = []\n            this.subscribers.set(event, array)\n        }\n        array.push(listener)\n        return this\n    }\n\n    emit<K extends keyof T>(event: K, ...args: T[K]): this {\n        this.subscribers.get(event)?.forEach(listener => listener.call(this, ...args))\n        return this\n    }\n}","import isElectron from \"is-electron\";\nimport { setVoiceState } from \"../../App\";\nimport { dateToHHMMSS } from \"../../utils\";\n\nexport class DiscordVoiceWs {\n    readonly sessionId: string\n    readonly userId: string\n    readonly server: { endpoint: string, guild_id: string, token: string }\n\n    latency: number | undefined\n    socket: WebSocket | undefined\n\n    private hbInterval!: number\n    private hbTimerId!: number\n    private lastHb!: number\n    private hbNonce: number | undefined\n    private wrongHbNonces = 0\n\n    connect(resume: boolean = false) {\n        console.log(resume ? 'VWS Resuming...' : 'Voice Websocket start')\n\n        const socket = new WebSocket(`wss://${this.server.endpoint}/?v=5`)\n\n        socket.addEventListener('open', () => {\n            console.log('Connected to VWS');\n            this.socket = socket\n\n            if (resume) this.resume()\n            else this.identify()\n        })\n\n        socket.addEventListener('close', event => {\n            console.warn(`VWS closed! \"${event.reason}\", Code: ${event.code}`)\n            window.clearInterval(this.hbTimerId)\n\n            if (event.code > 2000) this.connect(true) \n            else setVoiceState(null)\n        })\n\n        socket.addEventListener('message', event => {\n            if (!this.socket) {\n                console.warn('UNHANDLED MESSAGE')\n            }\n\n            const object: any = JSON.parse(event.data)\n            console.debug(object)\n            const op: number = object.op\n            const d: any = object.d\n\n            switch(op) {\n            case 8:\n                this.handleHeartbeatInterval(d)\n                break\n            case 2:\n                this.handleReady(d)\n                break\n            case 6:\n                this.latency = Date.now() - this.lastHb\n                if (d !== this.hbNonce) {\n                    console.warn('Wrong VWS heartbeat nonce!')\n                    ++this.wrongHbNonces\n                    if (this.wrongHbNonces > 3) {\n                        console.error('Too many wrong heartbeat VWS nonces! Closing.')\n                        this.close()\n                    }\n                } else {\n                    this.wrongHbNonces = 0\n                }\n                console.debug(`...Received (latency: ${this.latency})`)\n                break\n            case 4:\n                console.log('Secret Key: ', d.secret_key)\n                window.electron.udpKey(d.secret_key)\n                break\n            default:\n                console.log('Unknown VWS event:')\n                console.log(event)\n            }\n        })\n\n        setVoiceState({ state: 'VWS', vws: this })\n    }\n\n    close() {\n        if (!this.socket) {\n            console.warn('Tried to close closed VWS')\n            return\n        }\n        console.log('Closing VWS')\n        this.socket.close(1000)\n\n        window.electron.disconnectUDP()\n    }\n    \n    send(op: number, data: {}) {\n        const payload = JSON.stringify({\n            op: op,\n            d: data\n        })\n        console.log(`[VOICE] >>> ${payload}`)\n        this.socket?.send(payload)\n    }\n\n    private identify() {\n        console.log('Voice identify...')\n        this.send(0, {\n            server_id: this.server.guild_id,\n            user_id: this.userId,\n            session_id: this.sessionId,\n            token: this.server.token,\n            video: false\n        })\n    }\n\n    private resume() {\n        console.error('RESUME NOT IMPLEMENTED') // TODO\n        this.close()\n        return\n        this.send(7, {\n          server_id: this.server.guild_id,\n          session_id: this.sessionId,\n          token: this.server.token\n        })\n    }\n\n    private handleReady(d: {\n        ssrc: number\n        ip: string\n        port: number\n        modes: string[]\n    }) {\n        console.log(`VWS ready! (${d.ip}:${d.port} ssrc: ${d.ssrc})`)\n        setVoiceState({ state: 'VWS_READY'})\n\n        if (isElectron()) {\n            window.electron.udp(d.ip, d.port, d.ssrc)\n            window.electron.setUdpReplyHandler((publicIp, publicPort) => {\n                console.log(`Select voice protocol at ${publicIp}:${publicPort}`)\n                this.send(1, {\n                    protocol: 'udp',\n                    data: {\n                        address: publicIp,\n                        port: publicPort,\n                        mode: 'xsalsa20_poly1305_lite'\n                    }\n                })\n                setVoiceState({ state: 'CONNECTED' })\n            })\n            //udp(d.ip, d.port)\n        }\n    }\n\n    private handleHeartbeatInterval(d: { heartbeat_interval: number }) {\n        this.hbInterval = d.heartbeat_interval\n        console.log(`Heartbeat interval: ${this.hbInterval}`)\n        this.hbTimerId = window.setInterval(() => {\n            this.lastHb = this.heartbeat()\n        }, this.hbInterval)\n        window.currentDiscordVWSHbTimerId = this.hbTimerId\n        console.log(window.currentDiscordVWSHbTimerId)\n    }\n\n    private heartbeat() {\n        if (this.hbTimerId !== window.currentDiscordVWSHbTimerId) {\n            window.clearInterval(this.hbTimerId)\n        } else {\n            console.debug(`[${dateToHHMMSS(new Date())}]: VWS Heartbeat... (${this.sessionId})`)\n            const nonce = Math.floor(Math.random() * 100_000_000) + 1633275000000\n            this.socket?.send(JSON.stringify({\n                op: 3,\n                d: nonce\n            }))\n            this.hbNonce = nonce\n        }\n        return Date.now()\n    }\n\n    constructor(sessionId: string, userId: string, server: { endpoint: string, guild_id: string, token: string }) {\n        this.sessionId = sessionId\n        this.userId = userId\n        this.server = server\n    }\n}\n\n/*\nconst d = {\n            \"server_id\": \"581185346465824768\",\n            \"user_id\": \"353603367907360768\",\n            \"session_id\": \"cbd5281439ef4505b7d2c477558930d0\",\n            \"token\": \"b5fd4649e8f2c618\",\n            \"video\": true,\n            \"streams\": [\n              {\n                \"type\": \"video\",\n                \"rid\": \"100\",\n                \"quality\": 100\n              },\n              {\n                \"type\": \"video\",\n                \"rid\": \"50\",\n                \"quality\": 50\n              }\n            ]\n          }}*/","import { dateToHHMMSS } from \"../../utils\"\nimport { DiscordData, DiscordIdentify, DiscordResume, DiscordSocketPayload, OPOut } from \"../discord-classes\"\nimport { DiscordClient } from \"../DiscordClient\"\nimport { DiscordEvent, handlers, isDiscordEventType } from \"./handlers/handlers\"\n\nexport class DiscordWs {\n    readonly client: DiscordClient\n\n    constructor(client: DiscordClient) {\n        this.client = client\n    }\n\n    latency: number | null = null\n    socket: WebSocket | null = null\n    sessionId: string | null = null\n    \n    _hbInterval!: number\n    _hbTimerId!: number\n    _lastHb!: number\n    _sequenceId: number | null = null\n    \n    login(token: string, resume: boolean = false) {\n        console.log(resume ? 'Resuming...': 'Discord login start')\n    \n        const socket = new WebSocket('wss://gateway.discord.gg/?v=9&encoding=json') //TODO: get gateway\n    \n        socket.addEventListener('open', () => {\n            console.log('Connected to websocket')\n            this.socket = socket\n        })\n    \n        socket.addEventListener('close', event => {\n            console.warn(`Discord WS Closed! \"${event.reason}\", Code: ${event.code}`)\n            window.clearInterval(this._hbTimerId)\n\n            this.client.voiceWs?.close()\n\n            if (event.code > 2000) this.login(token, true)\n        })\n    \n        socket.addEventListener('message', event => {\n            if (!this.socket) {\n                console.warn('UNHANDLED MESSAGE')\n            }\n\n            const object: any = JSON.parse(event.data)\n            console.debug(object)\n            const op: number = object.op\n            const t: DiscordEvent = object.t\n            const s: number = object.s\n            const d: any = object.d\n    \n            switch (op) {\n            case 10:\n                this._handleHello(token, resume, d)\n                break\n            case 11:\n                this.latency = Date.now() - this._lastHb\n                console.debug(`...Received (latency: ${this.latency})`)\n                break\n            case 0:\n                this._sequenceId = s\n                if (!this._handleEvent(t, d)) this._logUnknownEvent(object)\n                break\n            case 7:\n            case 9:\n                //this.close()\n                this.login(token, true)\n                break\n            default:\n                this._logUnknownEvent(object)\n            }\n        });\n    }\n    \n    close() {\n        if (!this.socket) return\n        console.log('Shutting down discord')\n        this.socket.close(1000)\n    }\n\n    send<OP extends OPOut>(op: OP, data: DiscordData<OP>) {\n        const payload = JSON.stringify({\n            op: op,\n            d: data\n        })\n        console.log(`>>> ${payload}`)\n        this.socket?.send(payload)\n    }\n\n    _handleEvent(t: string, d: any) {\n        if (!isDiscordEventType(t)) return false\n        const handler = handlers.get(t)\n        if (!handler) return false\n        handler.then(v => v(this.client, d))\n        return true\n    }\n    \n    _logUnknownEvent(event: {}) {\n        console.log('Unknown event:')\n        console.log(event);\n    }\n    \n    _heartbeat(sequenceId: number | null) {\n        if (this._hbTimerId !== window.currentDiscordHbTimerId) {\n            //console.log('Heartbeat cancelled')\n            window.clearInterval(this._hbTimerId)\n            //this.socket.close(1000)\n        } else {\n            console.debug(`[${dateToHHMMSS(new Date())}]: Heartbeat... (${this.sessionId})`)\n            this.socket?.send(JSON.stringify({\n                op: 1,\n                d: sequenceId\n            }))\n        }\n        return Date.now()\n    }\n\n    _handleHello(token: string, resume: boolean, d: { heartbeat_interval: number }) {\n        // Manage heartbeats\n        this._hbInterval = d.heartbeat_interval\n        console.log(`Heartbeat interval: ${this._hbInterval}`)\n        this._hbTimerId = window.setInterval(() => {\n            this._lastHb = this._heartbeat(this._sequenceId)\n        }, this._hbInterval)\n        window.currentDiscordHbTimerId = this._hbTimerId\n        console.log(window.currentDiscordHbTimerId)\n\n        // Identify\n        if (!resume) {\n            console.log('Identifying')\n            this.send(2, {\n                token: token,\n                capabilities: 125,\n                presence: {\n                    activities: [/*{\n                        name: 'Live',\n                        type: 1,\n                        url: 'https://twitch.tv/hallowelt100',\n                        \n                    }*/],\n                    afk: false,\n                    status: 'online'\n                },\n                properties: {\n                    os: 'Windows',\n                    browser: 'Chrome'\n                }\n            } as DiscordIdentify)\n        } else {\n            this.send(6, {\n                token: token,\n                session_id: this.sessionId,\n                seq: this._sequenceId\n            } as DiscordResume)\n        }\n    }\n}","import { EventEmitter } from \"./EventEmitter\";\nimport { DiscordGuild } from \"./classes/DiscordGuild\";\nimport { CachedManager } from \"./classes/util\";\nimport { DiscordUserPartial } from \"./discord-classes\";\nimport { DiscordVoiceWs } from \"./voice/DiscordVoiceWs\";\nimport { DiscordWs } from \"./ws/DiscordWs\";\nimport { DiscordMessage } from \"./classes/DiscordMessage\";\n\nexport class DiscordClient extends EventEmitter<DiscordClientEvents> {\n    token: string\n    constructor(token: string) {\n        super()\n        this.token = token\n    }\n\n    readonly ws = new DiscordWs(this)\n\n\n    guilds: CachedManager<DiscordGuild> = new CachedManager(this)\n\n    setGuilds(guilds: DiscordGuild[]) {\n        this.guilds.clear()\n        guilds.forEach(g => {\n            this.guilds.cache.set(g.id, g)\n        })\n    }\n\n    getGuild(id: string) {\n        return this.guilds.resolve(id)\n    }\n\n    login() {\n        this.ws.login(this.token)\n    }\n\n    close() {\n        this.voiceWs?.close()\n        this.ws.close()\n    }\n\n    user: DiscordUserPartial | undefined\n    voiceSessionId: string | undefined\n    voiceServer: { endpoint: string, guild_id: string, token: string } | undefined\n    voiceWs: DiscordVoiceWs | undefined\n\n    connectVoice() {\n        /*if (this.user) {\n            console.error('NO USER ID');\n            return\n        }*/\n        this.voiceWs = new DiscordVoiceWs(this.voiceSessionId!, this.user!.id, this.voiceServer!)\n        this.voiceWs.connect()\n    }\n\n    static request(\n        method: 'GET' | 'POST' | 'PATCH' | 'DELETE' | 'PUT', \n        route: string[], \n        data?: {}, \n        json: boolean | undefined = true, \n        query: string[] = [], \n        api: string = API_ROOT\n    ) {\n        const token = window.localStorage.getItem('token')!\n        return fetch(`https://${api}/${route.join('/')}${query.length !== 0 ? `?${query.join('&')}` : \"\"}`, {\n            method: method,\n            body: data ? JSON.stringify(data) : undefined,\n            headers: {\n                'Authorization': token,\n                ...(json ? { 'Content-Type':'application/json' } : undefined)\n            }\n        })\n    }\n\n    static getSnowflakeCreatedAt(snowflake: string) {\n        const dec = Number.parseInt(snowflake)\n        return (dec >> 22) + 1420070400000\n    }\n\n    static getCreatedAt({ id }: { id: string }) {\n        return this.getSnowflakeCreatedAt(id)\n    }\n}\n\n/*interface TypedEventEmitter {\n    on<K extends keyof DiscordClientEvents>(event: K, listener: (...args: DiscordClientEvents[K]) => void): this\n    on<S extends string | symbol>(event: Exclude<S, keyof DiscordClientEvents>, listener: (...args: any[]) => void): this;\n}*/\n\nexport interface DiscordClientEvents {\n    [key: string]: [...any] | any[]\n\n    ready: []\n    message_create: [message: DiscordMessage]\n}\n\nconst API_ROOT = \"discord.com/api/v9\"","export function dateToTimestampString(date: Date, isNow: boolean = false) {\n    const now = isNow ? date : new Date();\n    //const diff = now.getTime() - date.getTime();\n    //if (diff < 60 * 1000) return `A few seconds ago`\n    if (date.getMonth() === now.getMonth() && date.getFullYear() === now.getFullYear()) {\n        const dayDiff = date.getDate() - now.getDate();\n        if (dayDiff <= 0 && dayDiff >= -1) return `${dayDiff === 0 ? 'Today' : 'Yesterday'} at ${num2Chars(date.getHours())}:${num2Chars(date.getMinutes())}`\n    }\n    return `${num2Chars(date.getDate())}/${num2Chars(date.getMonth())}/${num2Chars(date.getFullYear())}`\n}\n\nexport function dateToHHMMSS(date: Date) {\n    return `${num2Chars(date.getHours())}:${num2Chars(date.getMinutes())}:${num2Chars(date.getSeconds())}`\n}\n\nfunction num2Chars(n: number) {\n    if (typeof(n) !== 'number') return\n    const s = n.toString();\n    if (s.length === 2) return s\n    if (s.length === 1) return `0${s}`\n    return s.substring(s.length - 2)\n}\n\nexport function dateToDateString(date: Date) {\n    return `${date.getDate()} ${monthNames[date.getMonth()]} ${date.getFullYear()}`\n}\n\nconst monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n\nexport function colorIntToCss(color: number) {\n    return `rgb(${color % (256 * 256 * 256) / (256 * 256)}, ${color % (256 * 256) / 256}, ${color % 256})`\n}","import { DiscordClient } from \"../DiscordClient\"\n\nexport const DISCORD_IMAGE_BASE_URL = \"https://cdn.discordapp.com\"\n\nexport interface StaticImageURLOptions {\n    format: 'webp' | 'gif' | 'png' | 'jpg' | 'jpeg' | 'json'\n    size?: 16 | 32 | 64 | 128 | 256 | 512 | 1024 | 2048 | 4096\n}\n\nexport function parseStaticImageURLOptions(options?: Partial<StaticImageURLOptions>) {\n    if (!options) return ''\n    const size = options.size\n    return `.${options.format ?? 'webp'}${size ? `?size=${size}` : ''}`\n}\n\nexport class CachedManager<V extends { id: string }> {\n    readonly client: DiscordClient\n    readonly cache: Map<string, V> = new Map()\n\n    protected loaded = false\n\n    resolve(idOrInstance: string | V) {\n        return typeof idOrInstance === 'string' ? this.cache.get(idOrInstance) : idOrInstance\n    }\n\n    resolveId(idOrInstance: string | V) {\n        return typeof idOrInstance === 'string' ? idOrInstance : idOrInstance.id\n    }\n\n    clear() {\n        this.cache.clear()\n    }\n\n    filter(predicate: (value: V) => unknown) {\n        const result: V[] = []\n        this.cache.forEach(v => {\n            if (predicate(v)) result.push(v)\n        })\n        return result\n    }\n\n    constructor(client: DiscordClient) {\n        this.client = client\n    }\n}","import { DiscordClient } from \"../../DiscordClient\";\n\nconst EVENTS = {\n    READY: 'ready',\n    MESSAGE_CREATE: 'messageCreate',\n    GUILD_MEMBERS_CHUNK: 'guildMembersChunk',\n    GUILD_MEMBER_LIST_UPDATE: 'guildMemberListUpdate',\n    VOICE_STATE_UPDATE: 'voiceStateUpdate',\n    VOICE_SERVER_UPDATE: 'voiceServerUpdate'\n}\n\ntype Handler = Promise<(client: DiscordClient, d: any) => void>\n\nconst handlers = new Map<DiscordEvent, Handler>()\n\nfor (const name in EVENTS) {\n    handlers.set(name as DiscordEvent, import(`./${name}.ts`).then((v) => v.default as Handler))\n}\n\nexport { handlers };\n\nexport type DiscordEvent = keyof typeof EVENTS\n\nexport function isDiscordEventType(t: string): t is DiscordEvent {\n    return t in EVENTS\n}","import  { Component, CSSProperties } from 'react'\nimport Button, { ButtonClickListener } from '../components/Button'\nimport TextInput from '../components/TextInput'\nimport { channelIcon } from '../sidebar/Channels'\nimport { toggleMemberListVisible } from './ChatContainer'\n\nimport './ChatContainer.css'\n\nexport default class Header extends Component<{\n    channelName?: string\n}> {\n    render() {\n        return (\n            <section id=\"header\">\n                {this.props.channelName ? (<><div id=\"header-channel-info\">\n                    <div>\n                    <div id=\"header-channel-icon\">\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M5.88657 21C5.57547 21 5.3399 20.7189 5.39427 20.4126L6.00001 17H2.59511C2.28449 17 2.04905 16.7198 2.10259 16.4138L2.27759 15.4138C2.31946 15.1746 2.52722 15 2.77011 15H6.35001L7.41001 9H4.00511C3.69449 9 3.45905 8.71977 3.51259 8.41381L3.68759 7.41381C3.72946 7.17456 3.93722 7 4.18011 7H7.76001L8.39677 3.41262C8.43914 3.17391 8.64664 3 8.88907 3H9.87344C10.1845 3 10.4201 3.28107 10.3657 3.58738L9.76001 7H15.76L16.3968 3.41262C16.4391 3.17391 16.6466 3 16.8891 3H17.8734C18.1845 3 18.4201 3.28107 18.3657 3.58738L17.76 7H21.1649C21.4755 7 21.711 7.28023 21.6574 7.58619L21.4824 8.58619C21.4406 8.82544 21.2328 9 20.9899 9H17.41L16.35 15H19.7549C20.0655 15 20.301 15.2802 20.2474 15.5862L20.0724 16.5862C20.0306 16.8254 19.8228 17 19.5799 17H16L15.3632 20.5874C15.3209 20.8261 15.1134 21 14.8709 21H13.8866C13.5755 21 13.3399 20.7189 13.3943 20.4126L14 17H8.00001L7.36325 20.5874C7.32088 20.8261 7.11337 21 6.87094 21H5.88657ZM9.41045 9L8.35045 15H14.3504L15.4104 9H9.41045Z\"></path></svg>\n                    </div>\n                    <h3>{this.props.channelName}</h3></div>\n                </div>\n                <div id=\"header-button-row\">\n                    <div>\n                    <button onClick={() => console.log('HELP')}>\n                        <svg x=\"0\" y=\"0\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12 2C6.486 2 2 6.487 2 12C2 17.515 6.486 22 12 22C17.514 22 22 17.515 22 12C22 6.487 17.514 2 12 2ZM12 18.25C11.31 18.25 10.75 17.691 10.75 17C10.75 16.31 11.31 15.75 12 15.75C12.69 15.75 13.25 16.31 13.25 17C13.25 17.691 12.69 18.25 12 18.25ZM13 13.875V15H11V12H12C13.104 12 14 11.103 14 10C14 8.896 13.104 8 12 8C10.896 8 10 8.896 10 10H8C8 7.795 9.795 6 12 6C14.205 6 16 7.795 16 10C16 11.861 14.723 13.429 13 13.875Z\"></path></svg>\n                    </button>\n                    <button>\n                        <svg x=\"0\" y=\"0\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M19 3H4.99C3.88 3 3.01 3.89 3.01 5L3 19C3 20.1 3.88 21 4.99 21H19C20.1 21 21 20.1 21 19V5C21 3.89 20.1 3 19 3ZM19 15H15C15 16.66 13.65 18 12 18C10.35 18 9 16.66 9 15H4.99V5H19V15Z\" fill=\"currentColor\"></path></svg>\n                    </button>\n                    <SearchBar/>\n                    <button {/*toggle={true}*/...{}} onClick={toggleMemberListVisible}>\n                        <svg x=\"0\" y=\"0\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14 8.00598C14 10.211 12.206 12.006 10 12.006C7.795 12.006 6 10.211 6 8.00598C6 5.80098 7.794 4.00598 10 4.00598C12.206 4.00598 14 5.80098 14 8.00598ZM2 19.006C2 15.473 5.29 13.006 10 13.006C14.711 13.006 18 15.473 18 19.006V20.006H2V19.006Z\"></path><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14 8.00598C14 10.211 12.206 12.006 10 12.006C7.795 12.006 6 10.211 6 8.00598C6 5.80098 7.794 4.00598 10 4.00598C12.206 4.00598 14 5.80098 14 8.00598ZM2 19.006C2 15.473 5.29 13.006 10 13.006C14.711 13.006 18 15.473 18 19.006V20.006H2V19.006Z\"></path><path fill=\"currentColor\" d=\"M20.0001 20.006H22.0001V19.006C22.0001 16.4433 20.2697 14.4415 17.5213 13.5352C19.0621 14.9127 20.0001 16.8059 20.0001 19.006V20.006Z\"></path><path fill=\"currentColor\" d=\"M14.8834 11.9077C16.6657 11.5044 18.0001 9.9077 18.0001 8.00598C18.0001 5.96916 16.4693 4.28218 14.4971 4.0367C15.4322 5.09511 16.0001 6.48524 16.0001 8.00598C16.0001 9.44888 15.4889 10.7742 14.6378 11.8102C14.7203 11.8418 14.8022 11.8743 14.8834 11.9077Z\"></path></svg>\n                    </button>\n                    <button>\n                        <svg x=\"0\" y=\"0\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M22 12L12.101 2.10101L10.686 3.51401L12.101 4.92901L7.15096 9.87801V9.88001L5.73596 8.46501L4.32196 9.88001L8.56496 14.122L2.90796 19.778L4.32196 21.192L9.97896 15.536L14.222 19.778L15.636 18.364L14.222 16.95L19.171 12H19.172L20.586 13.414L22 12Z\"></path></svg>\n                    </button>\n                    <button>\n                        <svg x=\"0\" y=\"0\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M18 9V14C18 15.657 19.344 17 21 17V18H3V17C4.656 17 6 15.657 6 14V9C6 5.686 8.686 3 12 3C15.314 3 18 5.686 18 9ZM11.9999 21C10.5239 21 9.24793 20.19 8.55493 19H15.4449C14.7519 20.19 13.4759 21 11.9999 21Z\"></path></svg>\n                    </button>\n                    <button>\n                        <svg x=\"0\" y=\"0\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"><path fill=\"currentColor\" d=\"M5.43309 21C5.35842 21 5.30189 20.9325 5.31494 20.859L5.99991 17H2.14274C2.06819 17 2.01168 16.9327 2.02453 16.8593L2.33253 15.0993C2.34258 15.0419 2.39244 15 2.45074 15H6.34991L7.40991 9H3.55274C3.47819 9 3.42168 8.93274 3.43453 8.85931L3.74253 7.09931C3.75258 7.04189 3.80244 7 3.86074 7H7.75991L8.45234 3.09903C8.46251 3.04174 8.51231 3 8.57049 3H10.3267C10.4014 3 10.4579 3.06746 10.4449 3.14097L9.75991 7H15.7599L16.4523 3.09903C16.4625 3.04174 16.5123 3 16.5705 3H18.3267C18.4014 3 18.4579 3.06746 18.4449 3.14097L17.7599 7H21.6171C21.6916 7 21.7481 7.06725 21.7353 7.14069L21.4273 8.90069C21.4172 8.95811 21.3674 9 21.3091 9H17.4099L17.0495 11.04H15.05L15.4104 9H9.41035L8.35035 15H10.5599V17H7.99991L7.30749 20.901C7.29732 20.9583 7.24752 21 7.18934 21H5.43309Z\"></path><path fill=\"currentColor\" d=\"M13.4399 12.96C12.9097 12.96 12.4799 13.3898 12.4799 13.92V20.2213C12.4799 20.7515 12.9097 21.1813 13.4399 21.1813H14.3999C14.5325 21.1813 14.6399 21.2887 14.6399 21.4213V23.4597C14.6399 23.6677 14.8865 23.7773 15.0408 23.6378L17.4858 21.4289C17.6622 21.2695 17.8916 21.1813 18.1294 21.1813H22.5599C23.0901 21.1813 23.5199 20.7515 23.5199 20.2213V13.92C23.5199 13.3898 23.0901 12.96 22.5599 12.96H13.4399Z\"></path></svg>\n                    </button>\n                    </div>\n                </div></>) : null}\n            </section>\n        )\n    }\n}\n\nclass SearchBar extends Component {\n    render() {\n        return (\n            <div id=\"header-search-bar\">\n                <input placeholder='Search'/>\n                {/*<button style={{\n                    width: 20,\n                    height: 16,\n                    margin: 4,\n                    color: '#cccccc'\n                }}>\n                {true ?\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M21.707 20.293L16.314 14.9C17.403 13.504 18 11.799 18 10C18 7.863 17.167 5.854 15.656 4.344C14.146 2.832 12.137 2 10 2C7.863 2 5.854 2.832 4.344 4.344C2.833 5.854 2 7.863 2 10C2 12.137 2.833 14.146 4.344 15.656C5.854 17.168 7.863 18 10 18C11.799 18 13.504 17.404 14.9 16.314L20.293 21.706L21.707 20.293ZM10 16C8.397 16 6.891 15.376 5.758 14.243C4.624 13.11 4 11.603 4 10C4 8.398 4.624 6.891 5.758 5.758C6.891 4.624 8.397 4 10 4C11.603 4 13.109 4.624 14.242 5.758C15.376 6.891 16 8.398 16 10C16 11.603 15.376 13.11 14.242 14.243C13.109 15.376 11.603 16 10 16Z\"></path></svg>\n                    : <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z\"></path></svg>}\n                </button>*/}\n            </div>\n        )\n    }\n}","import { Component, createRef, RefObject } from 'react'\nimport { openGameUrl } from '..'\nimport { DiscordClient } from '../discord/DiscordClient'\n\nexport default class Library extends Component {\n    apps: any[] = []\n    componentDidMount() {\n        DiscordClient.request('GET', ['users', '@me', 'library'])\n\n        DiscordClient.request('GET', ['applications', 'detectable']).then(value => \n            value.json()\n        ).then(apps => {\n            if (!Array.isArray(apps)) return\n            this.apps = apps\n            console.log(apps)\n        })\n    }\n\n    render() {\n        return (\n            <div style={{\n                paddingLeft: 50,\n                paddingRight: 50,\n                paddingTop: 50,\n                paddingBottom: 50,\n                overflow: 'auto'\n            }}>\n                <Game name=\"Mini Motorways\" type=\"steam\" id=\"1127500\"/>\n                <Game name=\"Among Us\" type=\"steam\" id=\"945360\"/>\n                <Game name=\"Need for Speed Payback\" type=\"origin\" id=\"193632\" icon=\"1042195_LB_231x326_en_US_%5E_2017-05-23-18-38-43_0013d0e637cb8cd32350c8d0839ff423db6f476d\"/>\n                <Game name=\"GTA V\" type=\"windows\" id=\"D:\\\\Program Files\\\\Rockstar Games\\\\Grand Theft Auto V\\\\GTA5.exe\" icon=\"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fmir-s3-cdn-cf.behance.net%2Fproject_modules%2Fdisp%2F035e5912317673.562666e58b958.jpg&f=1&nofb=1\"/>\n                <Game name=\"Rocket League\" type=\"epicgames\" id=\"\" icon=\"https://cdn1.epicgames.com/salesEvent/salesEvent/EGS_OfferPortraitImage_1200x1600_1200x1600-b5dd3a57c63f33d7a2831993327dcc21?h=330&resize=1&w=220\"/>\n            </div>\n        )\n    }\n}\n\ntype GameLauncherType = 'steam' | 'origin' | 'windows' | 'epicgames' | 'minecraft'\n\ntype GameProps = {\n    name: string\n    type: GameLauncherType\n    id: string\n    icon?: string\n}\n\nclass Game extends Component<GameProps, { hover: boolean }> {\n    ref: RefObject<any>\n\n    imageUrl: string\n    gameUrl: string\n\n    constructor(props: GameProps) {\n        super(props)\n        this.ref = createRef()\n        this.state = {\n            hover: false\n        }\n\n        switch (this.props.type) {\n        case 'steam':\n            this.imageUrl = `https://steamcdn-a.akamaihd.net/steam/apps/${this.props.id}/library_600x900_2x.jpg`\n            this.gameUrl = `steam://run/${this.props.id}`\n            break\n        case 'origin':\n            this.imageUrl = `https://originassets.akamaized.net/origin-com-store-final-assets-prod/${this.props.id}/231.0x326.0/${this.props.icon}.jpg`\n            this.gameUrl = `origin2://game/launch/?offerIds=${this.props.id}`\n            break\n        case 'windows':\n            this.imageUrl = this.props.icon ?? ''\n            this.gameUrl = this.props.id\n            break\n        case 'epicgames':\n            this.imageUrl = this.props.icon ?? ''\n            this.gameUrl = this.props.id\n            break\n        case 'minecraft':\n            this.imageUrl = 'https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.mobygames.com%2Fimages%2Fcovers%2Fl%2F489736-minecraft-windows-apps-front-cover.jpg&f=1&nofb=1'\n            this.gameUrl = `java -jar`\n            break\n        }\n    }\n\n    _setStyle() {\n        const hover = this.state.hover\n        this.ref?.current.setAttribute('style', `\n        background-image: \n            linear-gradient(150deg, #ffffff3f, transparent, transparent, transparent, #000000af), \n            url(${this.imageUrl}); \n        background-size: 220px 330px;\n        filter: saturate(120%);\n        width: 220px;\n        height: 330px;\n        margin: 10px 20px 20px 10px;\n        ${hover ? 'box-shadow: 0 0 5px 1px gray' : ''};\n        `)\n    }\n\n    /*\n    background-size: ${!hover ? '220px 330px' : '236px 354px'}\n    width: ${!hover ? '220px' : '236px'};\n        height: ${!hover ? '330px' : '354x'};\n        margin: ${!hover ? '10px 20px 20px 10px' : '10px 12px 7px 2px'};\n    */\n\n    componentDidMount() { this._setStyle() }\n    componentDidUpdate() { this._setStyle() }\n\n    render() {\n        return (\n            <div\n            className=\"Game\"\n            ref={this.ref}\n            onMouseEnter={() => this.setState({ hover: true })}\n            onMouseLeave={() => this.setState({ hover: false })}\n            onClick={() => { openGameUrl(this.gameUrl) }}\n            >\n                <svg width=\"32\" height=\"32\" viewBox={launcherLogoVieyBoxes[this.props.type]} version=\"1.1\" preserveAspectRatio=\"xMidYMid\" style={{ \n                    marginLeft: 180, //this.state.hover ? 188 : 180,\n                    marginRight: 8,\n                    marginTop: 290\n                }}><g>\n                    {launcherLogos[this.props.type]}\n                </g></svg>\n            </div>\n        )\n    }   \n}\n\n\nconst launcherLogos = {\n    steam: <path d=\"M127.778579,0 C60.4203546,0 5.24030561,52.412282 0,119.013983 L68.7236558,147.68805 C74.5451924,143.665561 81.5845466,141.322185 89.1497766,141.322185 C89.8324924,141.322185 90.5059824,141.340637 91.1702465,141.377541 L121.735621,96.668877 L121.735621,96.0415165 C121.735621,69.1388208 143.425688,47.2457835 170.088511,47.2457835 C196.751333,47.2457835 218.441401,69.1388208 218.441401,96.0415165 C218.441401,122.944212 196.751333,144.846475 170.088511,144.846475 C169.719475,144.846475 169.359666,144.83725 168.99063,144.828024 L125.398299,176.205276 C125.425977,176.786507 125.444428,177.367738 125.444428,177.939743 C125.444428,198.144443 109.160732,214.575753 89.1497766,214.575753 C71.5836817,214.575753 56.8868387,201.917832 53.5655182,185.163615 L4.40997549,164.654462 C19.6326942,218.967277 69.0834655,258.786219 127.778579,258.786219 C198.596511,258.786219 256,200.847629 256,129.393109 C256,57.9293643 198.596511,0 127.778579,0 Z M80.3519677,196.332478 L64.6033732,189.763644 C67.389592,195.63131 72.2239585,200.539484 78.6359521,203.233444 C92.4932392,209.064206 108.472481,202.430791 114.247888,188.435116 C117.043333,181.663313 117.061785,174.190342 114.294018,167.400086 C111.526251,160.609831 106.295171,155.31417 99.5879487,152.491048 C92.9176301,149.695603 85.7767911,149.797088 79.5031858,152.186594 L95.777656,158.976849 C105.999942,163.276114 110.834309,175.122157 106.571948,185.436702 C102.318812,195.751247 90.574254,200.631743 80.3519677,196.332478 Z M202.30901,96.0424391 C202.30901,78.1165345 187.85204,63.5211763 170.092201,63.5211763 C152.323137,63.5211763 137.866167,78.1165345 137.866167,96.0424391 C137.866167,113.968344 152.323137,128.554476 170.092201,128.554476 C187.85204,128.554476 202.30901,113.968344 202.30901,96.0424391 Z M145.938821,95.9870838 C145.938821,82.4988323 156.779242,71.5661525 170.138331,71.5661525 C183.506646,71.5661525 194.347066,82.4988323 194.347066,95.9870838 C194.347066,109.475335 183.506646,120.408015 170.138331,120.408015 C156.779242,120.408015 145.938821,109.475335 145.938821,95.9870838 Z\" fill=\"currentColor\"></path>,\n    origin: <path d=\"M127.615795,2.37396105 C128.316104,4.17579665 127.105155,5.82443974 126.113051,7.21776199 C119.08808,17.1752744 113.565286,28.3102833 111.362232,40.2811829 C110.500866,42.7381045 110.691102,44.5685497 111.362232,44.7728064 C124.996364,43.576446 140.374543,43.7140513 153.797123,46.5809395 C178.220385,51.4976892 201.046067,63.8552175 218.590256,81.5234192 C236.083381,99.0092488 248.360665,121.667149 253.328479,145.908039 C258.836114,172.15502 255.757675,200.094414 244.742404,224.53956 C221.384195,274.45843 182.006429,316.681201 133.82374,343.446118 C132.269931,344.168312 130.030402,344.197492 128.96535,342.650977 C127.710629,341.031513 128.228565,338.726331 129.468695,337.252765 C135.968434,328.185227 140.50585,317.760843 142.97152,306.891471 C143.445688,304.637352 144.094932,302.354055 143.89797,300.034283 C143.102829,298.99841 141.78975,299.31209 140.673633,299.348564 C117.286244,301.690221 93.2204323,297.510254 72.0871623,287.180702 C49.4511468,276.274855 30.2437253,258.446166 17.5433376,236.773075 C5.77669476,216.836165 -0.409364314,193.616559 0.0210336979,170.455313 C0.101277286,149.198029 5.90070774,128.115824 16.113541,109.506582 C39.8875579,63.8625124 77.2154636,25.3455411 122.283238,0.462702249 C124.172612,-0.587760605 126.966551,0.192791655 127.615795,2.37396105 L127.615795,2.37396105 Z M120.970159,122.440406 C107.058821,124.307896 94.2271262,132.478162 86.4361931,144.120792 C81.1619942,152.115982 77.9668364,161.613917 78.0324904,171.22857 C77.6385667,184.11133 82.7741629,197.015974 91.6739175,206.295063 C99.4502601,214.669586 110.253979,220.126157 121.582929,221.585133 C133.116136,223.109763 145.159985,220.410657 154.92783,214.071405 C164.856163,207.768628 172.420955,197.818411 175.80578,186.547821 C182.15962,166.982949 174.543765,144.062434 157.969796,131.974816 C147.560001,124.052575 133.911279,120.536442 120.970159,122.440406 L120.970159,122.440406 L120.970159,122.440406 Z\" fill=\"currentColor\"></path>,\n    windows: <path d=\"M0 14L0 28L28 28L28 0L0 0L0 14ZM30 14L30 28L58 28L58 0L30 0L30 14ZM0 44L0 58L28 58L28 30L0 30L0 44ZM30 44L30 58L58 58L58 30L30 30L30 44Z\" fill=\"currentColor\"></path>,\n    epicgames: <><path fill=\"currentColor\" d=\"M250.8.9H25C6.8.9 0 7.7 0 26v220.9c0 2.1.1 4 .3 5.8.4 4 .5 7.9 4.2 12.3.4.4 4.2 3.3 4.2 3.3 2 1 3.4 1.7 5.7 2.7l111.1 46.6c5.8 2.6 8.2 3.7 12.4 3.6 4.2.1 6.6-.9 12.4-3.6L261.4 271c2.3-.9 3.7-1.7 5.7-2.7 0 0 3.8-2.8 4.2-3.3 3.7-4.4 3.8-8.3 4.2-12.3.2-1.8.3-3.7.3-5.8V26c0-18.3-6.7-25.1-25-25.1\"/><path fill=\"#000\" d=\"M235.6 223l-.1.5-.1.6-.1.5-.2.5-.1.5-.2.5-.2.5-.2.4-.2.5-.3.4-.3.4-.3.4-.3.4-.3.4-.4.4-.3.3-.4.4-.4.3-.4.3-.4.2-.4.3-.5.3-.5.2-.5.3-.5.2-.5.2-.5.2v-.1l-.5.2-.5.1-.9.2-.5.1-.5.1-.5.1-.5.1-.6.1-.5.1h-2l-.5-.1h-.6l-.5-.1-.5-.1-.6-.1-.5-.1-.5-.1-.5-.1-.5-.1-.5-.1-.5-.1-.5-.2-.5-.1-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.3-.4-.3-.5-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.4.3-.4.4-.4.3-.4.4-.4.3-.4.3-.4.4-.4.3-.4.4-.4.3-.4.4-.4.3-.4.3-.4.4-.4.3-.4.4-.4.3-.4.4.3.5.3.4.3.5.3.4.3.5.3.4.3.5.2.4.3.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.1 1 .2.6.1.5.1h.5l.6.1h1.1l.6-.1.5-.1.5-.1.5-.1.4-.2.4-.2.4-.3.3-.4.2-.4.2-.5.1-.5v-.1l-.1-.6-.2-.5-.3-.4-.4-.3-.4-.3-.4-.2-.5-.2-.5-.2-.6-.3-.4-.1-.4-.1-.5-.2-.5-.1-.5-.2-.5-.1-.6-.2-.5-.1-.6-.2-.5-.1-.5-.2-.5-.1-.5-.2-.5-.2-.5-.1-.5-.2-.5-.2-.5-.2-.6-.2-.5-.2-.5-.2-.5-.2-.5-.3-.5-.3-.4-.3-.5-.3-.4-.3-.4-.3-.4-.3-.4-.4-.4-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.5-.2-.4-.2-.4-.1-.5-.2-.4-.1-.5-.1-.5-.1-.5-.1-.5-.1-.6v-1.2l.1-.5.1-.5.1-.5.1-.5.1-.5.2-.5.1-.5.2-.5.2-.5.2-.5.3-.5.3-.5.3-.4.3-.4.4-.4.4-.4.4-.4.4-.4.4-.3.4-.3.4-.3.4-.3.5-.3.5-.2.5-.3.5-.2.5-.2.5-.2.5-.2.4-.1.5-.1.5-.1.5-.1.5-.1.5-.1.5-.1.5-.1.5-.1h2.2l.6.1.6.1h.5l.6.1.5.1.6.1.5.1.5.1.5.1.5.1.5.1.5.2.5.2.5.1.5.2.5.2.5.2.5.2.5.2.5.3.4.2.5.3.5.3.4.3.5.3.4.3.4.3.4.3.4.3-.3.4-.3.4-.3.4-.3.4-.3.5-.3.4-.3.4-.3.4-.3.4-.3.4-.3.4-.3.4-.3.5-.3.4-.3.4-1 2.2-.3.4-.4-.3-.5-.3-.4-.3-.4-.3-.5-.2-.4-.3-.5-.2-.4-.2-.5-.2-.4-.2-.5-.2-.4-.2-.6-.2-.5-.2-.5-.2-.5-.1-.3.2-.5-.1-.5-.1-.5-.1-.5-.1h-1.1l-.6.1-.5.1-.5.1-.4.2-.4.2-.5.4-.3.5-.2.5-.1.5v.1l.1.7.2.6.2.3.4.4.5.3.4.3.5.2.6.2.6.2.4.1.4.2.5.1.5.2.5.1.6.2.6.2.6.2.6.1.5.2.6.2.5.1.5.2.5.2.5.2.5.2.5.2.5.1.6.2.5.3.5.2.5.3.5.3.5.3.4.3.4.3.4.3.4.4.4.4.4.4.4.4.3.4.3.5.3.4.3.5.2.4.2.5.1.5.1.5.2 1 .1.5.1.6v1.2l-.7-.6zm-35.5 10.2H171v-37.1h29.3v8.4h-19.6v6.1h17.6v7.9h-17.6v6.3h19.9v8.4h-.5zm-37.1 0h-9.3v-21.9l-.3.4-.3.5-.3.4-.3.4-.3.5-.3.4-.3.4-.3.5-.3.4-.3.4-.3.4-.3.5-.3.4-.3.4-.3.5-.3.4-.3.4-.3.5-.2.4-.3.4-.3.5-.3.4-.3.4-.3.5-.3.4-.2.4-.3.4-.3.5-.3.4-.3.4-.2.5-.3.4-.3.4-.3.5-.3.4h-.2l-.3-.5-.3-.4-.3-.5-.3-.4-.3-.5-.3-.4-.3-.5-.3-.4-.3-.5-.2-.4-.3-.5-.3-.4-.3-.5.5-.5-.3-.5-.3-.4-.3-.5-.3-.4-.3-.5-.3-.4-.2-.3-.3-.4-.3-.5-.3-.4-.3-.5-.3-.4-.3-.5-.2-.3-.3-.5-.3-.4-.3-.5-.3-.4-.3-.5-.3-.4v21.8h-9.6V196H135l.3.4.3.5.3.4.3.5.3.4.3.5.3.4.3.5.3.4.3.4.3.5.3.4.3.5.3.4.3.5.3.4.3.4.3.5.3.4.3.5.3.4.3.5.3.4.2.5.3.4.2.4.3.5.3.4.3.5.3.4.2.5.3.4.3.5.3.4.3-.4.3-.5.3-.4.3-.5.3-.4.3-.5.3-.4.3-.5.3-.4.2-.4.3-.5.3-.4.3-.5.3-.4.3-.5.3-.4.3-.5.3-.4.3-.4.3-.5.3-.4.3-.5.3-.4.3-.5.2-.4.3-.4.3-.5.3-.4.3-.5.3-.4.3-.5.3-.4.3-.5.3-.4h10.4v37.1l-2.3.1zm-58.8-15.3l-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5h8.6l.4-.5zm15.9 15.3h-9.9l-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5H92.8l-.2.5-.2.5-.2.5-.2.5-.2.5-.4.9-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5-.2.5h-10l.2-.5.4-.9.2-.5.2-.5.4-.9.2-.5.2-.5.2-.5.2-.3.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.4-.9.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.4-.9.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.1-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.4-.9.2-.5h9.4l.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.4.9.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.2.5.4.9-1-.4zm-44.4-4.8l-.4.3-.4.3-.4.3-.4.3-.4.3-.4.3-.4.3-.5.3-.5.3-.5.3-.5.2-.5.3-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.1-.5.1-.5.1-.5.1-.5.1-.6.1-.5.1-.6.1-.5.1-.6.1H59l-.5-.1-.6-.1-.5-.1-.5-.1-.5-.1-.5-.1-.5-.1-.5-.1-.5-.1-.5-.1-.5-.1-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.2-.5-.3-.4-.2-.5-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.4-.4-.3-.4-.4-.4-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.4-.2-.4-.3-.5-.3-.4-.2-.5-.2-.5-.2-.5-.2-.5-.2-.4-.2-.5-.1-.5-.2-.5-.1-.5-.2-.5-.1-.5v-.5l-.1-.5v-.5l-.1-.5V212.4l.1-.6.1-.5.1-.5.1-.5.2-.5.1-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.2-.5.3-.5.3-.4.2-.4.3-.4.3-.4.3-.4.3-.4.3-.4.3-.4.4-.4.3-.4.4-.4.4-.4.4-.3.4-.4.4-.3.4-.3.4-.3.4-.3.4-.3.4-.3.5-.3.5-.3.5-.3.5-.2.5-.2.5-.3.4-.2.5-.2.5-.2.5-.1.5-.2.5-.1.5-.2.5-.1.5-.1.5-.1.5-.1.5-.1.5-.1.5-.1H61l.6.1.6.1h.5l.5.1.6.1.5.1.5.1.5.1.5.1.5.1.5.1.5.2.5.1.4.2.5.2.9.4.5.2.5.3.5.2.4.3.5.3.4.3.5.3.4.3.4.3.4.3.4.3.4.4.4.3-.3.4-.4.4-.3.4-.4.4-.3.4-.3.4-.4.4-.3.4-.3.4-.4.4-.3.4-.4.4-.3.4-.3.4-.4.4-.3.4-.4.4-.3.4-.4-.3-.4-.4-.4-.3-.4-.3-.4-.3-.4-.3-.4-.3-.5-.3-.4-.2-.4-.2-.4-.2-.5-.2-.5-.2-.5-.1-.5-.1-.5-.1-.5-.1-.6-.1-.6-.1h-1.1l-.5.1-.5.1-.5.1-.5.1-.5.2-.5.2-.4 1.2-.5.2-.4.3-.4.3-.4.3-.4.3-.4.3-.4.3-.3.4-.4.4-.3.4-.3.4-.3.4-.2.5-.3.4-.2.5-.2.5-.2.5-.2.5-.1.5-.1.5-.1.6v3.7l.1.5.1.5.1.5.2.5.6-.2.2.5.2.5.3.5.5.8.3.4.3.4.4.4.3.4.4.3.4.3.4.3.4.3.4.3.5.2.5.2.5.2.5.2.5.2.5.1.5.1.5.1.6.1h.9l.6-.1.6-.1.5-.1.5-.1.5-.1.5-.1.5-.1.5-.2.4-.2.5-.2.4-.2.4-.3v-5h-7.4v-7.4H76v16.6l-.3.2zM59.4 112.2h22v-17h-22V60.5h22.9v-17H40.7v122.7h41.9v-17H59.4v-37m157.4 3.7v27.7c0 4.9-2.3 7.2-7 7.2h-3.5c-4.9 0-7.2-2.3-7.2-7.2V66.1c0-4.9 2.3-7.2 7.2-7.2h3.1c4.7 0 7 2.3 7 7.2v24h18.3V65c0-15.2-7.3-22.6-22.5-22.6h-9.1c-15.2 0-22.7 7.5-22.7 22.8v79.2c0 15.3 7.5 22.8 22.7 22.8h9.2c15.2 0 22.7-7.5 22.7-22.8v-28.6h-18.2M152 43.5h18.7v122.7H152V43.5zM124.9 98c0 4.9-2.3 7.2-7 7.2h-7.7V60h7.7c4.7 0 7 2.3 7 7.2V98zm-4-54.5H91.6v122.7h18.7v-44.5h10.6c15.2 0 22.7-7.5 22.7-22.8V66.3c0-15.3-7.5-22.8-22.7-22.8zM84.7 277.1h106.9l-54.5 18-52.4-18\"></path></>,\n    minecraft: <path d=\"M13.333 16h-2.666v-2.667H5.333V16H2.667V8h2.666V5.333h5.334V8h2.666v8zM10.667 0H16v5.333h-5.333V0zM0 0h5.333v5.333H0V0z\"/>\n}\n\nconst launcherLogoVieyBoxes = {\n    steam: \"0 0 256 259\",\n    origin: \"0 0 256 344\",\n    windows: \"0 0 62 62\",\n    epicgames: \"0 0 276 322\",\n    minecraft: \"0 0 16 16\"\n}","import { Component } from 'react'\nimport { CallbackHandler, noCallback } from '../Callback'\nimport Header from './Header';\nimport MemberList from './MemberList';\nimport ChatArea from './ChatArea';\nimport { DiscordChannelBase } from '../discord/discord-classes';\nimport Library from '../library/Library';\n\nimport './ChatContainer.css'\nimport { DiscordGuild } from '../discord/classes/DiscordGuild';\n\nconst memberListHandler: CallbackHandler<boolean> = {\n    callback: noCallback\n}\n\nlet memberListVisible = true;\n\nexport function toggleMemberListVisible() {\n    memberListHandler.callback(!memberListVisible)\n    memberListVisible = !memberListVisible\n}\n\nexport function isMemberListVisible() {\n    return memberListVisible\n}\n\ntype ChatContainerProps = {\n    guild: DiscordGuild | null\n    selectedChannel: DiscordChannelBase | null\n}\n\nexport default class ChatContainer extends Component<ChatContainerProps, {\n    memberListVisible: boolean\n    loadMessages: boolean\n}> {\n    constructor(props: ChatContainerProps) {\n        super(props)\n        this.state = {\n            memberListVisible: true,\n            loadMessages: false\n        }\n    }\n\n    componentDidMount() {\n        memberListHandler.callback = visible => this.setState({\n            memberListVisible: visible\n        })\n    }\n\n    componentWillUnmount() {\n        memberListHandler.callback = noCallback\n    }\n\n    render() {\n        console.log('Re-Rendering Chat Container')\n        return (\n            <div id='ChatContainer' className='column'>\n                <Header channelName={this.props.selectedChannel?.name}/>\n                {this.props.guild?.id && this.props.selectedChannel ? <div className='row'>\n                    <ChatArea guildId={this.props.guild?.id} channel={this.props.selectedChannel}/>\n                    {this.state.memberListVisible && this.props.selectedChannel.type !== 6 ? <MemberList channel={this.props.selectedChannel} guild={this.props.guild}/> : null}\n                </div> : <Library/>}\n            </div>\n        )\n    }\n}","import { DiscordAttachment, DiscordChannel, DiscordEmbed, DiscordUserPartial } from \"../discord-classes\"\nimport { DiscordClient } from \"../DiscordClient\"\nimport { DiscordGuild } from \"./DiscordGuild\"\nimport { DiscordMember, DiscordMemberData } from \"./DiscordMember\"\n\nexport class DiscordMessage {\n    readonly client: DiscordClient\n    readonly data: DiscordMessageData\n\n    get activity() { return null } // ?MessageActivity\n\n    get applicationId() { return null } // string\n\n    get attachments() { return this.data.attachments } // Map<string, MessageAttachment>\n\n    get author() { return this.data.author }\n\n    channel: undefined | DiscordChannel<0 | 13 | 12 | 6> // Text/DM/News/Thread\n\n    get channelId() { return this.data.channel_id }\n\n    get components() { return this.data.components }\n\n    get content() { return this.data.content }\n\n    get createdAt() { return DiscordClient.getCreatedAt(this) }\n\n    crosspostable: undefined // boolean\n\n    deletable: undefined // boolean\n\n    deleted = false\n\n    editable: undefined // boolean\n\n    get editedTimestamp() { return this.data.edited_timestamp }\n\n    get embeds() { return this.data.embeds }\n\n    get flags() { return this.data.flags }\n\n    get groupActivityApplication() { return null } // ?ClientApplication\n\n    private _guild: DiscordGuild | null | undefined\n    get guild() {\n        if (this._guild !== undefined) return this._guild\n        return this._guild = this.guildId ? this.client.getGuild(this.guildId) ?? null : null\n    }\n\n    get guildId() { return this.data.guild_id }\n\n    get hasThread() { return null } // boolean\n\n    readonly id: string\n\n    get interaction() { return null } // MessageInteraction\n\n    private _member: DiscordMember | null | undefined\n    get member() {\n        if (this._member !== undefined) return this._member\n        if (this.data.member) this.data.member.user = this.data.author\n        let member = this.guildId && this.data.member ? new DiscordMember(this.guild!, this.data.member) : null\n        if (!member) member = this.guild?.members.resolve(this.author.id) ?? null\n        return this._member = member\n    }\n\n    get mentions() { return this.data.mentions }\n\n    get nonce() { return this.data.nonce }\n\n    partial: undefined // boolean\n\n    pinnable: undefined // boolean\n\n    pinned: undefined // boolean\n\n    reaction: undefined // ReactionManager\n\n    reference: undefined // ?MessageReference\n\n    stickers: undefined // Map<string, Sticker>\n\n    get system() { return null } // boolean\n\n    thread: undefined // ?ThreadChannel\n\n    get tts() { return this.data.tts }\n\n    get type() { return this.data.type }\n\n    get url() { return `` }\n\n    get webhookId() { return null } // ?string\n\n\n    async awaitMessageComponent(/* AwaitMessageComponentOptions*/) {\n        return null // MessageComponentInteraction\n    }\n\n    async awaitReactions(/*AwaitReactionsOptions*/) {\n        return null // Map<string, MessageReaction>\n    }\n\n    async createMessageComponentCollector(/*MessageComponentCollectorOptions*/) {\n        return null // InteractionCollector\n    }\n\n    async createReactionCollector(/*ReactionCollectorOptions*/) {\n        return null // ReactionCollector\n    }\n\n    async crosspost() {\n        return this\n    }\n\n    async delete() {\n        return this\n    }\n\n    async edit(options: string /*| MessagePayload | MessageEditOptions*/) {\n        return this\n    }\n\n    // fetch(- | -Reference | -Webhook)\n\n    async pin() {\n        return this\n    }\n\n    async react(emoji: string) {\n        return this\n    }\n\n    async removeAttachments() {\n        return this\n    }\n\n    async reply(message: string /*| MessagePayload | ReplyMessageOPtions*/) {\n        return this // | Message[]\n    }\n\n    async startThread(/*StartThreadOptions*/) {\n        return null // ThreadChannel\n    }\n\n    async suppressEmbeds(suppres: boolean = true) {\n        return this\n    }\n\n    toString() {\n        return this.content ?? ''\n    }\n\n    async unpin() {\n        return this\n    }\n\n\n    constructor(client: DiscordClient, data: DiscordMessageData) {\n        this.client = client\n        this.data = data\n\n        this.id = data.id\n    }\n}\n\nexport interface DiscordMessageData {\n    type: number\n    tts: boolean\n    timestamp: string\n    referenced_message: DiscordMessageData | null\n    pinned: boolean\n    mentions: (DiscordUserPartial & {\n        member: DiscordMemberData\n    })[]\n    mention_roles: string[]\n    mention_everyone: boolean\n    member?: DiscordMemberData\n    id: string\n    flags: number\n    embeds: DiscordEmbed[]\n    edited_timestamp: any | null\n    content: string | null\n    components: any[]\n    channel_id: string\n    author: DiscordUserPartial\n    attachments: DiscordAttachment[]\n    guild_id: string | null\n    nonce?: string\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'; // './_App' is new, './App' is old\nimport reportWebVitals from './reportWebVitals';\nimport isElectron from 'is-electron';\n\nimport './index.css';\nimport './flex.css';\nimport './theme.css';\n\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('./sw.js', {scope: './'})\n  .then((reg) => {\n    // registration worked\n    console.log('Registration succeeded. Scope is ' + reg.scope);\n  }).catch((error) => {\n    // registration failed\n    console.log('Registration failed with ' + error);\n  });\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\ndeclare global {\n  interface Window {\n    electron: {\n      ping(): void\n      windowButton(action: 'minimize' | 'maximize' | 'close'): void\n      openGameUrl(url: string): void\n      devTools(): void\n      reloadPage(): void\n      udp(ip: string, port: number, ssrc: number): void\n      disconnectUDP(): void\n      udpKey(key: number[]): void\n\n      setUdpReplyHandler(callback: (publicIp: string, publicPort: number) => void): void\n      setPcmHandler(callback: (data: any) => void): void\n    }\n    currentDiscordHbTimerId?: number\n    currentDiscordVWSHbTimerId?: number\n  }\n}\n\nexport const { electron, currentDiscordHbTimerId } = window;\n\nexport function openGameUrl(url: string) {\n  if (isElectron()) window.electron.openGameUrl(url)\n  else window.open(url)\n}\n","import { setVoiceState } from \"../../App\";\nimport { DiscordGuild } from \"../classes/DiscordGuild\";\nimport { DiscordChannel } from \"../discord-classes\";\nimport { DiscordClient } from \"../DiscordClient\";\nimport { DiscordWs } from \"../ws/DiscordWs\";\nimport { DiscordVoiceWs } from \"./DiscordVoiceWs\";\n\nexport function discordConnectVoice(ws: DiscordWs, guild: DiscordGuild, channel: DiscordChannel<2>) {\n    ws.send(4, {\n        guild_id: guild.id,\n        channel_id: channel.id,\n        self_mute: false,\n        self_deaf: false,\n        self_video: false\n    })\n    setVoiceState({\n        channel: channel,\n        state: 'NONE',\n        vws: null\n    })\n}\n\nexport function discordDisconnectVoice(client: DiscordClient) {\n    client.voiceSessionId = undefined\n    client.voiceServer = undefined\n    client.voiceWs?.close()\n    client.ws.send(4, {\n        guild_id: null,\n        channel_id: null,\n        self_mute: false,\n        self_deaf: false,\n        self_video: false\n    })\n}\n\nexport interface DiscordVoiceState {\n    channel: DiscordChannel<2>\n    state: 'NONE' | 'STATE' | 'SERVER' | 'BOTH' | 'VWS' | 'VWS_READY' | 'CONNECTED'\n    vws: DiscordVoiceWs | null\n}","import { Component } from 'react'\nimport { CallbackHandler, noCallback } from '../Callback'\nimport { DiscordGuild } from '../discord/classes/DiscordGuild'\nimport { DiscordMember, DiscordMemberManager } from '../discord/classes/DiscordMember'\nimport { DiscordChannelBase } from '../discord/discord-classes'\n\nconst membersCH: CallbackHandler<DiscordMemberManager> = {\n    callback: noCallback\n}\n\nexport function updateMembers(members: DiscordMemberManager) {\n    membersCH.callback(members)\n}\n\ntype MemberListProps = {\n    channel?: DiscordChannelBase\n    guild?: DiscordGuild\n}\n\ntype MemberListState = {\n    members: DiscordMemberManager | null\n}\n\nexport default class MemberList extends Component<MemberListProps, MemberListState> {\n    constructor(props: MemberListProps) {\n        super(props)\n        this.state = {\n            members: null\n        }\n    }\n\n    componentDidMount() {\n        membersCH.callback = m => {\n            this.setState({ members: m })\n        }\n    }\n\n    componentWillUnmount() {\n        membersCH.callback = noCallback\n    }\n\n    render() {\n        let hoistCache: string | null | undefined = undefined\n        let atOffline = false\n\n        const membersComponents: any[] = []\n        this.state.members?.cache?.forEach((m, i) => {\n            const member = <Member key={i} member={m}/>\n            const notOffline = m.presence.status !== 'offline'\n            if ((hoistCache !== m.hoistedRoleId || !notOffline) && !atOffline) {\n                hoistCache = m.hoistedRoleId\n                const title = notOffline ? (hoistCache === null ? 'ONLINE' : m.roles.resolve(hoistCache)?.name?.toUpperCase()) : 'OFFLINE'\n                if (!notOffline) {\n                    atOffline = true\n                }\n                membersComponents.push(\n                    <>\n                    <div style={{\n                        paddingLeft: 16,\n                        paddingTop: 24,\n                        paddingRight: 8,\n                        color: '#7f7f7f',\n                        fontSize: '12px',\n                        fontWeight: 600\n                    }}>{title}</div>\n                    {member}\n                    </>\n                )\n            } else {\n                membersComponents.push(member)\n            }\n        })\n\n        return (\n            <aside id='MemberList' style={{\n                width: 240,\n            }}>\n                <div role='list' style={{\n                    overflowX: 'hidden',\n                    overflowY: 'auto',\n                    height: 'calc(100% - 72px)',\n                    position: 'absolute',\n                    width: 'inherit',\n                }}>\n                    {membersComponents}\n                </div>\n            </aside>\n        )\n    }\n}\n\ntype MemberProps = {\n    member: DiscordMember\n}\n\nclass Member extends Component<MemberProps> {\n    render() {\n        //const { image, name, status, platform } = getMember(this.props.member)\n        const member = this.props.member\n\n        const image = member.displayAvatarURL({ format: 'webp', size: 128 })!\n        const name = member.displayName\n        const status = member.presence.status\n        const cs = member.presence.client_status\n        const platform = cs?.web === status ? 'web' : cs?.desktop === status ? 'desktop' : cs?.mobile === status ? 'mobile' : 'offline'\n\n        let color: any = member.displayColor ?? 0x7f7f7f\n        color = color ? `${color >> 16} ${(color >> 8) & 0xff} ${color & 0xff}` : '127 127 127'\n        color = status !== 'offline' ? `rgb(${color})` : `rgb(${color} / 30%)`\n        \n        return (\n            <div style={{\n                width: 224,\n                height: 42,\n                marginLeft: 8,\n                paddingTop: 1,\n                paddingBottom: 1,\n                color: '#7f7f7f',\n                fontSize: 16,\n                fontWeight: 500\n            }}>\n                <div style={{\n                    paddingLeft: 8,\n                    paddingRight: 8,\n                }}>\n                    <div role=\"img\" aria-label=\"T0tallyR3al, Online\" style={{\n                        width: 32,\n                        height: 32,\n                        marginRight: 12,\n                        marginTop: 8,\n                        float: 'left'\n                    }}>\n                        <svg width=\"40\" height=\"40\" viewBox=\"0 4 40 32\">\n                            <foreignObject x=\"0\" y=\"0\" width=\"32\" height=\"32\" mask={`url(#svg-mask-avatar-status-${platform})`}>\n                                <div><img width=\"32\" height=\"32\" src={image} alt=\" \" style={{ borderRadius: '100%' }}/></div>\n                            </foreignObject>\n                            <rect width=\"30\" height=\"30\" x=\"10\" y=\"10\" fill={status === 'online' ? 'rgb(59, 165, 93)' : status === 'idle' ? 'rgb(250, 168, 26)' : status === 'dnd' ? 'rgb(237, 66, 69)' : status === 'streaming' ? 'rgb(89, 54, 149)' : '#7f7f7f'} mask={`url(#svg-mask-status-${platform})`}/>\n                        </svg>\n                    </div>\n                    <div style= {{\n                        display: 'inline-block',\n                        marginTop: 12\n                    }}>\n                        <span style={{\n                            height: 18,\n                            display: 'block',\n                            color: color\n                        }}>{name}</span>\n                        {/*<span style={{\n                            display: 'block',\n                            fontSize: 12,\n                            fontWeight: 500\n                        }}>Playing</span>*/}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n/*function getMember(member: DiscordMember) {\n    const avatar = member.avatar ?? member.user.avatar;\n    const image = avatar ? `https://cdn.discordapp.com/avatars/${member.user.id}/${avatar}.webp?size=128` : `https://cdn.discordapp.com/embed/avatars/${Number.parseInt(member.user.discriminator) % 5}.png`\n    const status = member.presence.status\n    const cs = member.presence.client_status\n    const platform = cs.web === status ? 'web' : cs.desktop === status ? 'desktop' : cs.mobile === status ? 'mobile' : 'offline'\n    return {\n        image: member.displayAvatarURL({ format: 'webp', size: 128 })!,\n        name: member.nick ?? member.user.username,\n        status: status,\n        platform: platform,\n    }\n}*/\n\n/*\nconst MembersList = () => {\n    return (\n        <View style={[universalStyle.container, membersListStyles.topContainer]}>\n            <View style={{\n                height: '100%',\n                paddingBottom: 20\n            }}>\n                <SectionList\n                sections={[\n                    \n                ]}\n                renderItem={({item}) => <Member name={item.name} image={item.image} status={item.status}/>}\n                renderSectionHeader={(c) => <RoleHeader name={c.section.role} online={c.section.online}/>}\n                stickySectionHeadersEnabled={true}\n                />\n            </View>\n        </View>\n    )\n}\n\nconst Member = ({name, image, status}) => {\n    return (\n        <View style={membersListStyles.memberContainer1}>\n            <View style={membersListStyles.memberContainer2}>\n                <View style={{\n                    width: 32,\n                    height: 32,\n                    marginRight: 12,\n                    marginTop: 8,\n                }}>\n                    <Image style={membersListStyles.avatar} source={image}/>\n                    {/*<svg width=\"40\" height=\"32\" viewBox=\"0 0 40 32\" class=\"mask-1l8v16 svg-2V3M55\" aria-hidden=\"true\"><foreignObject x=\"0\" y=\"0\" width=\"32\" height=\"32\" mask=\"url(#svg-mask-avatar-status-round-32)\"><div class=\"avatarStack-2Dr8S9\"><img src=\"https://cdn.discordapp.com/avatars/353603367907360768/fb1949c8f45cbec1d2568d4bab9e874e.webp?size=128\" alt=\" \" class=\"avatar-VxgULZ\" aria-hidden=\"true\"/></div></foreignObject><rect width=\"10\" height=\"10\" x=\"22\" y=\"22\" fill=\"hsl(139, calc(var(--saturation-factor, 1) * 47.3%), 43.9%)\" mask=\"url(#svg-mask-status-online)\" class=\"pointerEvents-2zdfdO\"></rect></svg>*//*\n                    </View>\n                    <View style={{\n                        width: '100%',\n                        height: 18,\n                        marginVertical: 12\n                    }}>\n                        <Text style={[universalStyle.text, membersListStyles.username]}>{name}</Text>\n                    </View>\n                </View>\n            </View>\n        );\n    }\n    \n    const RoleHeader = ({name, online}) => {\n        return (\n            <Text style={[universalStyle.text, membersListStyles.roleHeader]}>{`${name === 'everyone' ? 'ONLINE' : name.toUpperCase()}  ${online}`}</Text>\n        );\n    }\n    \n    const membersListStyles = StyleSheet.create({\n        topContainer: {\n            width: 240,\n            height: '100%',\n            backgroundColor: colors.menu,\n            marginTop: 2,\n            flexShrink: 0,\n        },\n        memberContainer1: {\n            width: 224,\n            height: 42,\n            marginLeft: 8,\n            paddingVertical: 1\n        },\n        memberContainer2: {\n            paddingHorizontal: 8,\n            flexDirection: \"row\"\n        },\n        avatar: {\n            width: 32,\n            height: 32,\n            borderRadius: '50%'\n        },\n        roleHeader: {\n            paddingLeft: 16,\n            paddingTop: 24,\n            paddingRight: 8,\n            color: colors.infoText,\n            fontSize: '12px',\n            fontWeight: 600\n        },\n        username: {\n            color: colors.infoText,\n            fontSize: '16px',\n            fontWeight: 500\n        }\n    })*/","import { DiscordChannelBase, DiscordUserPartial } from \"../discord-classes\";\nimport { DiscordGuild } from \"./DiscordGuild\";\nimport { DiscordRole } from \"./DiscordRole\";\nimport { CachedManager, DISCORD_IMAGE_BASE_URL, parseStaticImageURLOptions, StaticImageURLOptions } from \"./util\";\n\nexport class DiscordMemberManager extends CachedManager<DiscordMember> {\n\n    constructor(guild: DiscordGuild) {\n        super(guild.client)\n\n\n    }\n}\n\nexport class DiscordMember {\n    readonly guild: DiscordGuild\n    readonly data: DiscordMemberData\n\n    readonly id: string\n\n    bannable: undefined // boolean\n\n    get client() { return this.guild.client }\n\n    deleted: undefined // boolean\n\n    get displayAvatar() { return this.guildAvatar ?? this.user?.avatar ?? null }\n\n    get displayColor() { return this.roles.color?.color ?? 0 }\n\n    get displayName() { return this.nickname ?? this.user?.username }\n\n    get guildAvatar() { return this.data.avatar }\n\n    get hoistedRoleId() { return this.data.hoisted_role }\n\n    get joinedAt() { return this.data.joined_at }\n\n    kickable: undefined // boolean\n\n    get manageable() {\n        if (this.id === this.guild.ownerId) return false\n        //if (this.id === this.client.user.id) return false\n        //if (this.client.user.id === this.guild.ownerId) return true\n        //if (!this.guild.me) throw 'GUILD_UNCACHED_ME'\n        //return this.guild.me.roles.highest.comparePositionTo(this.roles.highest) > 0\n    }\n\n    get nickname() { return this.data.nick ?? null }\n\n    partial: undefined\n\n    get pending() { return this.data.pending }\n\n    get permissions() { return this.data.permissions }\n\n    get premiumSince() { return this.data.premium_since }\n\n    get presence() { return this.data.presence }\n\n    private _roles: DiscordMemberRoleManager | undefined\n    get roles() {\n        if (this._roles) return this._roles\n        return this._roles = new DiscordMemberRoleManager(this)\n    }\n\n    readonly user: DiscordUserPartial | undefined\n\n    voice: undefined // VoiceState\n\n\n    async ban(options: Partial<{ days: number, reason: string }>) {\n        return this\n    }\n\n    async createDM() {\n        return null // DMChannel\n    }\n\n    async deleteDM() {\n        return null // DMChannel\n    }\n\n    displayAvatarURL(options?: Partial<StaticImageURLOptions>) {\n        const avatar = this.displayAvatar\n        return avatar ? `${DISCORD_IMAGE_BASE_URL}/avatars/${this.id}/${avatar}${parseStaticImageURLOptions(options)}` : this.user ? `${DISCORD_IMAGE_BASE_URL}/embed/avatars/${Number.parseInt(this.user.discriminator) % 5}.png` : null\n    }\n\n    async edit(data: Partial<DiscordMemberEditData>) {\n        return this\n    }\n\n    async fetch() {\n        return this\n    }\n\n    async kick(reason?: string) {\n        return this\n    }\n\n    async permissionsIn(channel: DiscordChannelBase | string) {\n        return null // Readonly<Permissions>\n    }\n\n    async send(options: string | { content: string } | {}) {\n        return null // Message\n    }\n\n    async setNickname(nick: string | null) {\n        return this\n    }\n\n    toString() {\n        return `<@!${this.id}>`\n    }\n\n\n    constructor(guild: DiscordGuild, data: DiscordMemberData) {\n        this.guild = guild\n        this.data = data\n\n        this.user = data.user\n        this.id = this.user!.id\n    }\n}\n\nexport interface DiscordMemberData {\n    user?: DiscordUserPartial\n    nick?: string | null\n    avatar: string | null\n    roles: string[]\n    joined_at: string\n    premium_since?: string | null\n    deaf: boolean\n    mute: boolean\n    pending?: boolean\n    permissions?: string\n    presence: any\n    hoisted_role: string | null\n}\n\ninterface DiscordMemberEditData {\n\n}\n\nexport class DiscordMemberRoleManager extends CachedManager<DiscordRole> {\n    botRole: undefined | DiscordRole | null\n\n    private _color: DiscordRole | undefined\n    get color() {\n        if (this._color) return this._color\n        const colorRoles = this.filter(r => r.color)\n        if (!colorRoles.length) return null\n        return this._color = colorRoles.reduce((prev, role) => (!prev || role.comparePositionTo(prev) > 0 ? role : prev))\n    }\n\n    get guild() { return this.member.guild }\n\n    highest: undefined | DiscordRole\n\n    hoist: undefined | DiscordRole\n\n    readonly member: DiscordMember\n\n    premiumSubscriberRole: undefined | DiscordRole\n\n\n    async add(roleOrRoles: DiscordRole | string | Array<DiscordRole | string> | Map<string, DiscordRole>) {\n        return this.member\n    }\n\n    async remove(roleOrRoles: DiscordRole | string | Array<DiscordRole | string> | Map<string, DiscordRole>) {\n        return this.member\n    }\n\n    async set(roles: Array<DiscordRole | string> | Map<string, DiscordRole>) {\n        return this.member\n    }\n\n\n    constructor(member: DiscordMember) {\n        super(member.client)\n\n        this.member = member\n\n        member.data.roles.forEach(r => {\n            const role = this.guild.roles.resolve(r)\n            if (role) this.cache.set(r, role)\n        })\n        this.loaded = true\n    }\n}","import { Component } from \"react\";\nimport { selectGuild } from \"../App\";\nimport { CallbackHandler, noCallback } from \"../Callback\";\nimport { DiscordGuild } from \"../discord/classes/DiscordGuild\";\nimport \"./Guilds.css\"\n\nconst guildsCallback: CallbackHandler<DiscordGuild[]> = {\n    callback: noCallback\n}\n\nexport function setGuilds(guilds: DiscordGuild[]) {\n    guildsCallback.callback(guilds)\n}\n\ntype GuildsProps = {\n    selectedGuild: DiscordGuild | null\n}\n\ntype GuildsState = {\n    guilds: DiscordGuild[]\n}\n\nexport default class Guilds extends Component<GuildsProps, GuildsState> {\n    constructor(props: GuildsProps) {\n        super(props)\n        this.state = {\n            guilds: []\n        }\n    }\n\n    _setGuilds = (guilds: DiscordGuild[]) => this.setState ({\n        guilds: guilds\n    })\n\n    componentDidMount() {\n        guildsCallback.callback = this._setGuilds\n    }\n\n    componentWillUnmount() {\n        guildsCallback.callback = noCallback\n    }\n\n    _guildsComponents() {\n        const guilds: any[] = [\n            <GuildIcon key=\"-1\" selected={this.props.selectedGuild === null}/>,\n            <div style={{\n                width: 32,\n                height: 2,\n                marginLeft: 20,\n                marginBottom: 8,\n                backgroundColor: '#7f7f7f7f',\n            }}/>\n        ]\n        this.state.guilds.forEach((guild, index) => {\n            guilds.push(\n                <GuildIcon key={index} guild={guild} selected={this.props.selectedGuild === guild}/>\n            )\n        })\n        return guilds\n    }\n\n    render() {\n        return (\n            <nav id='Guilds' style={{ //className='full-height'\n                height: '100%',\n                width: 72,\n                overflowX: 'hidden',\n                overflowY: 'auto',\n            }}>\n                <div style={{ height: 14 }}/>\n                {this._guildsComponents()}\n            </nav>\n        )\n    }\n}\n\nclass GuildIcon extends Component<{\n    guild?: DiscordGuild\n    selected: boolean\n}, {\n    hover: boolean\n}> {\n    constructor(props: { guild?: DiscordGuild, selected: boolean }) {\n        super(props)\n        this.state = {\n            hover: false\n        }\n    }\n\n    _image() {\n        return this.props.guild ? (\n            <img\n            src={(this.props.selected || this.state.hover) && this.props.guild.icon?.startsWith('a_') ? `https://cdn.discordapp.com/icons/${this.props.guild.id}/${this.props.guild.icon}.gif?size=96` : `https://cdn.discordapp.com/icons/${this.props.guild.id}/${this.props.guild.icon}.webp?size=96`}\n            alt={this.props.guild.name}\n            style={{\n                width: '100%',\n                height: '100%',\n                borderRadius: this.state.hover ? 18 : 24,\n                color: '#7f7f7f7f'\n            }}\n            />\n        ) : (\n            <div style={{\n                width: '100%',\n                height: '100%',\n                borderRadius: this.props.selected || this.state.hover ? 18 : 24,\n                backgroundColor: this.props.selected || this.state.hover ? '#7289da' : '#7f7f7f7f',\n                color: '#cccccc',\n                //marginTop: 14\n            }}>\n                <div style={{\n                    paddingTop: 14,\n                    paddingLeft: 10,\n                }}>\n                    <svg aria-hidden=\"false\" width=\"28\" height=\"20\" viewBox=\"0 0 28 20\"><path fill=\"currentColor\" d=\"M23.0212 1.67671C21.3107 0.879656 19.5079 0.318797 17.6584 0C17.4062 0.461742 17.1749 0.934541 16.9708 1.4184C15.003 1.12145 12.9974 1.12145 11.0283 1.4184C10.819 0.934541 10.589 0.461744 10.3368 0.00546311C8.48074 0.324393 6.67795 0.885118 4.96746 1.68231C1.56727 6.77853 0.649666 11.7538 1.11108 16.652C3.10102 18.1418 5.3262 19.2743 7.69177 20C8.22338 19.2743 8.69519 18.4993 9.09812 17.691C8.32996 17.3997 7.58522 17.0424 6.87684 16.6135C7.06531 16.4762 7.24726 16.3387 7.42403 16.1847C11.5911 18.1749 16.408 18.1749 20.5763 16.1847C20.7531 16.3332 20.9351 16.4762 21.1171 16.6135C20.41 17.0369 19.6639 17.3997 18.897 17.691C19.3052 18.4993 19.7718 19.2689 20.3021 19.9945C22.6677 19.2689 24.8929 18.1364 26.8828 16.6466H26.8893C27.43 10.9731 25.9665 6.04728 23.0212 1.67671ZM9.68041 13.6383C8.39754 13.6383 7.34085 12.4453 7.34085 10.994C7.34085 9.54272 8.37155 8.34973 9.68041 8.34973C10.9893 8.34973 12.0395 9.54272 12.0187 10.994C12.0187 12.4453 10.9828 13.6383 9.68041 13.6383ZM18.3161 13.6383C17.0332 13.6383 15.9765 12.4453 15.9765 10.994C15.9765 9.54272 17.0124 8.34973 18.3161 8.34973C19.6184 8.34973 20.6751 9.54272 20.6543 10.994C20.6543 12.4453 19.6184 13.6383 18.3161 13.6383Z\"></path></svg>\n                </div>\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <div style={{\n                    width: 72,\n                    height: 48,\n                    marginBottom: 8,\n                    overflow: 'hidden'\n                }}>\n                    <div style={{\n                        width: 4,\n                        marginRight: 4,\n                        height: this.props.selected ? 48 : this.state.hover ? 18 : 0,\n                        marginTop: this.props.selected ? 0 : this.state.hover ? 15 : 0,\n                        borderTopRightRadius: 8,\n                        borderBottomRightRadius: 8,\n                        backgroundColor: '#bbbbbb',\n                        float: 'left',\n                    }}>\n                    </div>\n                    <div \n                    style={{\n                        width: 48,\n                        height: 48,\n                        marginLeft: 12,\n                        overflow: 'hidden',\n                        cursor: 'pointer'\n                    }}\n                    onMouseEnter={() => this.setState({ hover: true })}\n                    onMouseLeave={() => this.setState({ hover: false })}\n                    onMouseDown={() => {\n                        selectGuild(this.props.guild ?? null)\n                     }}\n                    >\n                        {this._image()}\n                    </div>\n                </div>\n        )\n    }\n}","import { Component } from 'react'\nimport { colorIntToCss } from '../utils'\nimport { DiscordMessage } from './classes/DiscordMessage'\nimport { DiscordEmbed } from './discord-classes'\nimport { discordFormattedText } from './discord-message-formatting'\n\ntype EmbedProps = {\n    embed: DiscordEmbed\n    messageRef: DiscordMessage\n}\n\nexport default class Embed extends Component<EmbedProps> {\n    render() {\n        const embed = this.props.embed\n        if (!embed.image && !embed.title) {\n            embed.image = embed.thumbnail\n            embed.thumbnail = undefined\n        }\n\n        const author = embed.author ? (\n            <div style={{\n                marginTop: 8,\n                width: 488,\n                height: 24\n            }}>\n                <img alt={embed.author.name} src={embed.author.icon_url} style={{\n                    width: 24,\n                    height: 24,\n                    marginRight: 8,\n                    borderRadius: '100%',\n                    float: 'left'\n                }}/>\n                <span style={{\n                    fontSize: 14,\n                    fontWeight: 600,\n                    marginTop: 2,\n                    color: '#eeeeee'\n                }}>{discordFormattedText(embed.author.name, this.props.messageRef)}</span>\n            </div>\n        ) : null\n\n        const title = embed.title ? (\n            <div style={{\n                marginTop: 8,\n                fontSize: 16,\n                fontWeight: 600,\n                color: '#eeeeee'\n            }}>\n                {embed.url ? <a href={embed.url} target='_blank'>{discordFormattedText(embed.title, this.props.messageRef)}</a>\n                 : discordFormattedText(embed.title, this.props.messageRef)}\n            </div>\n        ) : null\n        \n        const description = embed.description ? (\n            <div style={{\n                marginTop: 8,\n                fontSize: 14,\n                fontWeight: 400\n            }}>\n                {discordFormattedText(embed.description, this.props.messageRef)}\n            </div>\n        ) : null\n\n        let fields: unknown = embed.fields?.map((field, index) => {\n            return (\n                <div style={{\n                    gridColumnStart: 1,\n                    gridColumnEnd: 13,\n                    fontSize: '0.875rem',\n                    lineHeight: '1.125rem',\n                    minWidth: 0\n                }}>\n                    <span style={{\n                        display: 'block',\n                        marginBottom: 2,\n                        height: 18,\n                        fontWeight: 600,\n                        color: '#eeeeee'\n                    }}>{discordFormattedText(field.name, this.props.messageRef)}</span>\n                    {discordFormattedText(field.value, this.props.messageRef)}\n                </div>\n            )\n        })\n        fields = !fields ? null : (fields as unknown[]).length > 0 ? (\n            <div style={{\n                display: 'grid',\n                gridColumnStart: 1,\n                gridColumnEnd: 1,\n                gridGap: 8,\n                marginTop: 8\n            }}>\n                {fields as any}\n            </div>\n        ) : null\n\n        const footer = embed.footer ? (\n            <div style={{\n                marginTop: 8\n            }}>\n                <img src={embed.footer.icon_url} alt=\" \" style={{\n                    width: 20,\n                    height: 20,\n                    marginRight: 8,\n                    borderRadius: '100%',\n                    float: 'left',\n                    marginTop: 3\n                }}/>\n                <span style={{\n                    fontSize: 12,\n                    fontWeight: 500\n                }}>{discordFormattedText(embed.footer.text, this.props.messageRef)}</span>\n            </div>\n        ) : null\n\n        const sideThumbnail = !embed.video ? embed.thumbnail : undefined\n        const thumbnail = sideThumbnail ? (\n            <img src={sideThumbnail.url} alt=\" \" style={{\n                marginLeft: 16,\n                marginTop: 8,\n                width: sideThumbnail.width ?? 80,\n                height: sideThumbnail.height ?? 80,\n                maxWidth: 80,\n                maxHeight: 80,\n                borderRadius: 3,\n                gridRow: '1/8',\n                gridColumn: '2/2',\n            }}/>\n        ) : null\n\n        const image = embed.image ? (\n            <img src={embed.image.url} alt=\" \" style={{\n                maxWidth: 400,\n                maxHeight: 400,\n                borderRadius: 4,\n                marginTop: 10,\n                marginBottom: 2\n            }}/>\n        ) : null\n\n        const video = embed.video ? (\n            embed.type === 'gifv'\n            ? <video autoPlay loop muted src={embed.video.url} style={{\n                width: 400,\n                height: 225,\n                borderRadius: 4\n            }} width={embed.video.width} height={embed.video.height} poster={embed.thumbnail?.url}/>\n            : embed.provider?.name\n                ? <iframe src={embed.video.url} style={{\n                    width: 400,\n                    height: 225,\n                    borderRadius: 4,\n                    marginTop: 2,\n                    marginBottom: 2\n                }} width={embed.video.width} height={embed.video.height} allowFullScreen scrolling=\"no\">\n                    <img src={embed.thumbnail?.url} alt=\" \"/>\n                    </iframe>\n                : null\n        ) : null\n\n        \n        if (embed.type === 'gifv') {\n            return (\n                <div style={{\n                    marginTop: 2,\n                    marginBottom: 2\n                }}>{video}</div>\n            )\n        }\n\n        if (embed.type === 'image' && !author && !title && !description && !fields && !footer && !video && image) {\n            return (\n                <div style={{\n                    marginTop: 2,\n                    marginBottom: 2\n                }}>{image}</div>\n            )\n        }\n\n        return (\n            <div className=\"Embed\" style={{\n                borderColor: embed.color ? colorIntToCss(embed.color) : undefined,\n                //borderWidth: 4\n                display: embed.thumbnail ? 'grid' : undefined,\n                marginTop: 2,\n                marginBottom: 2,\n                maxWidth: embed.image ? 400 : undefined\n            }}>\n                {embed.video?.url}\n                {author}\n                {title}\n                {description}\n                {fields}\n                {footer}\n                {thumbnail}\n                {image}\n                {video}\n            </div>\n        )\n    }\n}\n\n/*\n{\n  \"type\": \"rich\",\n  \"footer\": {\n    \"text\": \"Minecord 0.13.3 | Made with  by Tis_awesomeness\",\n    \"proxy_icon_url\": \"https://images-ext-2.discordapp.net/external/PKSrp5Ry2Q_mXozKwZTMtW44BvNSYgCz176TgHtp0KY/https/cdn.discordapp.com/avatars/211261249386708992/a_92c3942b833157e5016b02de7203e428.gif\",\n    \"icon_url\": \"https://cdn.discordapp.com/avatars/211261249386708992/a_92c3942b833157e5016b02de7203e428.gif\"\n  },\n  \"fields\": [\n    {\n      \"value\": \"`&guild`, `&role`, `&roles`, `&user`, `&purge`, `&perms`, `&settings`\",\n      \"name\": \"General\",\n      \"inline\": false\n    },\n    {\n      \"value\": \"`&status`, `&sales`, `&codes`, `&color`, `&server`, `&shadow`, `&sha1`, `&item`, `&recipe`, `&ingredient`\",\n      \"name\": \"Utility\",\n      \"inline\": false\n    },\n    {\n      \"value\": \"`&uuid`, `&history`, `&avatar`, `&head`, `&body`, `&skin`, `&cape`, `&profile`\",\n      \"name\": \"Player\",\n      \"inline\": false\n    },\n    {\n      \"value\": \"`&help`, `&info`, `&invite`, `&vote`, `&credits`\",\n      \"name\": \"Misc\",\n      \"inline\": false\n    }\n  ],\n  \"description\": \"Use `&help <command>` to get more information about a command.\\nUse `&help <module>` to get help for that module.\",\n  \"color\": 65280,\n  \"author\": {\n    \"proxy_icon_url\": \"https://images-ext-1.discordapp.net/external/HW8x9A-UtODlh7E2ZszI1eThjrfCMYkHGpHf20CTIJE/https/cdn.discordapp.com/avatars/292279711034245130/64a27869032ff234f84ec1261b9541ee.png\",\n    \"name\": \"Minecord Help\",\n    \"icon_url\": \"https://cdn.discordapp.com/avatars/292279711034245130/64a27869032ff234f84ec1261b9541ee.png\"\n  }\n}*/","import { useState } from \"react\";\nimport { colorIntToCss } from \"../utils\";\nimport { DiscordMessage } from \"./classes/DiscordMessage\";\nimport Embed from \"./Embed\";\n\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport * as shStyles from 'react-syntax-highlighter/dist/esm/styles/prism'\n\nconst messageSpecialRegex = /(?<br>\\n)|(?<a>https?:\\/\\/([^. <>]+\\.)*[^ <>]+)|(?<a_md>\\[[^\\]]+]\\(<?[^ >)]+>?\\))|(?<emoji_name>:[\\w_]+:|:[+-]1:)|(?<custom_emoji><a?:[\\w_]+:\\d+>)|(?<mention><@[!&]?\\d+>)|(?<everyone>(?<![^\\s])@everyone(?![^\\s]))|(?<channel><#\\d+>)|(?<emoji>\\u00a9|\\u00ae|[\\u2000-\\u3300]|\\ud83c[\\ud000-\\udfff]|\\ud83d[\\ud000-\\udfff]|\\ud83e[\\ud000-\\udfff])/g\nconst markdownRegex = /(?<b>\\*\\*(?:[^*]|\\*[^*])+\\*?\\*\\*)|(?<i>\\*[^*]+\\*)|(?<u>__(?:[^_]|_[^_])+__)|(?<s>~~(?:[^~]|~[^~])+~~)|(?<c>`[^`\\n]+`)|(?<cb>```(?:[\\w+-]+\\n)?(?:[^`]|`[^`]|``[^`])+```)/g\n// |(?<q>(?<![^\\n])>\\s\\w+\\n?)\n\nconst ChatMessageContent = ({message}: {message: DiscordMessage}) => {\n    const text = message.content?.trim()\n\n    const textResult = text ? formattedText(text, message) : null\n    const embedResult = message.embeds.map((embed, index) => <Embed key={index} embed={embed} messageRef={message}/>)\n    const attachments: any[] = []\n    message.attachments.forEach((att, index) => {\n        //console.log(att)\n        if (att.content_type?.startsWith('image/'))\n        attachments.push(\n            <a key={index} style={{\n                marginTop: 2,\n                marginBottom: 2,\n                display: 'block'\n            }} href={att.url} target='_blank'>\n                <img src={att.url} alt={att.filename} style={{\n                    maxWidth: 400,\n                    maxHeight: 400,\n                    borderRadius: 4\n                }}/>\n            </a>\n        )\n    })\n\n    //{message.type}<br/>\n    if (message.type !== 0) {\n        console.log(message)\n    }\n\n    return (\n        <div className='text message-text' style={{\n            marginBottom: 3,\n        }}>\n            \n            {textResult}\n            {embedResult}\n            {attachments.length > 0 ? attachments : null}\n        </div>\n    );\n}\n\nfunction formattedText(text: string, message: DiscordMessage): any[] {\n    const result = []\n    let previousMatchEnd = 0\n    const matches = text.matchAll(markdownRegex)\n\n    while (true) {\n        const next = matches.next()\n        if (next.done) break\n        const match = next.value\n\n        const i = match.index\n        if (i === undefined) continue\n\n        if (previousMatchEnd < i) {\n            result.push(...formatTextSpecial(text.substring(previousMatchEnd, i), message))\n        }\n\n        let length = 0\n\n        const groups = match.groups\n        if (groups) {\n            if (groups.b) {\n                const l = groups.b.length\n                result.push(<b>{formattedText(text.substring(i + 2, i + l - 2), message)}</b>)\n                length = l\n            } else if (groups.i) {\n                const l = groups.i.length\n                result.push(<i>{formattedText(text.substring(i + 1, i + l - 1), message)}</i>)\n                length = l\n            } else if (groups.u) {\n                const l = groups.u.length\n                result.push(<u>{formattedText(text.substring(i + 2, i + l - 2), message)}</u>)\n                length = l\n            } else if (groups.s) {\n                const l = groups.s.length\n                result.push(<s>{formattedText(text.substring(i + 2, i + l - 2), message)}</s>)\n                length = l\n            } else if (groups.c) {\n                const l = groups.c.length\n                result.push(<code>{formattedText(text.substring(i + 1, i + l - 1), message)}</code>)\n                length = l\n            } else if (groups.cb) {\n                const l = groups.cb.length\n                let code = text.substring(i + 3, i + l - 3)\n                const langSplit = code.split(/\\n/)\n                let lang = langSplit[0]\n                if (lang && lang.split(/\\s/).length === 1) {\n                    code = code.substring(lang.length + 1)\n                } else {\n                    lang = \"text\"\n                }\n                result.push(\n                    <span className=\"code-block\">\n                    <SyntaxHighlighter language={lang ?? 'text'} style={shStyles.vscDarkPlus}>\n                        {code}\n                    </SyntaxHighlighter>\n                    </span>\n                )\n                length = l\n            } else if (groups.q) {\n                const l = groups.q.length\n                result.push(\n                    <div style={{\n                        display: 'flex',\n                        flexDirection: 'row'\n                    }}>\n                        <div style={{width: 4, height: 22, backgroundColor: '#777777', borderRadius: 4}}/>\n                        <blockquote>{formattedText(text.substring(i + 2, i + l), message)}</blockquote>\n                    </div>\n                )\n                length = groups.q.endsWith('\\n') ? l + 1 : l\n            }\n        }\n\n        previousMatchEnd = i + length\n    }\n\n    if (previousMatchEnd < text.length) {\n        const rem = text.substring(previousMatchEnd)\n        if (rem.length > 0) {\n            result.push(...formatTextSpecial(rem, message))\n        }\n    }\n\n    return result\n}\n\nfunction formatTextSpecial(text: string, message: DiscordMessage): any[] {\n    const result = []\n    let previousMatchEnd = 0\n    const matches = text.matchAll(messageSpecialRegex)\n\n    while (true) {\n        const next = matches.next()\n        if (next.done) break\n        const match = next.value\n\n        //console.log(match.groups);\n        const i = match.index\n        if (i === undefined) continue\n\n        if (previousMatchEnd < i) {\n            result.push(text.substring(previousMatchEnd, i))\n        }\n        let length = 0\n\n        const groups = match.groups\n        if (groups) {\n            if (groups.br) {\n                result.push(<br/>)\n                length = 1\n            } else if (groups.a) {\n                const l = groups.a.length\n                const href = text.substring(i, i + l)\n                result.push(<a href={href} target='_blank'>{href}</a>)\n                length = l\n            } else if (groups.a_md) {\n                const l = groups.a_md.length\n                const components = text.substring(i + 1, i + l - 1).split('](')\n                let href = components[1]\n                if (href[0] === '<') href = href.slice(1, -1)\n                result.push(<a href={href} target='_blank'>{components[0]}</a>)\n                length = l\n            } else if (groups.emoji) {\n                const id = text.codePointAt(i)\n                if (id === undefined) continue\n                result.push(<Emoji id={id.toString(16)}/>)\n                length = groups.emoji.length\n            } else if (groups.emoji_name) {\n                const subst = emojiSubst[groups.emoji_name.slice(1, -1)]\n                if (subst) {\n                    result.push(<Emoji id={subst}/>)\n                    length = groups.emoji_name.length\n                }\n            } else if (groups.custom_emoji) {\n                const emoji = groups.custom_emoji\n                const animated = emoji[1] === 'a'\n                result.push(<Emoji url={`https://cdn.discordapp.com/emojis/${animated ? 'a_' : ''}${emoji.split(':')[2].slice(0, -1)}.${animated ? 'gif' : 'png'}`}/>)\n                length = groups.custom_emoji.length\n            } else if (groups.everyone) {\n                const mention = groups.everyone\n                if (message.data.mention_everyone) {\n                    result.push(<Mention before=\"@\" text=\"everyone\"/>)\n                    length = mention.length\n                }\n            } else if (groups.mention) {\n                const mention = groups.mention\n                const type = mention[2] === '!' ? 'nick' : mention[2] === '&' ? 'role' : 'user'\n                const id = mention.slice(type !== 'user' ? 3 : 2, -1)\n                console.log(message)\n                const target: any = type === 'role' ? message.guild!.roles.resolve(id) : message.mentions.find(m => m.id === id)\n                //if (type === 'role') console.log(message)\n                if (target) {\n                    result.push(<Mention before='@' text={\n                        type === 'role' \n                        ? target?.name\n                        : (type === 'nick' ? target.member?.nick : undefined) ?? target.username\n                    } color={type === 'role' && target && target.color ? colorIntToCss(target.color) : undefined}/>)\n                    length = mention.length\n                }\n            } else if (groups.channel) {\n                const id = groups.channel.slice(2, -1)\n                const text = message.guild?.channels.resolve(id)?.name ?? 'null' //id//getGuilds()?.[0].channels.find((c: any) => c.id === id).name\n                result.push(<Mention before={<svg width=\"18\" height=\"18\" viewBox=\"0 0 24 16\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M5.88657 21C5.57547 21 5.3399 20.7189 5.39427 20.4126L6.00001 17H2.59511C2.28449 17 2.04905 16.7198 2.10259 16.4138L2.27759 15.4138C2.31946 15.1746 2.52722 15 2.77011 15H6.35001L7.41001 9H4.00511C3.69449 9 3.45905 8.71977 3.51259 8.41381L3.68759 7.41381C3.72946 7.17456 3.93722 7 4.18011 7H7.76001L8.39677 3.41262C8.43914 3.17391 8.64664 3 8.88907 3H9.87344C10.1845 3 10.4201 3.28107 10.3657 3.58738L9.76001 7H15.76L16.3968 3.41262C16.4391 3.17391 16.6466 3 16.8891 3H17.8734C18.1845 3 18.4201 3.28107 18.3657 3.58738L17.76 7H21.1649C21.4755 7 21.711 7.28023 21.6574 7.58619L21.4824 8.58619C21.4406 8.82544 21.2328 9 20.9899 9H17.41L16.35 15H19.7549C20.0655 15 20.301 15.2802 20.2474 15.5862L20.0724 16.5862C20.0306 16.8254 19.8228 17 19.5799 17H16L15.3632 20.5874C15.3209 20.8261 15.1134 21 14.8709 21H13.8866C13.5755 21 13.3399 20.7189 13.3943 20.4126L14 17H8.00001L7.36325 20.5874C7.32088 20.8261 7.11337 21 6.87094 21H5.88657ZM9.41045 9L8.35045 15H14.3504L15.4104 9H9.41045Z\"></path></svg>}\n                text={text}/>)\n                length = groups.channel.length\n            }\n        }\n\n        previousMatchEnd = i + length\n    }\n\n    if (previousMatchEnd < text.length) {\n        const rem = text.substring(previousMatchEnd)\n        if (rem.length > 0) {\n            result.push(rem)\n        }\n    }\n\n    return result\n}\n\nexport { formattedText as discordFormattedText }\n\nconst Emoji = ({url, id}: { url: string, id?: never } | { id: string, url?: never }) => (\n    <img src={url ?? `https://abs-0.twimg.com/emoji/v2/svg/${id}.svg`} alt=\" \" style={{\n        width: '1.3em',\n        height: '1.3em',\n        marginBottom: -5,\n        marginLeft: 1,\n        marginRight: 1,\n        cursor: 'pointer',\n    }} title={url ?? id}>\n    </img>\n)\n\nconst Mention = ({before, text, color}: {before: any, text: string, color?: string}) => {\n    const [hover, setHover] = useState(false)\n    return (\n        <span \n        style={{\n            paddingLeft: 2,\n            paddingRight: 2,\n            backgroundColor: hover ? '#4e5d94' : 'rgba(88, 101, 242, 0.3)',\n            borderRadius: 3,\n            color: color,\n            cursor: 'pointer'\n        }}\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n        >\n            {before}\n            {hover ? <u><b>{text}</b></u> : <b>{text}</b>}\n        </span>\n    )\n}\n\nexport default ChatMessageContent\n\nconst emojiSubst: any = {\n    '+1': '1f44d',\n    scroll: '1f4dc'\n}","import { useState } from \"react\"\nimport { DiscordMessage } from \"../discord/classes/DiscordMessage\"\nimport ChatMessageContent from \"../discord/discord-message-formatting\"\nimport { dateToTimestampString } from \"../utils\"\n\nconst ChatMessage = ({message, groupStart}: {message: DiscordMessage, groupStart: boolean}) => {\n    switch (message.type) {\n    case 7: return (\n        <div className=\"text\" style={{\n            width: 623,\n            paddingLeft: 72, \n            paddingRight: 48,\n            paddingTop: 2,\n            paddingBottom: 2,\n            marginTop: 17,\n        }}>Welcome {message.member?.nickname ?? message.author.username}</div>\n    )\n    case 8: return (\n        <div className=\"text\" style={{\n            width: 623,\n            paddingLeft: 72, \n            paddingRight: 48,\n            paddingTop: 2,\n            paddingBottom: 2,\n            marginTop: 17,\n        }}>{message.member?.nickname ?? message.author.username} has boosted the server!</div>\n    )\n    }\n    return groupStart ? <ChatMessageGroupStart  message={message}/> : <ChatMessageItem  message={message}/>\n}\n\nconst ChatMessageItem = ({message}: {message: DiscordMessage}) => {\n    const [hover, setHover] = useState(false)\n    return (\n        <div\n        style={{\n            paddingLeft: 72, \n            paddingRight: 48, \n            paddingTop: 2,\n            paddingBottom: 2,\n            backgroundColor: hover ? '#11111133' : undefined\n        }}\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n        >\n            <ChatMessageContent message={message}/>\n        </div>\n    )\n}\n\nconst ChatMessageGroupStart = ({message}: {message: DiscordMessage}) => {\n    //const author = getAuthor(message)\n    const avatar = message.member?.displayAvatar ?? message.author.avatar;\n    const authorImage = avatar ? `https://cdn.discordapp.com/avatars/${message.author.id}/${avatar}.webp?size=128` : `https://cdn.discordapp.com/embed/avatars/${Number.parseInt(message.author.discriminator) % 5}.png`\n    //const authorImage = message.member?.displayAvatarURL({ format: 'webp', size: 128 })\n    const authorName = message.member?.nickname ?? message.author.username\n    const isAuthorBot = message.author.bot === true\n    const authorFlags = message.author.public_flags ?? 0\n\n    const [hover, setHover] = useState(false)\n    return (\n        <div style={{\n            paddingLeft: 72, \n            paddingRight: 48,\n            paddingTop: 2,\n            paddingBottom: 2,\n            marginTop: 17,\n            backgroundColor: hover ? '#11111133' : undefined\n        }} onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}>\n            <img className='avatar' style={{\n                width: 40,\n                height: 40,\n                marginTop: 2,\n                marginLeft: -56,\n            }} src={authorImage} alt='avatar'/>\n            <h2 style={{\n                width: '100%',\n                height: 22,\n                fontSize: 16,\n                marginTop: 0,\n                marginBottom: 0\n            }}>\n                <span style={{\n                    width: 'auto',\n                    height: 'auto',\n                    marginRight: 4,\n                    color: (message.member?.displayColor ? `#${message.member.displayColor.toString(16)}` : undefined) ?? '#7f7f7f'\n                }}>{authorName}</span>\n                {isAuthorBot ? <span style={{\n                    borderRadius: 3,\n                    backgroundColor: '#4e5d94',\n                    fontSize: 10,\n                    fontWeight: 500,\n                    padding: '1px 5px',\n                }}>\n                    {authorFlags & 1 << 16 \n                    ? <svg style={{ marginBottom: -4, marginLeft: -4 }} aria-label=\"Verified bot\" width=\"16\" height=\"16\" viewBox=\"0 0 16 15.2\"><path d=\"M7.4,11.17,4,8.62,5,7.26l2,1.53L10.64,4l1.36,1Z\" fill=\"currentColor\"></path></svg>\n                    : null}\n                    BOT\n                </span> : null}\n                <span style={{\n                    width: 'auto',\n                    height: 'auto',\n                    marginLeft: 4,\n                    color: '#777777',\n                    fontSize: '12px',\n                }}>{dateToTimestampString(new Date(message.createdAt))}</span>\n            </h2>\n            <ChatMessageContent message={message}/>\n        </div>\n    )\n}\n\n/*function getAuthor(message: DiscordMessage) {\n    const avatar = message.member?.avatar ?? message.author.avatar;\n    const image = avatar ? `https://cdn.discordapp.com/avatars/${message.author.id}/${avatar}.webp?size=128` : `https://cdn.discordapp.com/embed/avatars/${Number.parseInt(message.author.discriminator) % 5}.png`\n    return {\n        image: image,\n        name: (message.member?.nick ?? message.author.username) as string,\n        bot: message.author.bot === true,\n        flags: message.author.public_flags ?? 0\n    }\n}*/\n\nexport default ChatMessage","import { Component, CSSProperties } from 'react'\nimport * as restartButton from '@restart/ui/esm/Button'\n\ntype ButtonProps = {\n    style?: CSSProperties,\n    //hover?: (over: boolean, ref: Button) => void,\n    hoverStyle?: CSSProperties,\n    activeStyle?: CSSProperties,\n\n    onClick?: ButtonClickListener,\n    onHover?: ButtonHoverListener,\n\n    toggle?: boolean,\n    active?: boolean,\n}\n\ntype ButtonState = {\n    over: boolean,\n    active: boolean\n}\n\nexport type ButtonClickListener = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>, ref: Button) => void\nexport type ButtonHoverListener = (over: boolean, ref: Button) => void\n\nexport default class Button extends Component<ButtonProps, ButtonState> {\n    constructor(props: ButtonProps) {\n        super(props);\n        this.state = {\n            over: false,\n            active: props.active ?? false\n        }\n    }\n\n    _currentHoverStyle: CSSProperties | undefined\n    _currentActiveStyle: CSSProperties | undefined\n\n    render() {\n        return (\n            <restartButton.default \n            style={{\n                cursor: 'pointer',\n                ...this.props.style,\n                ...this._currentHoverStyle,\n                ...this._currentActiveStyle\n            }}\n            onMouseEnter={() => {\n                this._currentHoverStyle = this.props.hoverStyle\n                this.setState({ over: true })\n                this.props.onHover?.(true, this)\n            }}\n            onMouseLeave={() => {\n                this._currentHoverStyle = undefined\n                this.setState({ over: false })\n                this.props.onHover?.(false, this)\n            }}\n            onMouseDown={() => {\n                const active = this.props.toggle ? !this.state.active : true\n                this._currentActiveStyle = active ? this.props.activeStyle : undefined\n                this.setState({ active: active })\n            }}\n            onMouseUp={() => {\n                if (!this.props.toggle) {\n                    this._currentActiveStyle = undefined\n                    this.setState({ active: false })\n                }\n            }}\n            onClick={(e) => {\n                this.props.onClick?.(e, this)\n            }}\n            >\n                {this.props.children}\n            </restartButton.default>\n        )\n    }\n}\n","import { Component } from 'react'\nimport Button from '../components/Button'\nimport { DiscordChannel } from '../discord/discord-classes'\nimport { DiscordClient } from '../discord/DiscordClient'\nimport './StorePage.css'\n\ntype StorePageProps = {\n    channel: DiscordChannel<6>\n}\n\ntype StorePageState = {\n    page: any | undefined\n}\n\nexport default class StorePage extends Component<StorePageProps, StorePageState> {\n    // https://discord.com/api/v9/channels/856418752275152907/store-listing?country_code=DE\n    private prevCID: string\n\n    constructor(props: StorePageProps) {\n        super(props)\n\n        this.prevCID = props.channel.id\n\n        this.state = {\n            page: undefined\n        }\n    }\n\n    fetchPage() {\n        DiscordClient.request('GET', ['channels', this.props.channel.id, 'store-listing'], undefined, undefined, ['country_code=US']).then(value => \n            value.json()\n        ).then(page => {\n            if (page.sku)\n                this.setState({ page: page })\n        })\n    }\n\n    componentDidMount() {\n        this.fetchPage()\n    }\n\n    componentDidUpdate() {\n        if (this.props.channel.id !== this.prevCID) {\n            this.prevCID = this.props.channel.id\n            this.fetchPage()\n        }\n    }\n\n    render() {\n        if (!this.state.page) return (\n            <></>\n        )\n        const page = this.state.page\n        const id = page.sku.id\n\n        const carousel = page.carousel_items\n\n        return (\n            <div style={{\n                //height: '-webkit-fill-available',\n                paddingRight: 16,\n                overflowX: 'hidden',\n                overflowY: 'auto',\n                position: 'fixed',\n                left: 312,\n                right: 8,\n                top: 70,\n                bottom: 0\n            }}>\n                <div style={{\n                    maxWidth: 880,\n                    margin: 'auto',\n                    height: 100\n                }}>\n                    <div style={{\n                        height: '100%',\n                        width: '100%',\n                        backgroundImage: `url(\"https://cdn.discordapp.com/app-assets/${id}/store/${page.header_background.id}.png?size=1024\")`,\n                        WebkitMask: 'radial-gradient(ellipse 50% 100% at 50% 0,#000,transparent)',\n                        opacity: 0.3,\n                        marginBottom: -100\n                    }}/>\n                    <img src={`https://cdn.discordapp.com/app-assets/${id}/store/${page.header_logo_dark_theme.id}.png?size=1024`} alt=\" \" style={{\n                        display: 'block',\n                        margin: 'auto',\n                        paddingTop: 20,\n                        paddingBlock: 20,\n                        WebkitMask: 'revert',\n                        opacity: 'revert'\n                    }}/>\n                </div>\n                <div style={{\n                   maxWidth: 880,\n                   margin: 'auto'\n                }}>\n                    <div style={{\n                        width: '100%'\n                    }}>\n                        <video src={`https://cdn.discordapp.com/app-assets/${id}/store/${carousel[0].asset_id}.mp4`} style={{\n                            width: '100%',\n                            borderRadius: 4\n                        }} autoPlay loop muted controls/>\n                    </div>\n                    <div style={{\n                        height: 97,\n                        width: 'auto',\n                        margin: '20px 32.5px 20px 32.5px',\n                        paddingLeft: 20,\n                        paddingRight: 20\n                    }}>\n                    </div>\n                </div>\n                <div style={{\n                    maxWidth: 880,\n                    margin: 'auto',\n                    height: 'auto',\n                }}>\n                    <div style={{\n                        display: 'flex',\n                        flexDirection: 'row'\n                    }}>\n                        <div style={{\n                            width: '67%'\n                        }}>\n                            <h1 style={{\n                                marginTop: 0,\n                                marginBottom: 8,\n                                fontSize: 20,\n                                fontWeight: 500,\n                                color: '#eeeeee',\n                                display: 'block'\n                            }}>About {page.sku.name}</h1>\n                            <div style={{\n                                marginBottom: 20,\n                                borderBottom: '1px solid #66666666'\n                            }}/>\n                            <div>\n                                <div style={{\n                                    color: '#bbbbbb'\n                                }}>\n                                    {page.summary}\n                                </div>\n                                <div style={{\n                                    color: '#999999',\n                                    fontSize: 15,\n                                    marginTop: 20,\n                                }} className=\"collapsed\">\n                                    {page.description}\n                                </div>\n                            </div>\n                            <Button style={{\n                                display: 'block',\n                                padding: '2px 16px',\n                                marginTop: 20,\n                                height: 34,\n                                border: 'none',\n                                borderRadius: 4,\n                                backgroundColor: '#99999999',\n                                color: '#ffffffff',\n                                fontSize: 14,\n                                fontWeight: 500,\n                            }}>Read more</Button>\n                        </div>\n                        <div style={{\n                            width: '33%',\n                            marginLeft: 40\n                        }}>\n                            <div style={{\n                                marginBottom: 40,\n                            }}>\n                                <div style={{\n                                    padding: 20,\n                                    backgroundColor: '#666666',\n                                    borderTopLeftRadius: 4,\n                                    borderTopRightRadius: 4\n                                }}>\n\n                                </div>\n                                <div style={{\n                                    padding: 20,\n                                    backgroundColor: '#1c1c1c'\n                                }}>\n                                    <div style={{\n                                        height: 24,\n                                        marginBottom: 4\n                                    }}>\n                                        <div>GET GAME</div>\n                                    </div>\n                                </div>\n                                <div style={{\n                                    padding: 20,\n                                    backgroundColor: '#1c1c1c',\n                                    borderBottomLeftRadius: 4,\n                                    borderBottomRightRadius: 4,\n                                    borderTop: '1px solid #66666666'\n                                }}>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n/*\n{\n    \"id\": \"633200201016016896\",\n    \"summary\": \"Retrograde Arena is a multiplayer twin stick brawler where bullets dont kill. Use weapons's impact to push other player to the deadly environment. Play together with others and prove that you're the best of 'em all.\",\n    \"sku\": {\n        \"id\": \"603145207516495879\",\n        \"type\": 1,\n        \"dependent_sku_id\": null,\n        \"application_id\": \"603145207516495879\",\n        \"manifest_labels\": [\n            \"633166320967483402\"\n        ],\n        \"access_type\": 1,\n        \"name\": \"Retrograde Arena\",\n        \"features\": [\n            2,\n            3,\n            4,\n            7,\n            8,\n            10,\n            11\n        ],\n        \"release_date\": null,\n        \"premium\": false,\n        \"slug\": \"retrograde-arena\",\n        \"flags\": 4,\n        \"genres\": [\n            1,\n            27,\n            63,\n            23\n        ],\n        \"application\": {\n            \"id\": \"603145207516495879\",\n            \"name\": \"Retrograde Arena Game\",\n            \"icon\": \"b02e20f068f74c6ea60d29c7ace194e1\",\n            \"description\": \"Retrograde Arena is a multiplayer twin stick brawler where bullets dont kill. Use weapons's impact to push other player to the deadly environment. Play together with others and prove that you're the best of 'em all.\",\n            \"summary\": \"Retrograde Arena is a multiplayer twin stick brawler where bullets dont kill. Use weapons's impact to push other player to the deadly environment. Play together with others and prove that you're the best of 'em all.\",\n            \"cover_image\": \"52963c8889b105f0ff07d33c1f9bf1d3\",\n            \"primary_sku_id\": \"603145207516495879\",\n            \"hook\": true,\n            \"slug\": \"retrograde-arena-game\",\n            \"guild_id\": \"293120529030840330\",\n            \"bot_public\": true,\n            \"bot_require_code_grant\": false,\n            \"verify_key\": \"e675fb29eb5165d11a388548e70c92c008c3c4ccb88c1bb2ee6509b0895e6884\",\n            \"publishers\": [\n                {\n                    \"id\": \"521816559031812100\",\n                    \"name\": \"Another Indie\"\n                }\n            ],\n            \"developers\": [\n                {\n                    \"id\": \"626341625383354368\",\n                    \"name\": \"Freemergency\"\n                }\n            ]\n        },\n        \"system_requirements\": {\n            \"1\": {\n                \"minimum\": {\n                    \"operating_system_version\": \"Windows 8\",\n                    \"cpu\": \"Intel Pentium G4560\",\n                    \"gpu\": \"Intel HD 4600\",\n                    \"ram\": 4000,\n                    \"disk\": 300,\n                    \"sound_card\": null,\n                    \"directx\": null,\n                    \"network\": \"Broadband Internet connection\",\n                    \"notes\": \"For Low Settings, 720p, 30 fps\"\n                },\n                \"recommended\": {\n                    \"operating_system_version\": \"Windows 10\",\n                    \"cpu\": \"Intel Core i5 Quad Core / Ryzen 3\",\n                    \"gpu\": \"Nvidia GTX 1050 and equivalent or better\",\n                    \"ram\": 4000,\n                    \"disk\": 300,\n                    \"sound_card\": null,\n                    \"directx\": null,\n                    \"network\": \"Broadband Internet connection\",\n                    \"notes\": \"For High Settings, 1080p, 60 fps\"\n                }\n            }\n        },\n        \"show_age_gate\": false,\n        \"price\": {\n            \"amount\": 0,\n            \"currency\": \"eur\"\n        },\n        \"locales\": [\n            \"en-US\",\n            \"en-GB\"\n        ]\n    },\n    \"tagline\": \"Destroying friendship, one round at a time.\",\n    \"description\": \"Retrograde Arena is a multiplayer twin stick brawler where bullets dont kill, but the environment does. All weapons can only push players, but all players will instantly explode when they touch any red walls or objects in the map. Battle against other people or AI with up to 6 players in a hectic match and rebound them to their demise with a variety of different weapons.\\n\\n![](asset://637615155324387331)\\n![](asset://633585921140195338)\\n\\n**Physics Based**\\n\\nUse physics to your advantage by using your own weapons recoil to evade or propel yourself to great speeds. Utilize bullets ricochet, push boxes, and body slam others to win.\\n\\n**Multiplayer Chaos**\\n\\nThis game features online & local multiplayer, play with friends on the same PC with multiple controllers, or use LAN or Internet to play with other people. Each PC supports up to 4 controllers (4 players) and can join any online match with up to 6 players.\\n\\n**Arsenal of Weapons**\\n\\nUse a variety of weapons with different properties. Some weapons just shoot bullets, some bounces back bullets, some are just there to screw with you. Machine guns, railguns, shotguns, we got'em all and more to come.\\n\\n**Diverse Arena**\\n\\nArenas or Maps will determine the experience of the match. Each arena has their own layout, and some have unique quirks that requires different strategies to win the game.\\n\\n**Customization**\\n\\nUnlock and choose different textures, thrusters and particle effects to personalize your ship. Look different and show off your achievements online.\\n\\n![](asset://633585953725743125)\",\n    \"carousel_items\": [\n        {\n            \"asset_id\": \"712889602427322438\"\n        },\n        {\n            \"asset_id\": \"637632002983591936\"\n        },\n        {\n            \"asset_id\": \"637618770654789632\"\n        },\n        {\n            \"asset_id\": \"637618774819864576\"\n        },\n        {\n            \"asset_id\": \"633566394855850004\"\n        },\n        {\n            \"asset_id\": \"633566488003084288\"\n        },\n        {\n            \"asset_id\": \"633566537332031488\"\n        }\n    ],\n    \"hero_video\": {\n        \"id\": \"712889602427322438\",\n        \"size\": 21777372,\n        \"mime_type\": \"video/mp4\",\n        \"width\": 1280,\n        \"height\": 720\n    },\n    \"hero_background\": {\n        \"id\": \"637549872517742592\",\n        \"size\": 3794951,\n        \"mime_type\": \"image/png\",\n        \"width\": 2480,\n        \"height\": 1000\n    },\n    \"preview_video\": {\n        \"id\": \"637625703029932035\",\n        \"size\": 5217196,\n        \"mime_type\": \"video/mp4\",\n        \"width\": 640,\n        \"height\": 360\n    },\n    \"box_art\": {\n        \"id\": \"712863933236510732\",\n        \"size\": 796572,\n        \"mime_type\": \"image/png\",\n        \"width\": 600,\n        \"height\": 800\n    },\n    \"thumbnail\": {\n        \"id\": \"712863951049850960\",\n        \"size\": 1624832,\n        \"mime_type\": \"image/png\",\n        \"width\": 1280,\n        \"height\": 720\n    },\n    \"header_logo_dark_theme\": {\n        \"id\": \"712863896494669906\",\n        \"size\": 23812,\n        \"mime_type\": \"image/png\",\n        \"width\": 300,\n        \"height\": 60\n    },\n    \"header_logo_light_theme\": {\n        \"id\": \"712863896494669906\",\n        \"size\": 23812,\n        \"mime_type\": \"image/png\",\n        \"width\": 300,\n        \"height\": 60\n    },\n    \"header_background\": {\n        \"id\": \"637161196771868692\",\n        \"size\": 173779,\n        \"mime_type\": \"image/png\",\n        \"width\": 880,\n        \"height\": 100\n    },\n    \"assets\": [\n        {\n            \"id\": \"637632002983591936\",\n            \"size\": 33216690,\n            \"mime_type\": \"video/mp4\",\n            \"width\": 1280,\n            \"height\": 720\n        },\n        {\n            \"id\": \"637618770654789632\",\n            \"size\": 4926011,\n            \"mime_type\": \"image/png\",\n            \"width\": 1920,\n            \"height\": 1080\n        },\n        {\n            \"id\": \"637618774819864576\",\n            \"size\": 4946616,\n            \"mime_type\": \"image/png\",\n            \"width\": 1920,\n            \"height\": 1080\n        },\n        {\n            \"id\": \"633566488003084288\",\n            \"size\": 4854948,\n            \"mime_type\": \"image/png\",\n            \"width\": 1920,\n            \"height\": 1080\n        },\n        {\n            \"id\": \"633566537332031488\",\n            \"size\": 5003217,\n            \"mime_type\": \"image/png\",\n            \"width\": 1920,\n            \"height\": 1080\n        },\n        {\n            \"id\": \"637615155324387331\",\n            \"size\": 4501884,\n            \"mime_type\": \"image/gif\",\n            \"width\": 600,\n            \"height\": 338\n        },\n        {\n            \"id\": \"712889602427322438\",\n            \"size\": 21777372,\n            \"mime_type\": \"video/mp4\",\n            \"width\": 1280,\n            \"height\": 720\n        },\n        {\n            \"id\": \"633585921140195338\",\n            \"size\": 61335,\n            \"mime_type\": \"image/png\",\n            \"width\": 414,\n            \"height\": 58\n        },\n        {\n            \"id\": \"633566394855850004\",\n            \"size\": 4877227,\n            \"mime_type\": \"image/png\",\n            \"width\": 1920,\n            \"height\": 1080\n        },\n        {\n            \"id\": \"633585953725743125\",\n            \"size\": 1781441,\n            \"mime_type\": \"image/gif\",\n            \"width\": 400,\n            \"height\": 305\n        }\n    ]\n}\n*/","import { Component, createRef, RefObject, UIEvent, UIEventHandler } from 'react'\nimport { currentClient } from '../App';\nimport { CallbackHandler, noCallback } from '../Callback'\nimport Button from '../components/Button';\nimport { DiscordChannel, DiscordChannelBase } from '../discord/discord-classes';\nimport { DiscordClient } from '../discord/DiscordClient';\nimport { dateToDateString } from '../utils';\nimport { isMemberListVisible } from './ChatContainer';\nimport ChatMessage from './ChatMessage';\nimport StorePage from './StorePage';\n\nimport './ChatArea.css'\nimport { DiscordMessage, DiscordMessageData } from '../discord/classes/DiscordMessage';\nimport { discordFormattedText } from '../discord/discord-message-formatting';\n\nconst messageHandler: CallbackHandler<DiscordMessage> = {\n    callback: noCallback\n}\n\nexport function pushMessage(message: DiscordMessage) {\n    messageHandler.callback(message);\n}\n\ntype ChatAreaProps = {\n    guildId: string\n    channel: DiscordChannelBase\n}\n\nexport default class ChatArea extends Component<ChatAreaProps, {\n    input: string\n}> {\n    constructor(props: ChatAreaProps) {\n        super(props)\n        this.state = {\n            input: ''\n        }\n    }\n\n    render() {\n        //if (this.props.newChannel) console.log('New Channel sel.')\n        return (\n            <main id='chat-area'>\n                {this.props.channel?.type === 6 ? <StorePage channel={this.props.channel as DiscordChannel<6>}/> : <>\n                <Input input={[this.state.input, (set) => this.setState({input: set})]} channel={this.props.channel}/>\n                <Chat guildId={this.props.guildId} channel={this.props.channel}/></>}\n            </main>\n        )\n    }\n}\n\ntype ChatProps = {\n    guildId: string\n    channel: DiscordChannelBase\n}\n\nclass Chat extends Component<ChatProps, {\n    messages: DiscordMessage[]\n}> {\n    private currentChannel = this.props.channel\n\n    private channelId = this.props.channel?.id\n    private messages: DiscordMessage[] = []\n\n    private fetchPaused = false\n    private prevScroll = {\n        height: 0,\n        top: 0\n    }\n\n    scrollArea: RefObject<HTMLDivElement>\n\n    constructor(props: ChatProps) {\n        super(props)\n        this.scrollArea = createRef()\n        this.state = {\n            messages: []\n        }\n    }\n\n    loadLatestMessages() {\n        console.log(`Loading Messages: ${this.channelId}`)\n        DiscordClient.request('GET', ['channels', this.channelId ?? 'null', 'messages'], undefined, undefined, ['limit=50']).then(value => \n            value.json()\n        ).then(messages => {\n            if (!Array.isArray(messages)) return\n            this.messages = []\n            for (let i = messages.length - 1; i >= 0; --i) {\n                const m = messages[i]\n                m[\"guild_id\"] = this.props.guildId\n                this.messages.push(new DiscordMessage(currentClient()!, m))\n            }\n            this.setState({\n                messages: this.messages\n            })\n        })\n    }\n\n    pushMessage(message: DiscordMessage) {\n        this.messages.push(message)\n        return this.messages\n    }\n\n    private setCallback() {\n        messageHandler.callback = (message) => {\n            //console.log(message.channel_id)\n            //console.log(this.props.channel?.id)\n            //console.log('#####')\n            if (message.channelId !== this.channelId) return\n\n            this.setState({\n                messages: this.pushMessage(message)\n            })\n        }\n    }\n\n    tryReloadMessages() {\n        this.currentChannel = this.props.channel\n        this.channelId = this.currentChannel?.id\n        this.loadLatestMessages()\n        this.fetchPaused = false\n        const scrollArea = this.scrollArea.current\n        if (!scrollArea) return\n        scrollArea.scrollTop = 0\n    }\n\n    componentDidMount() {\n        console.log('mount')\n        this.setCallback()\n        this.tryReloadMessages()\n    }\n\n    componentDidUpdate() {\n        this.setCallback()\n        const newChannel = this.props.channel?.id !== this.currentChannel?.id\n        if (newChannel) {\n            this.tryReloadMessages()\n        }\n    }\n\n    componentWillUnmount() {\n        messageHandler.callback = noCallback\n    }\n\n    fetchMessagesBefore(id: string) {\n        //currentClient()?.rest?.api?.channels?.[this.channelId!]?.messages?.get({ before: id, limit: 50 })\n        DiscordClient.request('GET', ['channels', this.channelId ?? 'null', 'messages'], undefined, undefined, [`before=${id}`, 'limit=50']).then(value => \n            value.json()\n        ).then(messages => {\n            if (!Array.isArray(messages)) return\n            const newMessages: DiscordMessage[] = []\n            for (let i = messages.length - 1; i >= 0; --i) {\n                const m = messages[i]\n                m[\"guild_id\"] = this.props.guildId\n                newMessages.push(new DiscordMessage(currentClient()!, m))\n            }\n            this.messages.unshift(...newMessages)\n            this.setState({\n                messages: this.messages\n            })\n        })\n    }\n\n    private onScroll: UIEventHandler<HTMLDivElement> = event => {\n        const target = event.target as HTMLDivElement\n        let onTop = target.scrollTop <= 25 + target.clientHeight - target.scrollHeight + 1\n        if (this.prevScroll.height < target.scrollHeight) {\n            target.scrollTop = this.prevScroll.top\n            this.fetchPaused = false\n            onTop = false\n        }\n        if (onTop) {\n            if (!this.fetchPaused) {\n                this.fetchPaused = true\n                console.log('Fetching messages...')\n                this.fetchMessagesBefore(this.messages[0].id)\n            }\n        }\n        this.prevScroll = {\n            height: target.scrollHeight,\n            top: target.scrollTop\n        }\n    }\n\n    render() {\n        const size = this.state.messages.length\n        const arr = Array(size)\n\n        let prevUserId\n        //let lastMessage\n        let prevTime: any//: { day: string, timestamp: number } | undefined = undefined\n        for (let i = 0; i < size; ++i) {\n            const message = this.state.messages[i]\n            /*if (!message.author) {\n                console.log('No author:')\n                console.log(message)\n                continue\n            }*/\n            const userId = message.author.id\n            let groupStart = userId !== prevUserId\n            const time = new Date(message.createdAt)\n            //const timeDiff = lastMessage ? new Date(message.timestamp).getTime() - new Date(lastMessage.timestamp).getTime() : undefined\n            const day = `${time.getDate()}.${time.getMonth()}.${time.getFullYear()}`\n            const separator = day !== prevTime?.day\n            if (separator) {\n                groupStart = true\n                arr.unshift(<ChatMessageDivider date={time}/>)\n            }\n            if (!groupStart) {\n                if (prevTime && (time.getTime() - prevTime.timestamp) > 600000) groupStart = true\n            }\n            arr.unshift(<ChatMessage\n            key={i}\n            message={message}\n            groupStart={groupStart}\n            />)\n            prevUserId = userId\n            prevTime = {\n                day: day,\n                timestamp: time.getTime()\n            }\n        }\n\n        return (\n            <div id='chat'>\n                <div className={isMemberListVisible() ? 'with-member-list-visible' : undefined}\n                ref={this.scrollArea}\n                onScroll={this.onScroll}\n                >\n                    {arr}\n                </div>\n            </div>\n        )\n    }\n}\n\nconst ChatMessageDivider = ({date}: {date: Date}) => (\n    <div className='chat-message-divider'>\n        <span>\n            {dateToDateString(date)}\n        </span>\n    </div>\n)\n\ntype InputProps = {\n    input: [string, (set: string) => void]\n    channel: DiscordChannelBase | undefined\n}\n\nclass Input extends Component<InputProps, {\n    input: string\n    activitiesShown: boolean\n}> {\n    textAreaRef: RefObject<HTMLTextAreaElement>\n\n    activities: any[] = []\n\n    constructor(props: InputProps) {\n        super(props)\n        this.state = {\n            input: props.input[0],\n            activitiesShown: false\n        }\n        this.textAreaRef = createRef()\n    }\n\n    submit(text: string) {\n        DiscordClient.request('POST', ['channels', this.props.channel?.id ?? 'null', 'messages'], {\n            content: text\n        })\n    }\n\n    render() {\n        return (\n            <form id=\"chat-input\">\n                <div className='row'>\n                    <button>\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12 2.00098C6.486 2.00098 2 6.48698 2 12.001C2 17.515 6.486 22.001 12 22.001C17.514 22.001 22 17.515 22 12.001C22 6.48698 17.514 2.00098 12 2.00098ZM17 13.001H13V17.001H11V13.001H7V11.001H11V7.00098H13V11.001H17V13.001Z\"></path></svg>\n                    </button>\n\n                    <div id=\"chat-message-input\">\n                        <textarea\n                        ref={this.textAreaRef}\n                        onKeyPress={e => {\n                            if (e.key === 'Enter' && !e.shiftKey) {\n                                e.preventDefault()\n                                \n                                const ref = this.textAreaRef.current!\n                                if (!ref.textContent) return\n\n                                this.setState({input: ''})\n                                console.log(ref.textContent)\n\n                                this.submit(ref.textContent)\n                            }\n                        }}\n                        onInput={e => {\n                            console.log(e)\n                        }}\n                        onChange={e => {\n                            this.setState({input: e.target.value})\n                            //e.target.\n                        }}\n                        value={this.state.input}\n                        placeholder=\"Message #text\"\n                        autoFocus\n                        spellCheck\n                        >\n                        </textarea>\n                    </div>\n\n                    <button onClick={e => {\n                        e.preventDefault()\n\n                        if (!this.state.activitiesShown) {\n                        DiscordClient.request('GET', ['applications', 'public'], undefined, undefined, ['application_ids=755827207812677713', 'application_ids=832012774040141894', 'application_ids=878067389634314250', 'application_ids=879863686565621790', 'application_ids=879863976006127627', 'application_ids=880218394199220334'])\n                        .then(value => value.json())\n                        .then(apps => {\n                            if (!Array.isArray(apps)) return\n                            this.activities = []\n                            apps.forEach(a => {\n                                this.activities.push(\n                                    <button style={{\n                                        height: 40,\n                                        marginTop: 10,\n                                        width: 220,\n                                        marginLeft: 10,\n                                        paddingLeft: 0,\n                                        display: 'block'\n                                    }} onClick={() => {\n                                        DiscordClient.request('POST', ['channels', this.textAreaRef.current?.value ?? 'null', 'invites'], {\n                                            max_age: 0,\n                                            target_type: 2,\n                                            target_application_id: a.id\n                                        })\n                                        .then(invite => invite.json())\n                                        .then(invite => {\n                                            this.submit(`https://discord.gg/${invite.code}`)\n                                            this.setState({ activitiesShown: false })\n                                        })\n                                    }}>\n                                        <img\n                                        src={`https://cdn.discordapp.com/app-icons/${a.id}/${a.icon}.webp?size=40&keep_aspect_ratio=false`}\n                                        alt={a.name}\n                                        style={{\n                                            float: 'left',\n                                            borderRadius: 4\n                                        }}\n                                        />\n                                        <div style={{\n                                            fontSize: 16,\n                                            fontWeight: 500,\n                                            paddingTop: 8,\n                                            float: 'left',\n                                            marginLeft: 10\n                                        }}>\n                                        {a.name}\n                                        </div>\n                                    </button>\n                                )\n                            })\n                            this.setState({ activitiesShown: true })\n                        })} else {\n                            this.setState({ activitiesShown: false })\n                        }\n                    }}>\n                        <div hidden={!this.state.activitiesShown} style={{\n                            position: 'absolute',\n                            marginTop: -328,\n                            marginLeft: -130,\n                            zIndex: 1000,\n                            backgroundColor: '#202020',\n                            paddingBottom: 10,\n                            borderRadius: 4,\n                        }}>\n                            {this.activities}\n                        </div>\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 20 24\"><g clip-path=\"url(#856f591c-ce22-4d14-9655-f75d44068523)\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.92871 13.4149L10.5857 19.0709L18.3639 11.2927C19.7781 9.87859 22.6066 6.48376 21.1923 2.80748C17.5153 1.3932 14.1213 4.22173 12.7074 5.63625L4.92871 13.4149ZM16.064 9.93309C17.1686 9.93309 18.064 9.03766 18.064 7.93309C18.064 6.82852 17.1686 5.93309 16.064 5.93309C14.9594 5.93309 14.064 6.82852 14.064 7.93309C14.064 9.03766 14.9594 9.93309 16.064 9.93309Z\" fill=\"currentColor\"></path><path d=\"M3.41357 16.7844C2.34946 17.8496 2.00004 22 2.00004 22C2.00004 22 6.15125 21.6521 7.21627 20.5869C7.71243 20.0915 7.96638 19.4494 8 18.8004L5.21285 18.7866L5.19829 16C4.54947 16.0336 3.90973 16.2881 3.41357 16.7844Z\" fill=\"currentColor\"></path><path d=\"M9.17144 9.17151H3.51459L1.74684 10.9393L6.34302 11.9999L9.17144 9.17151Z\" fill=\"currentColor\"></path><path d=\"M14.8283 14.8283V20.4852L13.0606 22.2529L11.9999 17.6568L14.8283 14.8283Z\" fill=\"currentColor\"></path></g><defs><clipPath id=\"856f591c-ce22-4d14-9655-f75d44068523\"><rect width=\"24\" height=\"24\"></rect></clipPath></defs></svg>\n                    </button>\n\n                    <button>\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M5 3C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3H5ZM16.8995 8.41419L15.4853 6.99998L7 15.4853L8.41421 16.8995L16.8995 8.41419Z\"></path></svg>\n                    </button>\n\n                    <EmojiButton/>\n                </div>\n            </form>\n        )\n    }\n}\n\nclass EmojiButton extends Component<{}, {\n    emojiIndex: number\n}> {\n    constructor(props: {}) {\n        super(props)\n        this.state = {\n            emojiIndex: 0x1f973\n        }\n    }\n\n    render() {\n        const emojiIndex = this.state.emojiIndex\n        return (\n            <button\n            className=\"emoji-button\"\n            onMouseEnter={() => {\n                this.setState({\n                    emojiIndex: Math.floor(Math.random() * 0x37) + 0x1f600\n                })\n            }}\n            >\n                <img\n                src={`https://abs-0.twimg.com/emoji/v2/svg/${emojiIndex.toString(16)}.svg`}\n                alt='emoji'\n                />\n            </button>\n        )\n    }\n}","import { Component, memo } from 'react'\nimport { selectChannel } from '../App'\nimport { DiscordGuild } from '../discord/classes/DiscordGuild'\nimport { DiscordChannelBase } from '../discord/discord-classes'\n\ntype ChannelsProps = {\n    guild: DiscordGuild\n    selectedChannel?: DiscordChannelBase\n}\n\nexport default class Channels extends Component<ChannelsProps> {\n    constructor(props: ChannelsProps) {\n        super(props)\n    }\n\n    _channels() {\n        const channels = this.props.guild.channels\n        //channels.forEach(c => console.log(`${c.name} (${c.type}): ${c.position} [${!!c.parent_id}]`))\n        //;([...channels].sort((a, b) => a.position - b.position)).forEach(c => console.log(`${c.name} (${c.type}): ${c.position} [${!!c.parent_id}]`))\n        const rulesChannelId = this.props.guild.rulesChannelId\n\n        type SC = {\n            cid: string\n            c?: DiscordChannelBase\n            cat: boolean\n            children: SC[]\n        }\n        const struct: SC[] = []\n\n        const iter = channels.fetchAll().entries()\n        while (true) {\n            const next = iter.next()\n            if (next.done) break\n            const channel = next.value[1]\n\n            if (channel.parent_id && (channel.type < 10 || channel.type > 12)) {\n                let parent = struct.find(sc => sc.cid === channel.parent_id)\n                if (!parent) {\n                    parent = { cid: channel.parent_id, cat: true, children: [] }\n                    struct.push(parent)\n                }\n\n                parent.children.push({\n                    cid: channel.id,\n                    c: channel,\n                    cat: channel.type === 4,\n                    children: []\n                })\n\n                continue\n            }\n\n            const existingSc = channel.type === 4 \n                ? struct.find(sc => sc.cid === channel.id)\n                : undefined\n            if (existingSc) existingSc.c = channel\n\n            const sc: SC = existingSc ?? {\n                cid: channel.id,\n                c: channel,\n                cat: channel.type === 4,\n                children: []\n            }\n\n            if (!existingSc) struct.push(sc)\n        }\n\n        const arr: any[] = []\n\n        function push(selectedChannelId: string, struct: SC[]) {\n            struct.sort((a, b) => (a.c!.position + (a.cat ? 999999 : 0)) - (b.c!.position + (b.cat ? 999999 : 0)))\n            for (const sc of struct) {\n                arr.push(<Channel channel={sc.c!} rules={sc.cid === rulesChannelId} selected={selectedChannelId === sc.cid}/>)\n                if (sc.children.length > 0) {\n                    push(selectedChannelId, sc.children)\n                }\n            }\n        }\n        push(this.props.selectedChannel?.id ?? 'null', struct)\n\n        return arr\n    }\n\n    render() {\n        return (\n            <div style={{\n                height: '100%',\n                width: '100%',\n                flexGrow: 1,\n                color: '#aaaaaa',\n                overflowX: 'hidden',\n                overflowY: 'auto',\n            }}>\n                <div style={{\n                    width: '100%',\n                    height: 16\n                }}/>\n                {this._channels()}\n            </div>\n        )\n    }\n}\n\ntype ChannelProps = {\n    channel: DiscordChannelBase\n    rules: boolean\n    selected: boolean\n}\n\nclass Channel extends Component<ChannelProps, { hover: boolean }> {\n    constructor(props: ChannelProps) {\n        super(props)\n        this.state = { hover: false }\n    }\n\n    render() {\n        const channelType = this.props.channel.type\n        return (\n            <div style={{\n                width: 224,\n                paddingTop: 1,\n                paddingBottom: 1,\n                height: 32,\n                paddingRight: 8,\n                fontSize: channelType === 4 ? '12px' : '15px',\n                fontWeight: channelType === 4 ? 600 : undefined,\n                color: channelType === 4 ? '#dddddd' : '#bbbbbb'\n            }}>\n                <div \n                style={{\n                    width: 200,\n                    height: 28,\n                    marginLeft: 8,\n                    paddingLeft: 8,\n                    paddingRight: 8,\n                    overflowX: 'clip',\n                    backgroundColor: channelType === 4 ? undefined : this.props.selected ? '#7f7f7f7f' : this.state.hover ? '#7f7f7f3f' : undefined,\n                    borderRadius: 4,\n                    paddingTop: channelType === 4 ? 12 : 4,\n                    cursor: 'pointer'\n                }}\n                onMouseEnter={() => { this.setState({ hover: true }) }} \n                onMouseLeave={() => { this.setState({ hover: false }) }}\n                onMouseDown={() => { if (this.props.channel.type !== 4) selectChannel(this.props.channel) }}\n                >\n                    <div style={{\n                        width: 20,\n                        height: 20,\n                        marginRight: 8,\n                        float: 'left',\n                        marginTop: -1\n                    }}>\n                        {channelIcon(this.props.rules, channelType)}\n                    </div>\n                    {channelType === 4 ? this.props.channel.name.toUpperCase() : this.props.channel.name}\n                </div>\n            </div>\n        )\n        return (\n            <div style={{\n                width: 208,\n                paddingTop: channelType === 4 ? 16 : 7,\n                paddingBottom: 7,\n                fontSize: channelType === 4 ? '12px' : '15px',\n                fontWeight: channelType === 4 ? 600 : undefined\n            }}>\n                <div \n                style={{\n                    width: '100%',\n                    marginLeft: channelType === 4 ? 0 : 8,\n                    paddingLeft: channelType === 4 ? 16 : 8,\n                    paddingRight: 8,\n                    height: 26,\n                    marginBottom: -6,\n                    display: 'flex',\n                    flexDirection: 'row',\n                    backgroundColor: channelType === 4 ? undefined : this.props.selected ? '#7f7f7f7f' : this.state.hover ? '#7f7f7f3f' : undefined,\n                    borderRadius: 3,\n                    cursor: 'pointer'\n                }} \n                onMouseEnter={() => { this.setState({ hover: true }) }} \n                onMouseLeave={() => { this.setState({ hover: false }) }}\n                onMouseDown={() => { if (this.props.channel.type !== 4) selectChannel(this.props.channel) }}\n                >\n                    <div style={{\n                        width: 20,\n                        height: 20,\n                        marginRight: 8\n                    }}>\n                        {channelIcon(this.props.rules, channelType)}\n                    </div>\n                    {channelType === 4 ? this.props.channel.name.toUpperCase() : this.props.channel.name}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport function channelIcon(rules: boolean, type: number) {\n    //return (<>{type}</>)\n    if (rules) return channelIcons.rules\n    if (type === 0) return channelIcons[0]\n    if (type === 2) return channelIcons[2]\n    if (type === 4) return channelIcons[4]\n    if (type === 5) return channelIcons[5]\n    if (type === 6) return channelIcons[6]\n    if (type === 13) return channelIcons[13]\n    if (type === 10 || type === 11 || type === 12) return channelIcons.thread\n}\n\nconst channelIcons = {\n    0: <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M5.88657 21C5.57547 21 5.3399 20.7189 5.39427 20.4126L6.00001 17H2.59511C2.28449 17 2.04905 16.7198 2.10259 16.4138L2.27759 15.4138C2.31946 15.1746 2.52722 15 2.77011 15H6.35001L7.41001 9H4.00511C3.69449 9 3.45905 8.71977 3.51259 8.41381L3.68759 7.41381C3.72946 7.17456 3.93722 7 4.18011 7H7.76001L8.39677 3.41262C8.43914 3.17391 8.64664 3 8.88907 3H9.87344C10.1845 3 10.4201 3.28107 10.3657 3.58738L9.76001 7H15.76L16.3968 3.41262C16.4391 3.17391 16.6466 3 16.8891 3H17.8734C18.1845 3 18.4201 3.28107 18.3657 3.58738L17.76 7H21.1649C21.4755 7 21.711 7.28023 21.6574 7.58619L21.4824 8.58619C21.4406 8.82544 21.2328 9 20.9899 9H17.41L16.35 15H19.7549C20.0655 15 20.301 15.2802 20.2474 15.5862L20.0724 16.5862C20.0306 16.8254 19.8228 17 19.5799 17H16L15.3632 20.5874C15.3209 20.8261 15.1134 21 14.8709 21H13.8866C13.5755 21 13.3399 20.7189 13.3943 20.4126L14 17H8.00001L7.36325 20.5874C7.32088 20.8261 7.11337 21 6.87094 21H5.88657ZM9.41045 9L8.35045 15H14.3504L15.4104 9H9.41045Z\"></path></svg>,\n    rules: <svg width=\"24\" height=\"24\" viewBox=\"0 0 40 40\" fill=\"none\" ><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M33 34.5833V7.49998H35V36.6666H9C6.791 36.6666 5 34.801 5 32.5V7.49998C5 5.19894 6.791 3.33331 9 3.33331H31V30.4166H9C7.8955 30.4166 7 31.3485 7 32.5C7 33.6515 7.8955 34.5833 9 34.5833H33ZM23.9718 9.99998L15.8889 17.9915L12.7086 14.8441L10 17.5058L15.8885 23.3333L26.6667 12.6669L23.9718 9.99998Z\"></path></svg>,\n    5: <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M3.9 8.26H2V15.2941H3.9V8.26Z\" fill=\"currentColor\"></path><path d=\"M19.1 4V5.12659L4.85 8.26447V18.1176C4.85 18.5496 5.1464 18.9252 5.5701 19.0315L9.3701 19.9727C9.4461 19.9906 9.524 20 9.6 20C9.89545 20 10.1776 19.8635 10.36 19.6235L12.7065 16.5242L19.1 17.9304V19.0588H21V4H19.1ZM9.2181 17.9944L6.75 17.3826V15.2113L10.6706 16.0753L9.2181 17.9944Z\" fill=\"currentColor\"></path></svg>,\n    forbidden: <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M17 11V7C17 4.243 14.756 2 12 2C9.242 2 7 4.243 7 7V11C5.897 11 5 11.896 5 13V20C5 21.103 5.897 22 7 22H17C18.103 22 19 21.103 19 20V13C19 11.896 18.103 11 17 11ZM12 18C11.172 18 10.5 17.328 10.5 16.5C10.5 15.672 11.172 15 12 15C12.828 15 13.5 15.672 13.5 16.5C13.5 17.328 12.828 18 12 18ZM15 11H9V7C9 5.346 10.346 4 12 4C13.654 4 15 5.346 15 7V11Z\" aria-hidden=\"true\"></path></svg>,\n    13: <svg width=\"23\" height=\"23\" viewBox=\"0 0 24 24\" fill=\"none\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14 13C14 14.1 13.1 15 12 15C10.9 15 10 14.1 10 13C10 11.9 10.9 11 12 11C13.1 11 14 11.9 14 13ZM8.5 20V19.5C8.5 17.8 9.94 16.5 12 16.5C14.06 16.5 15.5 17.8 15.5 19.5V20H8.5ZM7 13C7 10.24 9.24 8 12 8C14.76 8 17 10.24 17 13C17 13.91 16.74 14.75 16.31 15.49L17.62 16.25C18.17 15.29 18.5 14.19 18.5 13C18.5 9.42 15.58 6.5 12 6.5C8.42 6.5 5.5 9.42 5.5 13C5.5 14.18 5.82 15.29 6.38 16.25L7.69 15.49C7.26 14.75 7 13.91 7 13ZM2.5 13C2.5 7.75 6.75 3.5 12 3.5C17.25 3.5 21.5 7.75 21.5 13C21.5 14.73 21.03 16.35 20.22 17.75L21.51 18.5C22.45 16.88 23 15 23 13C23 6.93 18.07 2 12 2C5.93 2 1 6.93 1 13C1 15 1.55 16.88 2.48 18.49L3.77 17.74C2.97 16.35 2.5 14.73 2.5 13Z\" fill=\"currentColor\"></path></svg>,\n    2: <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.383 3.07904C11.009 2.92504 10.579 3.01004 10.293 3.29604L6 8.00204H3C2.45 8.00204 2 8.45304 2 9.00204V15.002C2 15.552 2.45 16.002 3 16.002H6L10.293 20.71C10.579 20.996 11.009 21.082 11.383 20.927C11.757 20.772 12 20.407 12 20.002V4.00204C12 3.59904 11.757 3.23204 11.383 3.07904ZM14 5.00195V7.00195C16.757 7.00195 19 9.24595 19 12.002C19 14.759 16.757 17.002 14 17.002V19.002C17.86 19.002 21 15.863 21 12.002C21 8.14295 17.86 5.00195 14 5.00195ZM14 9.00195C15.654 9.00195 17 10.349 17 12.002C17 13.657 15.654 15.002 14 15.002V13.002C14.551 13.002 15 12.553 15 12.002C15 11.451 14.551 11.002 14 11.002V9.00195Z\" aria-hidden=\"true\"></path></svg>,\n    thread: <svg width=\"12\" height=\"11\" viewBox=\"0 0 12 11\" fill=\"none\"><path d=\"M11 9H4C2.89543 9 2 8.10457 2 7V1C2 0.447715 1.55228 0 1 0C0.447715 0 0 0.447715 0 1V7C0 9.20914 1.79086 11 4 11H11C11.5523 11 12 10.5523 12 10C12 9.44771 11.5523 9 11 9Z\" fill=\"currentColor\"></path></svg>,\n    4: <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M16.59 8.59004L12 13.17L7.41 8.59004L6 10L12 16L18 10L16.59 8.59004Z\"></path></svg>,\n    6: <svg aria-hidden=\"false\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M21.707 13.293l-11-11C10.519 2.105 10.266 2 10 2H3c-.553 0-1 .447-1 1v7c0 .266.105.519.293.707l11 11c.195.195.451.293.707.293s.512-.098.707-.293l7-7c.391-.391.391-1.023 0-1.414zM7 9c-1.106 0-2-.896-2-2 0-1.106.894-2 2-2 1.104 0 2 .894 2 2 0 1.104-.896 2-2 2z\"></path></svg>\n}\n\nconst channelIconOverlays = {\n    restricted: <path fill=\"currentColor\" d=\"M21.025 5V4C21.025 2.88 20.05 2 19 2C17.95 2 17 2.88 17 4V5C16.4477 5 16 5.44772 16 6V9C16 9.55228 16.4477 10 17 10H19H21C21.5523 10 22 9.55228 22 9V5.975C22 5.43652 21.5635 5 21.025 5ZM20 5H18V4C18 3.42857 18.4667 3 19 3C19.5333 3 20 3.42857 20 4V5Z\"></path>,\n    thread: <path fill=\"currentColor\" d=\"M13.4399 12.96C12.9097 12.96 12.4799 13.3898 12.4799 13.92V20.2213C12.4799 20.7515 12.9097 21.1813 13.4399 21.1813H14.3999C14.5325 21.1813 14.6399 21.2887 14.6399 21.4213V23.4597C14.6399 23.6677 14.8865 23.7773 15.0408 23.6378L17.4858 21.4289C17.6622 21.2695 17.8916 21.1813 18.1294 21.1813H22.5599C23.0901 21.1813 23.5199 20.7515 23.5199 20.2213V13.92C23.5199 13.3898 23.0901 12.96 22.5599 12.96H13.4399Z\"></path>\n}\n\n/*\n\n        \n        const arr: any[] = []\n        let lastTopChannel = 0\n        const ids = new Map<string, number>()\n\n        let index = 0\n        for (const channel of channels) {\n            if (channel.parent_id) continue\n            const cc = <Channel key={index} channel={channel} rules={channel.id === rulesChannelId} selected={this.props.selectedChannel?.id === channel.id}/>\n            if (channel.type === 4) {\n                arr.push(cc)\n            } else {\n                arr.splice(lastTopChannel, 0, cc)\n                ++lastTopChannel\n            }\n            ids.set(channel.id, arr.length)\n            ++index\n        }\n        ids.forEach((v, k) => {\n            ids.set(k, v + lastTopChannel)\n        })\n        for (const channel of channels) {\n            if (!channel.parent_id) continue\n            const parentPos = ids.get(channel.parent_id)!\n            const pos = parentPos + channel.position\n            arr.splice(pos, 0, <Channel key={index} channel={channel} rules={channel.id === rulesChannelId} selected={this.props.selectedChannel?.id === channel.id}/>)\n            ids.forEach((v, k) => {\n                if (v > parentPos) ids.set(k, v + 1)\n            })\n            ++index\n        }\n*/","import { Component, memo } from 'react'\n\nexport default class MainPage extends Component {\n    render() {\n        return (\n            <>\n            <div style={{ width: '100%', height: 8 }}/>\n            <MenuItem selected={false} text='Friends' viewBox=\"0 0 24 24\"><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"currentColor\" fill-rule=\"nonzero\" d=\"M0.5,0 L0.5,1.5 C0.5,5.65 2.71,9.28 6,11.3 L6,16 L21,16 L21,14 C21,11.34 15.67,10 13,10 C13,10 12.83,10 12.75,10 C8,10 4,6 4,1.5 L4,0 L0.5,0 Z M13,0 C10.790861,0 9,1.790861 9,4 C9,6.209139 10.790861,8 13,8 C15.209139,8 17,6.209139 17,4 C17,1.790861 15.209139,0 13,0 Z\" transform=\"translate(2 4)\"></path><path d=\"M0,0 L24,0 L24,24 L0,24 L0,0 Z M0,0 L24,0 L24,24 L0,24 L0,0 Z M0,0 L24,0 L24,24 L0,24 L0,0 Z\"></path></g></MenuItem>\n            <MenuItem selected text='Library' viewBox=\"0 0 24 24\"><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"currentColor\" d=\"M17,13.6 L17.3999992,13.6 C19.0406735,13.6 20.496781,12.8097754 21.4084757,11.5891722 L21.8198761,18.8298199 C21.913864,20.4840062 20.6490733,21.9011814 18.994887,21.9951692 C18.9382174,21.9983891 18.8814679,22 18.8247069,22 L5.1752931,22 C3.51843885,22 2.1752931,20.6568542 2.1752931,19 C2.1752931,18.943239 2.17690401,18.8864895 2.18012387,18.8298199 L2.59152425,11.5891732 C3.503219,12.8097758 4.95932613,13.6 6.6,13.6 L7,13.6 L7,15 L9,15 L9,13.6 L15,13.6 L15,15 L17,15 L17,13.6 Z M7,16 L7,18 L9,18 L9,16 L7,16 Z M15,16 L17,16 L17,18 L15,18 L15,16 Z M15,11.6 L9,11.6 L9,9 L7,9 L7,11.6 L6.6,11.6 C4.94314575,11.6 3.6,10.2568542 3.6,8.6 L3.6,5 C3.6,3.34314575 4.94314575,2 6.6,2 L17.3999992,2 C19.0568535,2 20.3999992,3.34314575 20.3999992,5 L20.3999992,8.6 C20.3999992,10.2568542 19.0568535,11.6 17.3999992,11.6 L17,11.6 L17,9 L15,9 L15,11.6 Z\"></path></g></MenuItem>\n            </>\n        )\n    }\n}\n\ntype MenuItemProps = {\n    selected: boolean\n    text: string\n    viewBox: string\n    children?: any\n}\n\ntype MenuItemState = {\n    hover: boolean\n}\n\nclass MenuItem extends Component<MenuItemProps, MenuItemState> {\n    constructor(props: MenuItemProps) {\n        super(props)\n        this.state = {\n            hover: false\n        }\n    }\n\n    render() {\n        const bgc = this.props.selected ? '#3f3f3f' : this.state.hover ? '#2f2f2f' : '#222222'\n        return (\n            <div\n            style={{\n                marginLeft: 8,\n                paddingTop: 1,\n                paddingBottom: 1,\n                height: 42,\n                width: 224,\n                cursor: 'pointer'\n            }}\n            onMouseEnter={() => this.setState({ hover: true })}\n            onMouseLeave={() => this.setState({ hover: false })}\n            >\n                <div style={{\n                    paddingLeft: 8,\n                    paddingRight: 8,\n                    height: 42,\n                    width: 208,\n                    backgroundColor: bgc,\n                    borderRadius: 5,\n                    color: '#eeeeee'\n                }}>\n                    <svg style={{\n                        width: 24,\n                        height: 24,\n                        marginRight: 12,\n                        marginTop: 9,\n                        float: 'left',\n                    }} width=\"24\" height=\"24\" viewBox={this.props.viewBox}>\n                        {this.props.children}\n                    </svg>\n                    <div style={{\n                        width: 164,\n                        height: 20,\n                        marginTop: 9,\n                        display: 'inline-block',\n                        fontWeight: 500\n                    }}>\n                        {this.props.text}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\n\ntype UserInfoProps = {\n\n}\n\nexport default class UserInfo extends Component<UserInfoProps> {\n    render() {\n        const image = 'https://cdn.discordapp.com/avatars/353603367907360768/fb1949c8f45cbec1d2568d4bab9e874e.webp?size=32'\n        const platform = 'web'\n        const status = 'online'\n\n        return (\n            <section style={{\n                backgroundColor: '#1111117f',\n                width: '100%',\n                height: 53,\n                marginBottom: 22\n            }}>\n                <div style={{\n                    padding: '0 8px',\n                    display: 'flex',\n                    flexDirection: 'row',\n                    height: '100%',\n                    alignItems: 'inherit'\n                }}>\n                    <div role=\"img\" aria-label=\"T0tallyR3al, Online\" style={{\n                        width: 32,\n                        height: 32,\n                        marginRight: 12,\n                    }}>\n                        <svg width=\"40\" height=\"40\" viewBox=\"0 4 40 32\">\n                            <mask id=\"svg-mask-avatar-status-offline\"><rect width=\"40\" height=\"32\" fill=\"white\"></rect><circle cx=\"27\" cy=\"27\" r=\"8.5\" fill=\"black\"></circle></mask>\n                            <mask id=\"svg-mask-avatar-status-web\"><rect width=\"40\" height=\"32\" fill=\"white\"></rect><circle cx=\"27\" cy=\"27\" r=\"10\" fill=\"black\"></circle></mask>\n                            <mask id=\"svg-mask-avatar-status-desktop\"><rect width=\"40\" height=\"32\" fill=\"white\"></rect><rect x=\"17\" y=\"16.5\" width=\"18\" height=\"15.5\" rx=\"3\" fill=\"black\"></rect></mask>\n                            <mask id=\"svg-mask-avatar-status-mobile\"><rect width=\"40\" height=\"32\" fill=\"white\"></rect><rect x=\"19.2\" y=\"16\" width=\"18\" height=\"20\" rx=\"3\" fill=\"black\"></rect></mask>\n\n                            <mask id=\"svg-mask-status-offline\"><circle fill=\"white\" r=\"5\" cx=\"27\" cy=\"27\"></circle><circle cx=\"27\" cy=\"27\" r=\"2.5\" fill=\"black\"></circle></mask>\n                            <mask id=\"svg-mask-status-web\"><svg x=\"19\" y=\"19\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"white\" d=\"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM11 19.93C7.05 19.44 4 16.08 4 12C4 11.38 4.08 10.79 4.21 10.21L9 15V16C9 17.1 9.9 18 11 18V19.93ZM17.9 17.39C17.64 16.58 16.9 16 16 16H15V13C15 12.45 14.55 12 14 12H8V10H10C10.55 10 11 9.55 11 9V7H13C14.1 7 15 6.1 15 5V4.59C17.93 5.78 20 8.65 20 12C20 14.08 19.2 15.97 17.9 17.39Z\"></path></svg></mask>\n                            <mask id=\"svg-mask-status-desktop\"><svg x=\"18.5\" y=\"18\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"white\" d=\"M4 2.5C2.897 2.5 2 3.397 2 4.5V15.5C2 16.604 2.897 17.5 4 17.5H11V19.5H7V21.5H17V19.5H13V17.5H20C21.103 17.5 22 16.604 22 15.5V4.5C22 3.397 21.103 2.5 20 2.5H4ZM20 4.5V13.5H4V4.5H20Z\"></path></svg></mask>\n                            <mask id=\"svg-mask-status-mobile\"><svg x=\"18.5\" y=\"18\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\"><g><path fill=\"white\" d=\"M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z\"></path></g></svg></mask>\n\n                            <foreignObject x=\"0\" y=\"0\" width=\"32\" height=\"32\" mask={`url(#svg-mask-avatar-status-${platform})`}>\n                                <div><img width=\"32\" height=\"32\" src={image} alt=\" \" style={{ borderRadius: '100%' }}/></div>\n                            </foreignObject>\n                            <rect width=\"30\" height=\"30\" x=\"10\" y=\"10\" fill={status === 'online' ? 'rgb(59, 165, 93)' : status === 'idle' ? 'rgb(250, 168, 26)' : status === 'dnd' ? 'rgb(237, 66, 69)' : status === 'streaming' ? 'rgb(89, 54, 149)' : '#7f7f7f'} mask={`url(#svg-mask-status-${platform})`}/>\n                        </svg>\n                    </div>\n                    <div style={{\n                        flexGrow: 1\n                    }}>\n                        <span>Username</span>\n                        <br/>\n                        <span>Status</span>\n                    </div>\n                    <div style={{\n                        display: 'flex',\n                        flexShrink: 0,\n                        flexDirection: 'row'\n                    }}>\n                        <UserInfoButton>\n                            <svg aria-hidden=\"false\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.99 11C14.99 12.66 13.66 14 12 14C10.34 14 9 12.66 9 11V5C9 3.34 10.34 2 12 2C13.66 2 15 3.34 15 5L14.99 11ZM12 16.1C14.76 16.1 17.3 14 17.3 11H19C19 14.42 16.28 17.24 13 17.72V21H11V17.72C7.72 17.23 5 14.41 5 11H6.7C6.7 14 9.24 16.1 12 16.1ZM12 4C11.2 4 11 4.66667 11 5V11C11 11.3333 11.2 12 12 12C12.8 12 13 11.3333 13 11V5C13 4.66667 12.8 4 12 4Z\" fill=\"currentColor\"></path><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.99 11C14.99 12.66 13.66 14 12 14C10.34 14 9 12.66 9 11V5C9 3.34 10.34 2 12 2C13.66 2 15 3.34 15 5L14.99 11ZM12 16.1C14.76 16.1 17.3 14 17.3 11H19C19 14.42 16.28 17.24 13 17.72V22H11V17.72C7.72 17.23 5 14.41 5 11H6.7C6.7 14 9.24 16.1 12 16.1Z\" fill=\"currentColor\"></path></svg>\n                        </UserInfoButton>\n                        <UserInfoButton>\n                        <svg aria-hidden=\"false\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 2.00305C6.486 2.00305 2 6.48805 2 12.0031V20.0031C2 21.1071 2.895 22.0031 4 22.0031H6C7.104 22.0031 8 21.1071 8 20.0031V17.0031C8 15.8991 7.104 15.0031 6 15.0031H4V12.0031C4 7.59105 7.589 4.00305 12 4.00305C16.411 4.00305 20 7.59105 20 12.0031V15.0031H18C16.896 15.0031 16 15.8991 16 17.0031V20.0031C16 21.1071 16.896 22.0031 18 22.0031H20C21.104 22.0031 22 21.1071 22 20.0031V12.0031C22 6.48805 17.514 2.00305 12 2.00305Z\" fill=\"currentColor\"></path></svg></svg>\n                        </UserInfoButton>\n                        <UserInfoButton>\n                        <svg aria-hidden=\"false\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M19.738 10H22V14H19.739C19.498 14.931 19.1 15.798 18.565 16.564L20 18L18 20L16.565 18.564C15.797 19.099 14.932 19.498 14 19.738V22H10V19.738C9.069 19.498 8.203 19.099 7.436 18.564L6 20L4 18L5.436 16.564C4.901 15.799 4.502 14.932 4.262 14H2V10H4.262C4.502 9.068 4.9 8.202 5.436 7.436L4 6L6 4L7.436 5.436C8.202 4.9 9.068 4.502 10 4.262V2H14V4.261C14.932 4.502 15.797 4.9 16.565 5.435L18 3.999L20 5.999L18.564 7.436C19.099 8.202 19.498 9.069 19.738 10ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z\"></path></svg>\n                        </UserInfoButton>\n                    </div>\n                </div>\n            </section>\n        )\n    }\n}\n\n\nconst UserInfoButton = ({ children }: { children: any }) => (\n    <button style={{\n        width: 32,\n        height: 32,\n        backgroundColor: 'transparent'\n    }}>\n        <div style={{\n            height: 20\n        }}>\n            {children}\n        </div>\n    </button>\n)","import React, { Component } from 'react'\nimport { setVoiceState } from '../App'\nimport { DiscordVoiceState } from '../discord/voice/DiscordVoice'\n\ntype VoiceInfoProps = {\n    currentVoice: DiscordVoiceState\n}\n\nexport default class VoiceInfo extends Component<VoiceInfoProps> {\n    render() {\n        return (\n            <div style={{\n                backgroundColor: this.props.currentVoice.state === 'CONNECTED' ? '#4fdc7c' : '#faa81a',\n                padding: 8,\n                position: 'fixed',\n                bottom: 53,\n                width: 224,\n                display: 'flex',\n                flexDirection: 'row'\n            }}>\n                <div style={{\n                    flexGrow: 1\n                }}>\n                    {this.props.currentVoice.state}\n                    <br/>\n                    {this.props.currentVoice.channel?.name}\n                </div>\n                <button style={{\n                    \n                }} onClick={() => setVoiceState(null)}>\n                    <svg aria-hidden=\"false\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M21.1169 1.11603L22.8839 2.88403L19.7679 6.00003L22.8839 9.11603L21.1169 10.884L17.9999 7.76803L14.8839 10.884L13.1169 9.11603L16.2329 6.00003L13.1169 2.88403L14.8839 1.11603L17.9999 4.23203L21.1169 1.11603ZM18 22H13C6.925 22 2 17.075 2 11V6C2 5.447 2.448 5 3 5H7C7.553 5 8 5.447 8 6V10C8 10.553 7.553 11 7 11H6C6.063 14.938 9 18 13 18V17C13 16.447 13.447 16 14 16H18C18.553 16 19 16.447 19 17V21C19 21.553 18.553 22 18 22Z\"></path></svg>\n                </button>\n            </div>\n        )\n    }\n}\n","import { Component, memo } from 'react'\nimport { DiscordGuild } from '../discord/classes/DiscordGuild'\nimport { DiscordChannelBase } from '../discord/discord-classes'\nimport { DiscordVoiceState } from '../discord/voice/DiscordVoice'\nimport Channels from './Channels'\nimport MainPage from './MainPage'\nimport UserInfo from './UserInfo'\nimport VoiceInfo from './VoiceInfo'\n\ntype SidebarProps = {\n    selectedGuild: DiscordGuild | null\n    selectedChannel: DiscordChannelBase | null\n    currentVoice: DiscordVoiceState | null\n}\n\nexport default class Sidebar extends Component<SidebarProps> {\n    render() {\n        const guild = this.props.selectedGuild\n        const verified = guild ? guild.features.includes('VERIFIED') : false\n        const partnered = guild ? guild.features.includes('PARTNERED') : false\n        return (\n            <div id='Sidebar' style={{\n                height: '100%',\n                width: 240,\n                display: 'flex',\n                flexDirection: 'column'\n            }}>\n                <nav style={{\n                    width: '100%',\n                    display: 'flex',\n                    flexGrow: 1,\n                    flexDirection: 'column',\n                    height: 'calc(100% - 75px)'\n                }}>\n                    <div style={{\n                        width: 218,\n                        paddingLeft: 16,\n                        paddingRight: 16,\n                        height: 48,\n                        marginBottom: -2,\n                        color: '#eeeeee',\n                        flexShrink: 0\n                    }}>\n                        {guild ?\n                        <div style={{\n                            height: 20,\n                            marginTop: 14,\n                        }}>\n                            {verified || partnered ? <div style={{\n                                marginRight: 4,\n                                float: 'left',\n                                marginTop: 2, \n                                width: 16,\n                                height: 16\n                            }}>\n                                { verified ? <>\n                                <svg style={{ position: 'absolute', color: 'rgb(59, 165, 93)' }} aria-label=\"Verified\" width=\"16\" height=\"16\" viewBox=\"0 0 16 15.2\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"m16 7.6c0 .79-1.28 1.38-1.52 2.09s.44 2 0 2.59-1.84.35-2.46.8-.79 1.84-1.54 2.09-1.67-.8-2.47-.8-1.75 1-2.47.8-.92-1.64-1.54-2.09-2-.18-2.46-.8.23-1.84 0-2.59-1.54-1.3-1.54-2.09 1.28-1.38 1.52-2.09-.44-2 0-2.59 1.85-.35 2.48-.8.78-1.84 1.53-2.12 1.67.83 2.47.83 1.75-1 2.47-.8.91 1.64 1.53 2.09 2 .18 2.46.8-.23 1.84 0 2.59 1.54 1.3 1.54 2.09z\"></path></svg>\n                                <svg style={{ position: 'absolute', color: '#ffffff' }} width=\"16\" height=\"16\" viewBox=\"0 0 16 15.2\"><path d=\"M7.4,11.17,4,8.62,5,7.26l2,1.53L10.64,4l1.36,1Z\" fill=\"currentColor\"></path></svg>\n                                </> : partnered ? <>\n                                <svg style={{ position: 'absolute', color: '#7289da' }} aria-label=\"Discord Partner\" width=\"16\" height=\"16\" viewBox=\"0 0 16 15.2\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"m16 7.6c0 .79-1.28 1.38-1.52 2.09s.44 2 0 2.59-1.84.35-2.46.8-.79 1.84-1.54 2.09-1.67-.8-2.47-.8-1.75 1-2.47.8-.92-1.64-1.54-2.09-2-.18-2.46-.8.23-1.84 0-2.59-1.54-1.3-1.54-2.09 1.28-1.38 1.52-2.09-.44-2 0-2.59 1.85-.35 2.48-.8.78-1.84 1.53-2.12 1.67.83 2.47.83 1.75-1 2.47-.8.91 1.64 1.53 2.09 2 .18 2.46.8-.23 1.84 0 2.59 1.54 1.3 1.54 2.09z\"></path></svg>\n                                <svg style={{ position: 'absolute', color: '#ffffff' }} width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"><path d=\"M10.5906 6.39993L9.19223 7.29993C8.99246 7.39993 8.89258 7.39993 8.69281 7.29993C8.59293 7.19993 8.39317 7.09993 8.29328 6.99993C7.89375 6.89993 7.5941 6.99993 7.29445 7.19993L6.79504 7.49993L4.29797 9.19993C3.69867 9.49993 2.99949 9.39993 2.69984 8.79993C2.30031 8.29993 2.50008 7.59993 2.99949 7.19993L5.99598 5.19993C6.79504 4.69993 7.79387 4.49993 8.69281 4.69993C9.49188 4.89993 10.0912 5.29993 10.5906 5.89993C10.7904 6.09993 10.6905 6.29993 10.5906 6.39993Z\" fill=\"currentColor\"></path><path d=\"M13.4871 7.79985C13.4871 8.19985 13.2874 8.59985 12.9877 8.79985L9.89135 10.7999C9.29206 11.1999 8.69276 11.3999 7.99358 11.3999C7.69393 11.3999 7.49417 11.3999 7.19452 11.2999C6.39545 11.0999 5.79616 10.6999 5.29674 10.0999C5.19686 9.89985 5.29674 9.69985 5.39663 9.59985L6.79499 8.69985C6.89487 8.59985 7.09463 8.59985 7.19452 8.69985C7.39428 8.79985 7.59405 8.89985 7.69393 8.99985C8.09346 8.99985 8.39311 8.99985 8.69276 8.79985L9.39194 8.39985L11.3896 6.99985L11.6892 6.79985C12.1887 6.49985 12.9877 6.59985 13.2874 7.09985C13.4871 7.39985 13.4871 7.59985 13.4871 7.79985Z\" fill=\"currentColor\"></path></svg>\n                                </> : null}\n                            </div> : null}\n                            <h1 style={{\n                                width: 186,\n                                fontWeight: 500,\n                                fontSize: 15,\n                                overflowX: 'hidden',\n                                overflowY: 'hidden'\n                            }}>\n                                {guild.name}\n                            </h1>\n                        </div> : null}\n                    </div>\n                    <div style={{\n                        width: '100%',\n                        height: 2,\n                        backgroundColor: '#131313'\n                    }}/>\n                    {\n                    guild\n                    ? <Channels guild={guild} selectedChannel={this.props.selectedChannel ?? undefined}/>\n                    : <MainPage/>\n                    }\n                </nav>\n                <UserInfo/>\n                {this.props.currentVoice ? <VoiceInfo currentVoice={this.props.currentVoice}/> : null}\n            </div>\n        )\n    }\n}","import { Component, createRef, RefObject } from 'react'\nimport './App.css'\nimport Sidebar from './sidebar/Sidebar'\nimport Guilds from './guildsbar/Guilds'\nimport ChatContainer from './chat/ChatContainer'\nimport isElectron from 'is-electron'\nimport { DiscordClient } from './discord/DiscordClient'\nimport { DiscordChannel, DiscordChannelBase, DiscordIDK, DiscordRequestGuildMembers } from './discord/discord-classes'\nimport { CallbackHandler, noCallback } from './Callback'\nimport { DiscordGuild } from './discord/classes/DiscordGuild'\nimport { discordConnectVoice, discordDisconnectVoice, DiscordVoiceState } from './discord/voice/DiscordVoice'\nimport PCMPlayer from 'pcm-player'\n\nconst selectedGuildCH: CallbackHandler<DiscordGuild | null> = {\n  callback: noCallback\n}\nexport function selectGuild(guild: DiscordGuild | null) {\n  console.log(`Select Guild: ${guild?.name}`)\n  selectedGuildCH.callback(guild)\n}\n\nconst selectedChannelCH: CallbackHandler<DiscordChannelBase | null> = {\n  callback: noCallback\n}\nexport function selectChannel(channel: DiscordChannelBase | null) {\n  console.log(`Select Channel: ${channel?.name}`)\n  selectedChannelCH.callback(channel)\n}\n\nconst voiceStateCH: CallbackHandler<DiscordVoiceState | null> = {\n  callback: noCallback\n}\nlet prevVoiceState: DiscordVoiceState | undefined\nexport function setVoiceState(state: Partial<DiscordVoiceState> | null) {\n  console.log(`Update Voice State: ${state?.state}`)\n  const newState = state === null ? null : {\n    ...prevVoiceState,\n    ...state\n    /*channel: (prevVoiceState?.channel ?? state.channel)!,\n    state: (prevVoiceState?.state ?? state.state)!,\n    vws: (prevVoiceState?.vws ?? state.vws)!*/\n  } as DiscordVoiceState\n  prevVoiceState = newState ?? undefined\n  voiceStateCH.callback(newState)\n}\n\n\nlet client: DiscordClient | undefined = undefined\n\nexport function currentClient() {\n  return client\n}\n\n\nconst keyListener = (e: KeyboardEvent) => {\n  if (e.code === 'KeyR' && e.ctrlKey) window.electron.reloadPage()\n  else if (e.code === 'KeyI' && e.ctrlKey && e.shiftKey) window.electron.devTools()\n}\n\nexport default class App extends Component<{}, {\n  selectedGuild: DiscordGuild | null\n  selectedChannel: DiscordChannelBase | null\n  currentVoice: DiscordVoiceState | null\n}> {\n  private discordClient?: DiscordClient\n\n  constructor(props: {}) {\n    super(props)\n    this.state = {\n      selectedGuild: null,\n      selectedChannel: null,\n      currentVoice: null\n    }\n  }\n\n  private currentGuild: DiscordGuild | null = null\n\n  private selectedChannels: Map<string, string[]> = new Map()\n  private selectedChannelsPayload: Map<string, { [name: string]: [[0, 99]] }> = new Map()\n\n  componentDidMount() {\n\n    console.log('App Component did mount')\n    window.addEventListener('keypress', keyListener)\n\n    selectedChannelCH.callback = channel => {\n      if (this.currentGuild && channel?.id) {\n        if (channel.type === 2)\n          discordConnectVoice(client!.ws, this.currentGuild, channel as DiscordChannel<2>)\n        else {\n\n        const guildId = this.currentGuild.id\n\n        window.localStorage.setItem(`selected_channel_${guildId}`, channel.id)\n\n        let scs = this.selectedChannels.get(guildId)\n        if (scs === undefined) {\n          scs = []\n          this.selectedChannels.set(guildId, [])\n          this.selectedChannelsPayload.set(guildId, {})\n        }\n        if (!scs.includes(channel.id)) {\n          scs.push(channel.id)\n          const p = this.selectedChannelsPayload.get(guildId)!\n          p[channel.id] = [[0, 99]]\n          console.log(scs)\n          console.log(p)\n        }\n        this.discordClient?.ws.send(14, {\n          guild_id: guildId,\n          channels: this.selectedChannelsPayload.get(guildId)!,\n          threads: true,\n          activities: true,\n          typing: true\n        } as DiscordIDK)\n\n        }\n        /*this.discordClient?.ws.send(8, {\n          guild_id: guildId,\n          user_ids: this.discordClient.userIds\n        } as DiscordRequestGuildMembers)*/\n      } else { console.warn(`No guild selected (Tried to select Channel ${channel?.name} on Guild ${this.currentGuild})`) }\n      if (channel?.type !== 2) this.setState({ selectedChannel: channel })\n    }\n\n    selectedGuildCH.callback = guild => {\n      this.setState({ selectedGuild: guild })\n      const scId = window.localStorage.getItem(`selected_channel_${guild?.id}`)\n      console.log(guild)\n      const sc = (scId ? guild?.channels?.fetch(scId) as DiscordChannelBase : undefined) ?? guild?.channels?.fetchAll().values().next().value as DiscordChannelBase\n      this.currentGuild = guild\n      if (sc) selectChannel(sc)\n    }\n\n    voiceStateCH.callback = state => {\n      if (state === null && client) discordDisconnectVoice(client)\n      this.setState({ currentVoice: state })\n    }\n\n\n    if (isElectron()) {\n      console.log('Electron')\n      console.log(window.electron)\n      window.electron.ping()\n    \n      const pcmPlayer = new PCMPlayer({\n        inputCodec: 'Int16',\n        channels: 2,\n        flushTime: 2000,\n        sampleRate: 28000\n      })\n  \n      window.electron.setPcmHandler((data) => {\n        //console.log(data)\n        pcmPlayer.feed(Buffer.alloc(48000, Buffer.from(data)))\n      })\n    }\n    let token = window.localStorage.getItem('token')\n    if (!token) {\n      token = 'ODg3MzM4OTU4NDUzODY2NTU3.YUCs2A.XZz40Vz7W5foc3vYrrhG0Zhs6ts'\n      window.localStorage.setItem('token', token)\n    }\n    this.discordClient = new DiscordClient(token)\n    client = this.discordClient\n    this.discordClient.login()\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keypress', keyListener)\n\n    selectedGuildCH.callback = noCallback\n    selectedChannelCH.callback = noCallback\n    voiceStateCH.callback = noCallback\n\n    this.discordClient?.close()\n    client = undefined\n  }\n\n  render() {\n    return (\n      <div className='full-size'>\n        {isElectron() ? <AppBar/> : null}\n        <div id='app-root'>\n          <Guilds selectedGuild={this.state.selectedGuild}/>\n          <Sidebar selectedGuild={this.state.selectedGuild} selectedChannel={this.state.selectedChannel} currentVoice={this.state.currentVoice}/>\n          <ChatContainer guild={this.state.selectedGuild ?? null} selectedChannel={this.state.selectedChannel}/>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst AppBar = () => (\n  <div id='app-bar'>\n    <div className='flex-grow drag'>\n      ChaosCord\n    </div>\n    <AppBarIcon action='minimize'>\n      <svg aria-hidden=\"false\" width=\"12\" height=\"12\" viewBox=\"0 0 12 12\"><rect fill=\"currentColor\" width=\"10\" height=\"1\" x=\"1\" y=\"6\"></rect></svg>\n    </AppBarIcon>\n    <AppBarIcon action='maximize'>\n      <svg aria-hidden=\"false\" width=\"12\" height=\"12\" viewBox=\"0 0 12 12\"><rect width=\"9\" height=\"9\" x=\"1.5\" y=\"1.5\" fill=\"none\" stroke=\"currentColor\"></rect></svg>\n    </AppBarIcon>\n    <AppBarIcon action='close'>\n    <svg aria-hidden=\"false\" width=\"12\" height=\"12\" viewBox=\"0 0 12 12\"><polygon fill=\"currentColor\" fill-rule=\"evenodd\" points=\"11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1\"></polygon></svg>\n    </AppBarIcon>\n  </div>\n)\n\nconst AppBarIcon = ({ children, action }: { children: any, action: 'minimize' | 'maximize' | 'close' }) => (\n  <button className={action === 'close' ? 'app-bar-icon app-bar-icon-close' : 'app-bar-icon'}\n  onClick={() => window.electron.windowButton(action) }\n  >\n    {children}\n  </button>\n)","export interface CallbackHandler<T> {\n    callback: Callback<T>\n}\n\nexport type Callback<T> = (data: T) => void;\n\nexport const noCallback = () => {}","var map = {\n\t\"./GUILD_MEMBERS_CHUNK.ts\": [\n\t\t368,\n\t\t3\n\t],\n\t\"./GUILD_MEMBER_LIST_UPDATE.ts\": [\n\t\t369,\n\t\t4\n\t],\n\t\"./MESSAGE_CREATE.ts\": [\n\t\t370,\n\t\t5\n\t],\n\t\"./READY.ts\": [\n\t\t373,\n\t\t6\n\t],\n\t\"./VOICE_SERVER_UPDATE.ts\": [\n\t\t371,\n\t\t7\n\t],\n\t\"./VOICE_STATE_UPDATE.ts\": [\n\t\t372,\n\t\t8\n\t],\n\t\"./handlers.ts\": [\n\t\t30\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 90;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}